import{r as o,o as ee,t as z,j as e,B as j,S as te,p as ae,q as re,a as se,M,C as le}from"./index-DbvXYXc0.js";import{C as L,r as ie}from"./chart-Bcjh2pZL.js";import{C as y,a as u}from"./card-6tZ6FSP9.js";import{B as b}from"./badge-De3gxj8m.js";import{m as h}from"./proxy-Rx_HuwO6.js";import{C as de}from"./chart-column-Brn3O9I8.js";import{U as O}from"./users-E8rCSFRH.js";import{A as ne,Z as P}from"./zap-CO0QVGs0.js";import{T as F}from"./trending-up-XqNRnPMJ.js";import{G as _}from"./gauge-Df0GzuMn.js";import{S as oe}from"./star-BJn2oNt2.js";import{D as W}from"./dollar-sign-o41FEJ1i.js";import{T as ce}from"./tag-B5hTOg5I.js";import{U as me}from"./user-check-CXyQ1CX7.js";import{C as xe}from"./clock-BKbRfuIG.js";import"./use-presence-CB-MpOZZ.js";L.register(...ie);const he={normal:"Normal",sport:"Sport",luxury:"Luxury",commercial:"Commercial",industrial:"Industrial",event:"Event",sea:"Sea"},ge={"4x4":"4x4 / AWD","2_front":"Front Wheel","2_back":"Rear Wheel",autoblock:"Autoblock"},ye={automatic:"Automatic",manual:"Manual"},ue={benz:"Gasoline",diesel:"Diesel",electric:"Electric",hybrid:"Hybrid"},r={darkBlue:"#0E4C81",teal:"#008C95",limeGreen:"#8AC640"},H=[{key:"7d",label:"Last 7 days",period:"days",period_value:7},{key:"30d",label:"Last 30 days",period:"days",period_value:30},{key:"3m",label:"Last 3 months",period:"months",period_value:3},{key:"12m",label:"Last 12 months",period:"months",period_value:12},{key:"all",label:"All time",period:null,period_value:null}];function pe(l,c,m){if(l==="custom"&&c&&m)return{date_from:c,date_to:m};const x=H.find(a=>a.key===l);return!x||x.key==="all"||!x.period?{}:{period:x.period,period_value:x.period_value}}function be(l){if(!l)return"";if(l.length===10)return new Date(l+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});if(l.length===7){const[c,m]=l.split("-");return new Date(parseInt(c,10),parseInt(m,10)-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}if(l.match(/^\d{4}-\d{1,2}$/)){const[c,m]=l.split("-");return`Week ${m}, ${c}`}return l}const De=()=>{const[l,c]=o.useState(!1),[m,x]=o.useState(null),[a,S]=o.useState(null),[A,Z]=o.useState(null),[Y,E]=o.useState(!0),[T,G]=o.useState(null),[k,D]=o.useState("30d"),[N,q]=o.useState(""),[v,Q]=o.useState(""),w=o.useRef({});o.useEffect(()=>{const t=localStorage.getItem("theme"),i=window.matchMedia("(prefers-color-scheme: dark)").matches,s=t==="dark"||!t&&i;c(s),document.documentElement.classList.toggle("dark",s)},[]);const J=()=>{const t=!l;c(t),document.documentElement.classList.toggle("dark",t),localStorage.setItem("theme",t?"dark":"light")};o.useEffect(()=>{const t=JSON.parse(localStorage.getItem("user"));t&&x(t)},[]);const R=o.useCallback(async()=>{try{E(!0),G(null);const t=pe(k,N,v),i=await ee(t);if(i.data?.success)S(i.data.data??null),Z(i.data.filter_applied??null);else throw new Error("Invalid response format")}catch(t){console.error("Statistics fetch error:",t);const i=t.response?.data?.message||t.message||"Failed to load statistics";G(i),z.error(i),t.response?.status===401&&z.error("Please log in to view statistics")}finally{E(!1)}},[k,N,v]);o.useEffect(()=>{R()},[R]);const n={darkBlue:`${r.darkBlue}CC`,teal:`${r.teal}CC`,limeGreen:`${r.limeGreen}CC`,tealSolid:r.teal,limeGreenSolid:r.limeGreen,tealLight:`${r.teal}44`};o.useEffect(()=>{if(!a)return;const t=()=>{Object.values(w.current).forEach(s=>{s&&typeof s.destroy=="function"&&s.destroy()}),w.current={}},i=(s,d,$,f,B,g={})=>{const I=document.getElementById(s);if(!I)return;const U=Array.isArray(B)?B:[B],X=new L(I,{type:d,data:{labels:$,datasets:[{label:g.label||"Count",data:f,backgroundColor:U,borderColor:U.map(K=>K.replace(/CC$/,"FF").replace(/44$/,"FF")),borderWidth:3,borderRadius:d==="bar"?12:0,hoverOffset:d==="doughnut"||d==="pie"?20:0,fill:g.fill!==void 0?g.fill:!1,tension:g.tension||0,pointRadius:g.pointRadius||3,pointBackgroundColor:g.pointColor||n.limeGreenSolid,pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:g.pointHoverRadius||5}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:d==="bar"||d==="line"?"top":"bottom",labels:{color:l?"#9ca3af":"#4b5563",padding:15,font:{size:12,weight:"600"},usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:l?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:l?"#fff":"#000",bodyColor:l?"#e5e7eb":"#374151",borderColor:n.tealSolid,borderWidth:1,padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},cornerRadius:8}},animation:{duration:1200,easing:"easeOutQuart"},scales:d==="bar"||d==="line"?{y:{beginAtZero:!0,grid:{color:l?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},ticks:{color:l?"#9ca3af":"#6b7280",font:{size:11,weight:"600"}}},x:{grid:{display:!1},ticks:{color:l?"#9ca3af":"#6b7280",font:{size:11,weight:"600"}}}}:{}}});w.current[s]=X};if(t(),a.by_category?.length>0&&i("catChart","doughnut",a.by_category.map(s=>he[s.category]||s.category),a.by_category.map(s=>s.total),[n.darkBlue,n.teal,n.limeGreen]),a.by_make?.length>0){const s=a.by_make.slice(0,6);i("makeChart","bar",s.map(d=>d.make),s.map(d=>d.total),n.teal)}if(a.by_transmission?.length>0&&i("transChart","pie",a.by_transmission.map(s=>ye[s.transmission]||s.transmission),a.by_transmission.map(s=>s.total),[n.darkBlue,n.limeGreen]),a.by_fuel_type?.length>0&&i("fuelChart","doughnut",a.by_fuel_type.map(s=>ue[s.fuel_type]||s.fuel_type),a.by_fuel_type.map(s=>s.total),[n.teal,n.limeGreen]),a.by_drive_type?.length>0&&i("driveChart","doughnut",a.by_drive_type.map(s=>ge[s.drive_type]||s.drive_type),a.by_drive_type.map(s=>s.total),[n.darkBlue,n.teal,n.limeGreen]),a.by_city?.length>0){const s=a.by_city.slice(0,10);i("cityChart","bar",s.map(d=>d.city),s.map(d=>d.total),n.teal)}if(a.search_trends?.length>0){const s=document.getElementById("trendsChart");if(s){const d=s.getContext("2d").createLinearGradient(0,0,0,300);d.addColorStop(0,n.tealLight),d.addColorStop(1,"rgba(255,255,255,0)");const $=new L(s,{type:"line",data:{labels:a.search_trends.map(f=>be(f.date)),datasets:[{label:"Daily Searches",data:a.search_trends.map(f=>f.total),backgroundColor:d,borderColor:n.tealSolid,borderWidth:3,fill:!0,tension:.4,pointRadius:6,pointBackgroundColor:n.limeGreenSolid,pointBorderColor:"#fff",pointBorderWidth:2,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:l?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:l?"#fff":"#000",bodyColor:l?"#e5e7eb":"#374151",borderColor:n.tealSolid,borderWidth:1,padding:12,cornerRadius:8}},animation:{duration:1200,easing:"easeOutQuart"},scales:{y:{beginAtZero:!0,grid:{color:l?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},ticks:{color:l?"#9ca3af":"#6b7280",font:{size:11,weight:"600"}}},x:{grid:{display:!1},ticks:{color:l?"#9ca3af":"#6b7280",font:{size:11,weight:"600"}}}}}});w.current.trendsChart=$}}return()=>t()},[l,a]);const V=()=>{localStorage.clear(),window.location.href="/auth"};return Y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin mx-auto mb-4",style:{borderColor:r.teal,borderTopColor:"transparent"}}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading statistics..."})]})}):T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"⚠️"})}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:T}),e.jsx(j,{onClick:()=>window.location.reload(),style:{backgroundColor:r.teal},children:"Retry"})]})}):a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-900",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:[e.jsx(h.div,{animate:{scale:[1,1.15,1],opacity:[.08,.12,.08]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute -top-1/4 -left-1/4 w-1/3 h-1/3 rounded-full blur-3xl",style:{backgroundColor:`${r.darkBlue}30`}}),e.jsx(h.div,{animate:{scale:[1,1.2,1],opacity:[.06,.1,.06]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-1/2 -right-1/4 w-1/3 h-1/3 rounded-full blur-3xl",style:{backgroundColor:`${r.teal}30`}})]}),e.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 md:px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-6 h-6 md:w-7 md:h-7",style:{color:r.teal}}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-2xl font-bold bg-gradient-to-r from-[#0E4C81] via-[#008C95] to-[#8AC640] bg-clip-text text-transparent",children:"Search Analytics"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsxs(b,{variant:"outline",className:"hidden md:flex items-center gap-2 px-3 py-1",style:{borderColor:r.teal},children:[e.jsx(O,{className:"w-3 h-3",style:{color:r.teal}}),e.jsx("span",{className:"text-sm font-semibold",children:m?.username||"User"})]}),e.jsx(j,{variant:"ghost",size:"icon",onClick:J,className:"hover:bg-gray-100 dark:hover:bg-gray-800 h-9 w-9","aria-label":"Toggle dark mode",children:l?e.jsx(te,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:V,className:"hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 h-9 w-9","aria-label":"Log out",children:e.jsx(re,{className:"w-4 h-4"})})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 md:px-6 py-6 md:py-8 max-w-7xl relative z-10",children:[e.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[H.map(t=>e.jsx(j,{variant:k===t.key?"default":"outline",size:"sm",onClick:()=>D(t.key),style:k===t.key?{backgroundColor:r.teal}:{},children:t.label},t.key)),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Custom:"}),e.jsx("input",{type:"date",value:N,onChange:t=>q(t.target.value),className:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm px-2 py-1.5"}),e.jsx("span",{className:"text-gray-500",children:"–"}),e.jsx("input",{type:"date",value:v,onChange:t=>Q(t.target.value),className:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm px-2 py-1.5"}),e.jsx(j,{size:"sm",onClick:()=>D("custom"),disabled:!N||!v,style:{backgroundColor:r.darkBlue},children:"Apply"})]})]}),e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:A?.label??"All time"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-6 md:mb-8",children:[e.jsx(C,{icon:ne,title:"Total Searches",value:a.total_searches?.toLocaleString()??"0",gradient:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`,delay:0}),e.jsx(C,{icon:O,title:"Active Users",value:a.total_users?.toString()??"0",subtitle:Number(a.total_users)>0?`~${Math.round(Number(a.total_searches)/Number(a.total_users))} avg searches`:void 0,gradient:`linear-gradient(135deg, ${r.teal}, ${r.limeGreen})`,delay:.1}),e.jsx(C,{icon:F,title:"Top Make",value:a.by_make?.[0]?.make||"—",subtitle:`${a.by_make?.[0]?.total||0} searches`,gradient:`linear-gradient(135deg, ${r.limeGreen}, ${r.teal})`,delay:.2}),e.jsx(C,{icon:_,title:"Popular Category",value:a.by_category?.[0]?.category||"—",subtitle:`${a.by_category?.[0]?.total||0} searches`,gradient:`linear-gradient(135deg, ${r.darkBlue}, ${r.limeGreen})`,delay:.3})]}),a.search_trends?.length>0&&e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-6 md:mb-8",children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border hover:shadow-2xl transition-all duration-300",style:{borderColor:`${r.teal}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`},children:e.jsx(F,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-bold dark:text-white",children:"Search Trends"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Daily activity"})]})]}),e.jsx(b,{className:"text-xs px-2 py-1",style:{backgroundColor:`${r.limeGreen}30`,color:r.limeGreen},children:A?.label??(a.search_trends.length?`${a.search_trends.length} points`:"")})]}),e.jsx("div",{className:"h-48 md:h-56",children:e.jsx("canvas",{id:"trendsChart"})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8",children:[a.by_category?.length>0&&e.jsx(p,{title:"By Category",subtitle:"Distribution",icon:se,id:"catChart",delay:.5}),a.by_make?.length>0&&e.jsx(p,{title:"Top Makes",subtitle:"Most searched",icon:oe,id:"makeChart",delay:.6}),a.by_transmission?.length>0&&e.jsx(p,{title:"Transmission",subtitle:"Preferences",icon:_,id:"transChart",delay:.7}),a.by_fuel_type?.length>0&&e.jsx(p,{title:"Fuel Type",subtitle:"Distribution",icon:P,id:"fuelChart",delay:.8}),a.by_drive_type?.length>0&&e.jsx(p,{title:"Drive Type",subtitle:"Distribution",icon:_,id:"driveChart",delay:.85}),a.by_city?.length>0&&e.jsx(p,{title:"Top Cities",subtitle:"Most searched",icon:M,id:"cityChart",delay:.9})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8",children:[a.by_price_range?.length>0&&e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.95},children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border",style:{borderColor:`${r.teal}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`},children:e.jsx(W,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold dark:text-white",children:"By Price Range"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Daily rate ranges"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 font-semibold dark:text-white",children:"Range"}),e.jsx("th",{className:"text-right py-2 font-semibold dark:text-white",children:"Searches"})]})}),e.jsx("tbody",{children:a.by_price_range.map((t,i)=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300",children:t.daily_rate_min!=null||t.daily_rate_max!=null?`${t.daily_rate_min??"—"} – ${t.daily_rate_max??"—"}`:"Any"}),e.jsx("td",{className:"py-2 text-right font-medium dark:text-white",children:t.total})]},i))})]})})]})})}),a.top_features?.length>0&&e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border",style:{borderColor:`${r.darkBlue}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.teal}, ${r.limeGreen})`},children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold dark:text-white",children:"Top Features"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Popular options"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.top_features.map((t,i)=>e.jsxs(b,{variant:"secondary",className:"text-xs px-3 py-1",style:{backgroundColor:`${r.teal}20`,color:r.darkBlue},children:[t.feature," (",t.count,")"]},i))})]})})})]}),a.most_active_users?.length>0&&e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.05},className:"mb-6 md:mb-8",children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border",style:{borderColor:`${r.limeGreen}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.limeGreen}, ${r.teal})`},children:e.jsx(me,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold dark:text-white",children:"Most Active Users"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Top searchers"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 font-semibold dark:text-white",children:"User"}),e.jsx("th",{className:"text-right py-2 font-semibold dark:text-white",children:"Searches"})]})}),e.jsx("tbody",{children:a.most_active_users.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300",children:t.user_name??`User #${t.user_id}`}),e.jsx("td",{className:"py-2 text-right font-medium dark:text-white",children:t.total_searches})]},t.user_id))})]})})]})})}),e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border",style:{borderColor:`${r.darkBlue}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`},children:e.jsx(xe,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-bold dark:text-white",children:"Recent Searches"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Latest queries"})]})]}),a.recent_searches?.length>0?e.jsx("div",{className:"space-y-2",children:a.recent_searches.map((t,i)=>e.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1+i*.1},className:"flex flex-col md:flex-row md:items-center justify-between p-3 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 hover:shadow-md transition-all duration-300 gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsxs("p",{className:"font-bold text-sm md:text-base dark:text-white truncate",children:[t.make||"Any Make"," ",t.model||""]}),t.year_min!=null&&e.jsxs(b,{variant:"secondary",className:"text-xs px-2 py-0.5",children:[t.year_min,"–",t.year_max??"—"]}),t.user_name&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["by ",t.user_name]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[t.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3",style:{color:r.teal}}),t.city]}),(t.daily_rate_min!=null||t.daily_rate_max!=null)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),t.daily_rate_min??"—"," – ",t.daily_rate_max??"—"]}),t.transmission&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3",style:{color:r.teal}}),t.transmission]}),t.fuel_type&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3",style:{color:r.limeGreen}}),t.fuel_type]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),t.last_searched_at?new Date(t.last_searched_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"]})]})]}),e.jsxs(b,{className:"self-start md:self-center text-xs md:text-sm px-3 py-1 font-bold",style:{backgroundColor:`${r.teal}30`,color:r.teal},children:[t.search_count,"×"]})]},t.id))}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 italic py-8 text-sm",children:"No recent searches"})]})})})]})]}):null},C=({icon:l,title:c,value:m,subtitle:x,gradient:a,delay:S})=>e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:S},whileHover:{scale:1.02,y:-3},children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-lg rounded-xl border-0 hover:shadow-xl transition-all duration-300 h-full",children:e.jsxs(u,{className:"p-3 md:p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"w-9 h-9 md:w-11 md:h-11 rounded-xl flex items-center justify-center shadow-md",style:{background:a},children:e.jsx(l,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsx(b,{variant:"secondary",className:"text-[9px] md:text-[10px] px-1.5 py-0.5",children:"Live"})]}),e.jsx("p",{className:"text-[10px] md:text-xs text-gray-600 dark:text-gray-400 font-medium mb-1",children:c}),e.jsx("p",{className:"text-xl md:text-3xl font-black dark:text-white mb-0.5",children:m}),x&&e.jsx("p",{className:"text-[9px] md:text-xs text-gray-500 dark:text-gray-500",children:x})]})})}),p=({title:l,subtitle:c,icon:m,id:x,delay:a})=>e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:a},whileHover:{scale:1.01},children:e.jsx(y,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-xl rounded-xl border hover:shadow-2xl transition-all duration-300",style:{borderColor:`${r.teal}40`},children:e.jsxs(u,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`},children:e.jsx(m,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-bold dark:text-white",children:l}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c})]})]}),e.jsx("div",{className:"h-48 md:h-56",children:e.jsx("canvas",{id:x})})]})})});export{De as StatisticPage,De as default};
