import{d as cr,r as S,j as e,B as o,C as ta,a as la,c as dr,q as or,t as m,b as U}from"./index-DbvXYXc0.js";import{C as R,b as me,c as je,a as L}from"./card-6tZ6FSP9.js";import{B as P}from"./badge-De3gxj8m.js";import{I as v}from"./input-Bf8YvsU0.js";import{T as os,a as hs,b as H,c as V}from"./tabs-C3_ONro2.js";import{T as q,a as Y,b as _,c as l,d as G,e as t}from"./table-Cdzf11jr.js";import{S as E,a as z,b as M,d as O,e as j}from"./select-895Ag1Vf.js";import{D as hr,b as xr,c as mr,d as jr}from"./dialog-CvL19ZOf.js";import{A as ur,a as pr,b as vr,c as gr,d as fr,e as yr,f as Nr,g as br}from"./alert-dialog-iBykHA9-.js";import{T as ne}from"./textarea-BN8r6i6x.js";import{L as r}from"./label-DMFTECDG.js";import{S as ce}from"./switch-D3Ete2KM.js";import{g as na,a as _r,b as sa,c as Cr,d as wr,e as kr,f as Ar,h as Sr,u as Dr,i as Fr,j as Pr,k as Ir,l as Tr,m as $r,n as Br,o as Ur,p as Rr,q as Lr,r as Er,s as zr,t as Mr,v as Or,w as Vr,x as Hr,y as qr,z as Yr,A as Gr,B as Wr,C as Jr,D as Kr,E as Xr,F as Qr,G as aa,H as Zr,I as ei,J as si,K as ai,L as ri,M as ii}from"./adminApi-C-vdNBvN.js";import{A as ti}from"./AdForm-BCF9f2W_.js";import{F as li}from"./FeaturedCarForm-CKWgzPFr.js";import{u as ae,C as be,A as ni}from"./AdminContext-BM3HBLlB.js";import{U as Ce}from"./users-E8rCSFRH.js";import{D as xs}from"./dollar-sign-o41FEJ1i.js";import{R as J}from"./refresh-cw-BkItMj0z.js";import{U as ci}from"./user-check-CXyQ1CX7.js";import{C as we}from"./circle-check-CPW3N-42.js";import{C as Be}from"./circle-x-D4rSEnQD.js";import{E as ke}from"./eye--wIqRW1l.js";import{S as ie}from"./square-pen-CxEXnCdu.js";import{T as se}from"./trash-2-DiSdLuQ2.js";import{e as di,a as oi}from"./exportUtils-CeAGTcG1.js";import{P as ee}from"./plus-CKnT-f47.js";import{D as ra}from"./download-5pvV8Zme.js";import{C as ca}from"./chart-column-Brn3O9I8.js";import{B as bs}from"./briefcase-BYt3mvcU.js";import{B as da}from"./building-2-CRipOmJR.js";import{P as _e}from"./package-DnittsAY.js";import{M as oa}from"./message-circle-CPCE0lxB.js";import{S as ha}from"./search-DsOkoVxz.js";import{S as We}from"./star-BJn2oNt2.js";import{H as hi}from"./house-DRb9moXw.js";import{T as ia}from"./tag-B5hTOg5I.js";import{M as xi}from"./megaphone-DqcQZY12.js";import{C as mi}from"./circle-alert-CwItFlME.js";import{F as ji}from"./file-text-C6sc6Oop.js";import{C as ui}from"./calendar-days-Docro2_h.js";import{B as pi}from"./bell-B1cSwKnk.js";import{K as vi}from"./key-round-Wdy0QvLf.js";import{A as gi}from"./index-B12qvIYV.js";import"./index-UZKPKpE4.js";import"./index-B1ZSOLeI.js";import"./index-CB20-cGd.js";import"./index-9AnY3iUi.js";import"./index-DE3TGyh9.js";import"./Combination-B6rQ859v.js";import"./index-DXYwaiuf.js";import"./index-D66kppzp.js";import"./index-ddclwrTJ.js";import"./index-P5EQzgSd.js";import"./check-nqnuVgMJ.js";import"./index-AD6gynWr.js";import"./use-presence-CB-MpOZZ.js";const fi=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],yi=cr("lightbulb",fi);function Ni({onSubmit:h,loading:g=!1}){const[x,c]=S.useState({user_id:"",name:"",amount:"",source:"bank",type:"income",status:"pending",due_date:"",description:"",metadata:""}),n=w=>{const{name:d,value:p}=w.target;c(A=>({...A,[d]:p}))},C=(w,d)=>{c(p=>({...p,[w]:d}))},u=w=>{w.preventDefault();const d={...x,user_id:parseInt(x.user_id),amount:parseFloat(x.amount),due_date:x.due_date||new Date().toISOString().slice(0,19).replace("T"," "),...x.metadata&&{metadata:JSON.parse(x.metadata)}};h(d)};return e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"User ID *"}),e.jsx(v,{type:"number",name:"user_id",value:x.user_id,onChange:n,required:!0,placeholder:"Enter user ID"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Name/Description *"}),e.jsx(v,{type:"text",name:"name",value:x.name,onChange:n,required:!0,placeholder:"Payment name",maxLength:100})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Amount *"}),e.jsx(v,{type:"number",step:"0.01",name:"amount",value:x.amount,onChange:n,required:!0,placeholder:"99.99"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Source *"}),e.jsxs(E,{value:x.source,onValueChange:w=>C("source",w),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"wish",children:"Wish"}),e.jsx(j,{value:"omt",children:"OMT"}),e.jsx(j,{value:"bank",children:"Bank"}),e.jsx(j,{value:"cash",children:"Cash"}),e.jsx(j,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Type *"}),e.jsxs(E,{value:x.type,onValueChange:w=>C("type",w),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"income",children:"Income"}),e.jsx(j,{value:"expense",children:"Expense"}),e.jsx(j,{value:"debit",children:"Debit"}),e.jsx(j,{value:"upcoming_income",children:"Upcoming Income"}),e.jsx(j,{value:"credit",children:"Credit"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(E,{value:x.status,onValueChange:w=>C("status",w),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"pending",children:"Pending"}),e.jsx(j,{value:"paid",children:"Paid"}),e.jsx(j,{value:"overdue",children:"Overdue"}),e.jsx(j,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Due Date"}),e.jsx(v,{type:"datetime-local",name:"due_date",value:x.due_date,onChange:n})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(ne,{name:"description",value:x.description,onChange:n,placeholder:"Additional description"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Metadata (JSON)"}),e.jsx(ne,{name:"metadata",value:x.metadata,onChange:n,placeholder:'{"key": "value"}'})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsx(o,{type:"submit",disabled:g,className:"flex-1",children:g?"Issuing...":"Issue Payment/Invoice"})})]})}function bi(){const{summary:h}=ae();return e.jsx("div",{className:"space-y-6",children:h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(je,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.total_users}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.active_users," active"]})]})]}),e.jsxs(R,{children:[e.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(je,{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx(ta,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.total_bookings}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.pending_bookings," pending"]})]})]}),e.jsxs(R,{children:[e.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(je,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",h.total_revenue?.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",h.total_refunds?.toLocaleString()," refunds"]})]})]}),e.jsxs(R,{children:[e.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(je,{className:"text-sm font-medium",children:"Total Cars"}),e.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.total_cars}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.available_cars," available"]})]})]})]})})}function _i(){const{users:h,filters:g,setFilters:x,navigate:c,fetchUsers:n,fetchUserDetails:C,setSelectedItem:u,setModalType:w,setModalOpen:d,showConfirmDialog:p,deleteUser:A}=ae(),D=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{placeholder:"Search users...",className:"w-64"}),e.jsxs(E,{value:g.users.role,onValueChange:I=>x(K=>({...K,users:{...K.users,role:I}})),children:[e.jsx(z,{className:"w-32",children:e.jsx(M,{placeholder:"Role"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Roles"}),e.jsx(j,{value:"client",children:"Client"}),e.jsx(j,{value:"agency",children:"Agency"}),e.jsx(j,{value:"admin",children:"Admin"})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs(o,{onClick:()=>c("/admin/real-user-data"),style:{background:`linear-gradient(to right, ${be.darkBlue}, ${be.teal})`},className:"text-white flex items-center gap-2",children:[e.jsx(ci,{className:"w-4 h-4"}),"Manage Real User Data"]})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Role"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Verified"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(D)?D:[]).map(I=>e.jsxs(_,{children:[e.jsx(t,{children:I.id}),e.jsx(t,{children:I.first_name&&I.last_name?`${I.first_name} ${I.last_name}`:I.username||"N/A"}),e.jsx(t,{children:I.email||I.phone_number||"N/A"}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:I.role})}),e.jsx(t,{children:e.jsx(P,{variant:I.status?"default":"secondary",children:I.status?"Active":"Inactive"})}),e.jsx(t,{children:I.verified_by_admin?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const K=await C(I.id);K&&(u(K),w("view-user"),d(!0))},title:"View Details",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const K=await C(I.id);K&&(u(K),w("edit-user"),d(!0))},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>p("Delete User","Are you sure you want to delete this user?",()=>A(I.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},I.id))})]})})})]})}function Ci(){const{cars:h,filters:g,setFilters:x,fetchCars:c,fetchCarDetails:n,setSelectedItem:C,setModalType:u,setModalOpen:w,showConfirmDialog:d,deleteCar:p}=ae(),A=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{value:g.cars.status,onValueChange:D=>x(I=>({...I,cars:{...I.cars,status:D}})),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Status"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Statuses"}),e.jsx(j,{value:"available",children:"Available"}),e.jsx(j,{value:"not_available",children:"Not Available"}),e.jsx(j,{value:"rented",children:"Rented"}),e.jsx(j,{value:"maintenance",children:"Maintenance"})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:c,children:e.jsx(J,{className:"w-4 h-4"})})]})}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Make/Model"}),e.jsx(l,{children:"Year"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Approved"}),e.jsx(l,{children:"Daily Rate"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(A)?A:[]).map(D=>e.jsxs(_,{children:[e.jsx(t,{children:D.id}),e.jsxs(t,{children:[D.make," ",D.model]}),e.jsx(t,{children:D.year}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:D.status})}),e.jsx(t,{children:D.car_accepted?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsxs(t,{children:["$",D.daily_rate]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const I=await n(D.id);I&&(C(I),u("view-car"),w(!0))},title:"View Details",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const I=await n(D.id);I&&(C(I),u("edit-car"),w(!0))},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>d("Delete Car","Are you sure you want to delete this car?",()=>p(D.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},D.id))})]})})})]})}function wi(){const{bookings:h,filters:g,setFilters:x,fetchBookings:c,fetchBookingDetails:n,setSelectedItem:C,setModalType:u,setModalOpen:w,forceCompleteBooking:d}=ae(),p=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{value:g.bookings.status,onValueChange:A=>x(D=>({...D,bookings:{...D.bookings,status:A}})),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Status"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Statuses"}),e.jsx(j,{value:"pending",children:"Pending"}),e.jsx(j,{value:"confirmed",children:"Confirmed"}),e.jsx(j,{value:"cancelled",children:"Cancelled"}),e.jsx(j,{value:"completed",children:"Completed"}),e.jsx(j,{value:"rejected",children:"Rejected"})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:c,children:e.jsx(J,{className:"w-4 h-4"})})]})}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Client"}),e.jsx(l,{children:"Car"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Payment"}),e.jsx(l,{children:"Total Price"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(p)?p:[]).map(A=>e.jsxs(_,{children:[e.jsx(t,{children:A.id}),e.jsx(t,{children:A.client?.first_name&&A.client?.last_name?`${A.client.first_name} ${A.client.last_name}`:A.client?.username||"N/A"}),e.jsxs(t,{children:[A.car?.make," ",A.car?.model]}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:A.booking_request_status})}),e.jsx(t,{children:e.jsx(P,{variant:A.payment_status==="paid"?"default":"secondary",children:A.payment_status})}),e.jsxs(t,{children:["$",A.total_booking_price]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const D=await n(A.id);D&&(C(D),u("view-booking"),w(!0))},title:"View Details",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:async()=>{const D=await n(A.id);D&&(C(D),u("edit-booking"),w(!0))},children:e.jsx(ie,{className:"w-4 h-4"})}),A.booking_request_status==="confirmed"&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>d(A.id),title:"Force Complete","aria-label":"Force complete booking",children:e.jsx(we,{className:"w-4 h-4 text-green-500"})})]})})]},A.id))})]})})})]})}function ki(){const{payments:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchPayments:n,processRefund:C}=ae(),u=h?.data??(Array.isArray(h)?h:[]),w=[{key:"id",label:"ID"},{key:"user",label:"User",transform:d=>d.user?.name||"N/A"},{key:"amount",label:"Amount",transform:d=>`$${d.amount}`},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"source",label:"Source"},{key:"name",label:"Name"},{key:"created_at",label:"Created At",transform:d=>new Date(d.created_at).toLocaleString()}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{onClick:()=>{g(null),x("create-payment"),c(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Issue Payment/Invoice"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>{const d=(Array.isArray(u)?u:[]).map(p=>({...p,user:p.user?.name||"N/A",amount:`$${p.amount}`,created_at:new Date(p.created_at).toLocaleString()}));di(d,w,"invoices")},children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"Export Excel"]}),e.jsxs(o,{variant:"outline",onClick:()=>{const d=(Array.isArray(u)?u:[]).map(p=>({...p,user:p.user?.name||"N/A",amount:`$${p.amount}`,created_at:new Date(p.created_at).toLocaleString()}));oi(d,w,"Invoices Report","invoices")},children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,"aria-label":"Refresh payments",children:e.jsx(J,{className:"w-4 h-4"})})]})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Source"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(u)?u:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsx(t,{children:d.user?.name||"N/A"}),e.jsxs(t,{children:["$",d.amount]}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.type})}),e.jsx(t,{children:e.jsx(P,{variant:d.status==="paid"?"default":"secondary",children:d.status})}),e.jsx(t,{children:d.source}),e.jsx(t,{children:d.type==="refund"&&d.status!=="processed"&&e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{const p=d.reference_id||d.id;C(p)},children:"Process Refund"})})]},d.id))})]})})})]})}function Ai(){const{announcements:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchAnnouncements:n,showConfirmDialog:C,deleteAnnouncement:u}=ae(),w=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{onClick:()=>{g(null),x("create-announcement"),c(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Announcement"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Priority"}),e.jsx(l,{children:"Target Audience"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsx(t,{children:d.title}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.status})}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.priority})}),e.jsx(t,{children:d.target_audience?.join(", ")||"All"}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{g(d),x("edit-announcement"),c(!0)},"aria-label":"Edit announcement",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>C("Delete Announcement","Are you sure you want to delete this announcement?",()=>u(d.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},d.id))})]})})})]})}function Si(){const{appeals:h,filters:g,setFilters:x,setSelectedItem:c,setModalType:n,setModalOpen:C,fetchAppeals:u}=ae(),w=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{value:g.appeals.status,onValueChange:d=>x(p=>({...p,appeals:{...p.appeals,status:d}})),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Status"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Statuses"}),e.jsx(j,{value:"submitted",children:"Submitted"}),e.jsx(j,{value:"under_review",children:"Under Review"}),e.jsx(j,{value:"resolved",children:"Resolved"}),e.jsx(j,{value:"rejected",children:"Rejected"}),e.jsx(j,{value:"escalated",children:"Escalated"})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:u,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Priority"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsx(t,{children:d.user?.username||d.user?.email||"N/A"}),e.jsx(t,{children:d.type||"N/A"}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.status})}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.priority||"N/A"})}),e.jsx(t,{children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{c(d),n("edit-appeal"),C(!0)},children:e.jsx(ie,{className:"w-4 h-4"})})})]},d.id))})]})})})]})}function Di(){const{ads:h,navigate:g,setSelectedItem:x,setModalType:c,setModalOpen:n,fetchAds:C,showConfirmDialog:u,deleteAd:w}=ae(),d=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{x(null),c("create-ad"),n(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Ad"]}),e.jsxs(o,{variant:"outline",onClick:()=>g("/admin/ads-analytics"),children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"View Analytics"]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:C,"aria-label":"Refresh ads",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Website"}),e.jsx(l,{children:"Company Type"}),e.jsx(l,{children:"Online"}),e.jsx(l,{children:"Views"}),e.jsx(l,{children:"Clicks"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(d)?d:[]).map(p=>e.jsxs(_,{children:[e.jsx(t,{children:p.id}),e.jsx(t,{children:p.website}),e.jsx(t,{children:p.company_type}),e.jsx(t,{children:p.online?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsx(t,{children:p.nb_views}),e.jsx(t,{children:p.nb_clicks}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{x(p),c("edit-ad"),n(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>u("Delete Ad","Are you sure you want to delete this ad?",()=>w(p.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},p.id))})]})})})]})}function Fi(){const{promoCodes:h,brokers:g,filters:x,setFilters:c,setBrokerForm:n,setSelectedItem:C,setModalType:u,setModalOpen:w,fetchPromoCodes:d,fetchPromoCodeUsers:p,fetchBrokerReferrals:A,showConfirmDialog:D,handleDeletePromoCode:I}=ae(),K=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{C(null),u("create-promo-code"),w(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Promo Code"]}),e.jsxs(o,{variant:"outline",onClick:()=>{n({username:"",phone_number:"",email:"",password:"",password_confirmation:"",first_name:"",last_name:""}),u("create-broker"),w(!0)},children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Create Broker"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{value:x.promoCodes.broker_id||"all",onValueChange:T=>c(Q=>({...Q,promoCodes:{...Q.promoCodes,broker_id:T}})),children:[e.jsx(z,{className:"w-[180px]",children:e.jsx(M,{placeholder:"Filter by broker"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All brokers"}),(Array.isArray(g)?g:[]).map(T=>e.jsx(j,{value:String(T.id),children:T.username||`${T.first_name||""} ${T.last_name||""}`||`Broker #${T.id}`},T.id))]})]}),e.jsxs(E,{value:x.promoCodes.is_active,onValueChange:T=>c(Q=>({...Q,promoCodes:{...Q.promoCodes,is_active:T}})),children:[e.jsx(z,{className:"w-[150px]",children:e.jsx(M,{placeholder:"Status"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All status"}),e.jsx(j,{value:"true",children:"Active"}),e.jsx(j,{value:"false",children:"Inactive"})]})]})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:d,"aria-label":"Refresh promo codes",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"Code"}),e.jsx(l,{children:"Broker"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Uses"}),e.jsx(l,{children:"Commission %"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Expires At"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(K)?K:[]).map(T=>e.jsxs(_,{children:[e.jsx(t,{className:"font-mono font-semibold",children:T.code}),e.jsx(t,{children:T.broker?T.broker.username||`${T.broker.first_name||""} ${T.broker.last_name||""}`:"N/A"}),e.jsx(t,{className:"max-w-xs truncate",children:T.description||"—"}),e.jsxs(t,{children:[T.current_uses," / ",T.max_uses??"∞"]}),e.jsxs(t,{children:[T.commission_percentage??0,"%"]}),e.jsx(t,{children:e.jsx(P,{variant:T.is_active?"default":"secondary",children:T.is_active?"Active":"Inactive"})}),e.jsx(t,{children:T.expires_at?new Date(T.expires_at).toLocaleDateString():"No expiry"}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{C(T),u("edit-promo-code"),w(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{C(T),p(T.id),A(T.broker_id),u("view-promo-users"),w(!0)},children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>D("Delete Promo Code","Are you sure you want to delete this promo code?",()=>I(T.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},T.id))})]})})})]})}function Pi(){const{brokers:h,selectedBroker:g,brokerDetailTab:x,setBrokerDetailTab:c,brokerBalance:n,brokerCommissions:C,brokerPayouts:u,brokerReferrals:w,brokerCommissionsList:d,commissionStatusFilter:p,setCommissionStatusFilter:A,setBrokerCommissions:D,setBrokerForm:I,setPayoutForm:K,setSelectedBroker:T,setModalType:Q,setModalOpen:ue,fetchBrokers:Ae,fetchBrokerCommissionsList:Ue,openBrokerDetail:Se,closeBrokerDetail:y,showConfirmDialog:De,handleCancelCommission:Fe,handleDeleteBrokerReferral:Je}=ae(),ms=async N=>{if(g?.id){A(N);try{const pe=await na(g.id,{status:N==="all"?void 0:N}),Re=pe.data?.commissions?.data??pe.data?.commissions;D({data:Array.isArray(Re)?Re:[],statistics:pe.data?.statistics||{}})}catch(pe){console.error("Failed to fetch broker commissions:",pe)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>{I({username:"",phone_number:"",email:"",password:"",password_confirmation:"",first_name:"",last_name:""}),Q("create-broker"),ue(!0)},children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Create Broker"]}),e.jsxs(o,{onClick:()=>{K({broker_id:g?.id?String(g.id):"select",amount:g?.id&&n?.balance!=null?String(n.balance):"",reference:"",notes:""}),Q("create-broker-payout"),ue(!0)},children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),"Create Payout"]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:()=>{Ae(),Ue()},children:e.jsx(J,{className:"w-4 h-4"})})]}),g?e.jsxs(R,{children:[e.jsxs(me,{className:"flex flex-row items-center justify-between",children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),g.username||`${g.first_name||""} ${g.last_name||""}`.trim()||`Broker #${g.id}`]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{K({broker_id:String(g.id),amount:n?.balance?String(n.balance):"",reference:"",notes:""}),Q("create-broker-payout"),ue(!0)},children:[e.jsx(xs,{className:"w-4 h-4 mr-1"}),"Pay broker"]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:y,children:"Close"})]})]}),e.jsx(L,{children:e.jsxs(os,{value:x,onValueChange:c,className:"w-full",children:[e.jsxs(hs,{className:"grid w-full grid-cols-4",children:[e.jsx(H,{value:"overview",children:"Overview"}),e.jsx(H,{value:"commissions",children:"Commissions"}),e.jsx(H,{value:"payouts",children:"Payouts"}),e.jsx(H,{value:"referrals",children:"Referrals"})]}),e.jsx(V,{value:"overview",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{children:e.jsxs(L,{className:"pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Balance"}),e.jsxs("p",{className:"text-2xl font-bold",style:{color:be.limeGreen},children:["$",(n?.balance??0).toFixed(2)]})]})}),e.jsx(R,{children:e.jsxs(L,{className:"pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total commissions"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",(n?.total_commissions??C.statistics?.total_commissions??0).toFixed(2)]})]})}),e.jsx(R,{children:e.jsxs(L,{className:"pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total payouts"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",(n?.total_payouts??C.statistics?.total_payouts??0).toFixed(2)]})]})})]})}),e.jsxs(V,{value:"commissions",className:"mt-4",children:[e.jsx("div",{className:"flex gap-2 mb-4",children:["all","pending","paid","cancelled"].map(N=>e.jsx(o,{variant:p===N?"default":"outline",size:"sm",onClick:()=>ms(N),children:N.charAt(0).toUpperCase()+N.slice(1)},N))}),e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Referred user"}),e.jsx(l,{children:"Promo code"}),e.jsx(l,{children:"Booking amount"}),e.jsx(l,{children:"Commission"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Completed at"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(C.data)?C.data:[]).map(N=>e.jsxs(_,{children:[e.jsx(t,{children:N.id}),e.jsx(t,{children:N.referredUser?`${N.referredUser.first_name||""} ${N.referredUser.last_name||""}`.trim()||N.referredUser.username:N.referred_user_id}),e.jsx(t,{children:N.promoCode?.code||"—"}),e.jsxs(t,{children:["$",Number(N.booking_amount||0).toFixed(2)]}),e.jsxs(t,{children:["$",Number(N.commission_amount||0).toFixed(2)," (",N.commission_percentage,"%)"]}),e.jsx(t,{children:e.jsx(P,{variant:N.status==="paid"?"default":N.status==="cancelled"?"secondary":"outline",children:N.status})}),e.jsx(t,{children:N.booking_completed_at?new Date(N.booking_completed_at).toLocaleDateString():"—"}),e.jsx(t,{children:N.status==="pending"&&e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>De("Cancel commission","Are you sure? This cannot be undone.",()=>Fe(N.id)),children:"Cancel"})})]},N.id))})]})]}),e.jsx(V,{value:"payouts",className:"mt-4",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"Reference ID"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Paid at"}),e.jsx(l,{children:"Description"})]})}),e.jsx(G,{children:(Array.isArray(u.data)?u.data:[]).map(N=>e.jsxs(_,{children:[e.jsx(t,{className:"font-mono text-xs",children:N.reference_id||N.id}),e.jsxs(t,{children:["$",((N.amount||0)/100).toFixed(2)]}),e.jsx(t,{children:N.paid_at?new Date(N.paid_at).toLocaleString():"—"}),e.jsx(t,{children:N.description||N.metadata?.reference||"—"})]},N.id))})]})}),e.jsx(V,{value:"referrals",className:"mt-4",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Referred user"}),e.jsx(l,{children:"Promo code"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(N=>e.jsxs(_,{children:[e.jsx(t,{children:N.id}),e.jsx(t,{children:N.referredUser?`${N.referredUser.first_name||""} ${N.referredUser.last_name||""}`.trim()||N.referredUser.username:N.referred_user_id}),e.jsx(t,{children:N.promoCode?.code||"—"}),e.jsx(t,{children:e.jsx(o,{variant:"ghost",size:"sm",className:"text-red-500",onClick:()=>De("Delete referral","Remove this referral link? This cannot be undone.",()=>Je(N.id)),children:"Delete"})})]},N.id))})]})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs(me,{children:[e.jsx(je,{children:"Brokers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click Manage to view balance, commissions, payouts, and referrals."})]}),e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Username"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Phone"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(h)?h:[]).map(N=>e.jsxs(_,{children:[e.jsx(t,{children:N.id}),e.jsx(t,{children:N.username}),e.jsx(t,{children:[N.first_name,N.last_name].filter(Boolean).join(" ")||"—"}),e.jsx(t,{children:N.phone_number||"—"}),e.jsx(t,{children:e.jsx(o,{variant:"outline",size:"sm",onClick:()=>Se(N),children:"Manage"})})]},N.id))})]})})]}),e.jsxs(R,{children:[e.jsx(me,{children:e.jsx(je,{children:"All broker commissions"})}),e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Broker"}),e.jsx(l,{children:"Referred user"}),e.jsx(l,{children:"Promo"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Status"})]})}),e.jsx(G,{children:(Array.isArray(d?.data)?d.data:[]).map(N=>e.jsxs(_,{children:[e.jsx(t,{children:N.id}),e.jsx(t,{children:N.broker?N.broker.username||`${N.broker.first_name||""} ${N.broker.last_name||""}`:N.broker_id}),e.jsx(t,{children:N.referredUser?`${N.referredUser.first_name||""} ${N.referredUser.last_name||""}`.trim()||N.referredUser.username:"—"}),e.jsx(t,{children:N.promoCode?.code||"—"}),e.jsxs(t,{children:["$",Number(N.commission_amount||0).toFixed(2)]}),e.jsx(t,{children:e.jsx(P,{variant:N.status==="paid"?"default":N.status==="cancelled"?"secondary":"outline",children:N.status})})]},N.id))})]})})]})]})]})}function Ii(){const{featuredCars:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchFeaturedCars:n,showConfirmDialog:C,deleteFeaturedCar:u}=ae(),w=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{onClick:()=>{g(null),x("create-featured-car"),c(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Featured Car"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Car"}),e.jsx(l,{children:"Duration"}),e.jsx(l,{children:"Start Date"}),e.jsx(l,{children:"Expire Date"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsxs(t,{children:[d.car?.make," ",d.car?.model]}),e.jsxs(t,{children:[d.duration," days"]}),e.jsx(t,{children:new Date(d.start_at).toLocaleDateString()}),e.jsx(t,{children:new Date(d.expire_at).toLocaleDateString()}),e.jsx(t,{children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>C("Remove Featured Car","Are you sure?",()=>u(d.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})})]},d.id))})]})})})]})}function Ti(){const{holidays:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchHolidays:n,showConfirmDialog:C,deleteHoliday:u}=ae(),w=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{onClick:()=>{g(null),x("create-holiday"),c(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Holiday"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Car"}),e.jsx(l,{children:"Holiday Name"}),e.jsx(l,{children:"Dates"}),e.jsx(l,{children:"Increase %"}),e.jsx(l,{children:"Active"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsxs(t,{children:[d.car?.make," ",d.car?.model]}),e.jsx(t,{children:d.holiday_name}),e.jsxs(t,{children:[d.holiday_dates?.start," - ",d.holiday_dates?.end]}),e.jsxs(t,{children:[d.percentage_increase,"%"]}),e.jsx(t,{children:d.is_active?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{g(d),x("edit-holiday"),c(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>C("Delete Holiday","Are you sure you want to delete this holiday?",()=>u(d.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},d.id))})]})})})]})}function $i(){const{suggestions:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchSuggestions:n,showConfirmDialog:C,deleteSuggestion:u}=ae(),w=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{variant:"outline",size:"icon",onClick:n,"aria-label":"Refresh suggestions",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:(Array.isArray(w)?w:[]).map(d=>e.jsxs(_,{children:[e.jsx(t,{children:d.id}),e.jsx(t,{children:d.user?.name||"N/A"}),e.jsx(t,{children:d.title}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:d.status})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{g(d),x("edit-suggestion"),c(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>C("Delete Suggestion","Are you sure you want to delete this suggestion?",()=>u(d.id)),children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})]})})]},d.id))})]})})})]})}function Bi(){const{notifications:h,setSelectedItem:g,setModalType:x,setModalOpen:c,fetchNotifications:n}=ae(),C=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{onClick:()=>{g(null),x("send-notification"),c(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Send to All Users"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Read"}),e.jsx(l,{children:"Sent"}),e.jsx(l,{children:"Created"})]})}),e.jsx(G,{children:(Array.isArray(C)?C:[]).map(u=>e.jsxs(_,{children:[e.jsx(t,{children:u.id}),e.jsx(t,{children:u.title}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:u.type})}),e.jsx(t,{children:u.is_read?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsx(t,{children:u.is_sent?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(Be,{className:"w-4 h-4 text-gray-400"})}),e.jsx(t,{children:new Date(u.created_at).toLocaleDateString()})]},u.id))})]})})})]})}function Ui(){const{otps:h,loading:g,filters:x,setFilters:c,fetchOtps:n}=ae(),C=h?.data??(Array.isArray(h)?h:[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{placeholder:"Search by phone number...",className:"w-64",value:x.otps.phone_number,onChange:u=>c(w=>({...w,otps:{...w.otps,phone_number:u.target.value}}))}),e.jsxs(E,{value:x.otps.expired,onValueChange:u=>c(w=>({...w,otps:{...w.otps,expired:u}})),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Expired"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All OTPs"}),e.jsx(j,{value:"false",children:"Active"}),e.jsx(j,{value:"true",children:"Expired"})]})]})]}),e.jsx(o,{variant:"outline",size:"icon",onClick:n,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Phone Number"}),e.jsx(l,{children:"OTP Code"}),e.jsx(l,{children:"Created At"}),e.jsx(l,{children:"Expires At"}),e.jsx(l,{children:"Status"})]})}),e.jsx(G,{children:g&&(Array.isArray(C)?C:[]).length===0?e.jsx(_,{children:e.jsxs(t,{colSpan:6,className:"text-center py-8",children:[e.jsx(J,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading OTPs..."]})}):(Array.isArray(C)?C:[]).length===0?e.jsx(_,{children:e.jsx(t,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No OTPs found"})}):(Array.isArray(C)?C:[]).map(u=>{const w=new Date(u.expired_at)<new Date;return e.jsxs(_,{children:[e.jsx(t,{children:u.id}),e.jsx(t,{children:u.phone_number}),e.jsx(t,{className:"font-mono font-bold",children:u.code}),e.jsx(t,{children:new Date(u.created_at).toLocaleString()}),e.jsx(t,{children:new Date(u.expired_at).toLocaleString()}),e.jsx(t,{children:w?e.jsx(P,{variant:"destructive",children:"Expired"}):e.jsx(P,{variant:"default",children:"Active"})})]},u.id)})})]})})})]})}function Ri(){const h=ae(),{services:g,thirdParties:x,serviceItems:c,serviceFeedbacks:n,loading:C,filters:u,setFilters:w,selectedServiceId:d,setSelectedItem:p,setModalType:A,setModalOpen:D,setConfirmDialog:I,fetchServices:K,fetchThirdParties:T,fetchServiceItems:Q,fetchServiceFeedbacks:ue,handleDeleteService:Ae,handleDeleteFeedback:Ue,handleDeleteServiceItem:Se}=h;return e.jsx("div",{className:"space-y-6",children:e.jsxs(os,{defaultValue:"services-list",className:"w-full",children:[e.jsxs(hs,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(H,{value:"services-list",className:"text-xs",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Services"]}),e.jsxs(H,{value:"third-parties",className:"text-xs",children:[e.jsx(da,{className:"w-4 h-4 mr-1"}),"Third Parties"]}),e.jsxs(H,{value:"service-items",className:"text-xs",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),"Service Items"]}),e.jsxs(H,{value:"service-feedbacks",className:"text-xs",children:[e.jsx(oa,{className:"w-4 h-4 mr-1"}),"Feedbacks"]})]}),e.jsxs(V,{value:"services-list",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{p(null),A("create-service"),D(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Create Service"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:K,"aria-label":"Refresh services",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{placeholder:"Search services...",value:u.services.search,onChange:y=>w({...u,services:{...u.services,search:y.target.value}}),className:"w-48"}),e.jsxs(E,{value:u.services.category,onValueChange:y=>w({...u,services:{...u.services,category:y}}),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Category"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All"}),e.jsx(j,{value:"transport",children:"Transport"}),e.jsx(j,{value:"accommodation",children:"Accommodation"}),e.jsx(j,{value:"food",children:"Food"}),e.jsx(j,{value:"entertainment",children:"Entertainment"}),e.jsx(j,{value:"other",children:"Other"})]})]}),e.jsx(o,{onClick:K,children:e.jsx(ha,{className:"w-4 h-4"})})]})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Owner"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Price"}),e.jsx(l,{children:"Rating"}),e.jsx(l,{children:"Featured"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:C?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):(Array.isArray(g)?g:[]).length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No services found"})}):(Array.isArray(g)?g:[]).map(y=>e.jsxs(_,{children:[e.jsx(t,{children:y.id}),e.jsx(t,{className:"font-medium",children:y.name}),e.jsx(t,{children:y.third_party?e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:y.third_party.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y.third_party.email})]}):y.third_party_id?e.jsxs("span",{className:"text-muted-foreground",children:["ID: ",y.third_party_id]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:y.category})}),e.jsxs(t,{children:["$",(parseFloat(y.price)||0).toFixed(2)]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),y.rating?(parseFloat(y.rating)||0).toFixed(1):"N/A"]})}),e.jsx(t,{children:e.jsx(P,{variant:y.featured?"default":"secondary",children:y.featured?"Yes":"No"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("view-service"),D(!0)},children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("edit-service"),D(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>h.fetchServiceItems(y.id),children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>I({open:!0,title:"Delete Service",message:`Are you sure you want to delete "${y.name}"?`,onConfirm:()=>Ae(y.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},y.id))})]})})})]}),e.jsxs(V,{value:"third-parties",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{p(null),A("create-third-party"),D(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Create Third Party"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:T,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(v,{placeholder:"Search third parties...",value:u.thirdParties.search,onChange:y=>w({...u,thirdParties:{...u.thirdParties,search:y.target.value}}),className:"w-64"})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Contact"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"City"}),e.jsx(l,{children:"Subscription"}),e.jsx(l,{children:"Created At"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:C?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):(Array.isArray(x)?x:[]).length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No third parties found"})}):(Array.isArray(x)?x:[]).map(y=>e.jsxs(_,{children:[e.jsx(t,{children:y.id}),e.jsx(t,{children:e.jsx("p",{className:"font-medium",children:y.name})}),e.jsx(t,{children:y.email||y.phone||"-"}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:y.category||"-"})}),e.jsx(t,{children:y.city||"-"}),e.jsx(t,{children:y.subscription_status||"-"}),e.jsx(t,{children:y.created_at?new Date(y.created_at).toLocaleDateString():"-"}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("view-third-party"),D(!0)},children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("edit-third-party"),D(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("create-service-for-tp"),D(!0)},children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>I({open:!0,title:"Delete Third Party",message:"Are you sure?",onConfirm:()=>h.handleDeleteThirdParty(y.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},y.id))})]})})})]}),e.jsxs(V,{value:"service-items",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:d&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{onClick:()=>{p(null),A("create-service-item"),D(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Add Item"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:()=>Q(d),children:e.jsx(J,{className:"w-4 h-4"})})]})}),e.jsxs(E,{value:d?.toString()||"",onValueChange:y=>y&&h.fetchServiceItems(parseInt(y)),children:[e.jsx(z,{className:"w-64",children:e.jsx(M,{placeholder:"Select a service to view items"})}),e.jsx(O,{children:(Array.isArray(g)?g:[]).map(y=>e.jsx(j,{value:String(y.id),children:y.name},y.id))})]})]}),d?e.jsxs(R,{children:[e.jsx(me,{children:e.jsxs(je,{children:["Items for Service #",d]})}),e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Price"}),e.jsx(l,{children:"Image"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:C?e.jsx(_,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):(Array.isArray(c)?c:[]).length===0?e.jsx(_,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:"No items found"})}):(Array.isArray(c)?c:[]).map(y=>e.jsxs(_,{children:[e.jsx(t,{children:y.id}),e.jsx(t,{className:"font-medium",children:y.name}),e.jsx(t,{className:"max-w-xs truncate",children:y.description||"N/A"}),e.jsxs(t,{children:["$",(parseFloat(y.price)||0).toFixed(2)]}),e.jsx(t,{children:y.image?e.jsx("img",{src:y.image,alt:y.name,className:"w-10 h-10 object-cover rounded"}):e.jsx("span",{className:"text-muted-foreground",children:"No image"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{p(y),A("edit-service-item"),D(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>I({open:!0,title:"Delete Item",message:`Delete "${y.name}"?`,onConfirm:()=>Se(y.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},y.id))})]})})]}):e.jsx(R,{children:e.jsxs(L,{className:"py-12 text-center text-muted-foreground",children:[e.jsx(_e,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a service from the dropdown above"})]})})]}),e.jsxs(V,{value:"service-feedbacks",className:"space-y-4",children:[e.jsx(o,{variant:"outline",size:"icon",onClick:ue,children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Service"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Rating"}),e.jsx(l,{children:"Comment"}),e.jsx(l,{children:"Helpful"}),e.jsx(l,{children:"Created At"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:C?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):(Array.isArray(n)?n:[]).length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No feedbacks found"})}):(Array.isArray(n)?n:[]).map(y=>e.jsxs(_,{children:[e.jsx(t,{children:y.id}),e.jsx(t,{children:y.service?.name||y.service_id}),e.jsx(t,{children:y.user?.name||y.user_id}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((De,Fe)=>e.jsx(We,{className:`w-4 h-4 ${Fe<y.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},Fe))})}),e.jsx(t,{className:"max-w-xs truncate",children:y.comment||"N/A"}),e.jsx(t,{children:y.helpful_count||0}),e.jsx(t,{children:new Date(y.created_at).toLocaleDateString()}),e.jsx(t,{children:e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>I({open:!0,title:"Delete Feedback",message:"Are you sure?",onConfirm:()=>Ue(y.id)}),children:e.jsx(se,{className:"w-4 h-4"})})})]},y.id))})]})})})]})]})})}function Xt(){const h=dr(),[g,x]=S.useState("dashboard"),[c,n]=S.useState(!1),[C,u]=S.useState(null),[w,d]=S.useState([]),[p,A]=S.useState([]),[D,I]=S.useState([]),[K,T]=S.useState([]),[Q,ue]=S.useState([]),[Ae,Ue]=S.useState([]),[Se,y]=S.useState([]),[De,Fe]=S.useState([]),[Je,ms]=S.useState([]),[N,pe]=S.useState([]),[Re,xa]=S.useState([]),[_s,ma]=S.useState([]),[Cs,ja]=S.useState([]),[js,ua]=S.useState([]),[Pe,ws]=S.useState([]),[ve,pa]=S.useState([]),[X,he]=S.useState({username:"",phone_number:"",email:"",password:"",password_confirmation:"",first_name:"",last_name:""}),[ge,us]=S.useState(null),[ks,As]=S.useState("overview"),[Ke,Ss]=S.useState(null),[Ds,ps]=S.useState({data:[],statistics:{}}),[Fs,Ps]=S.useState({data:[]}),[Is,va]=S.useState({data:[]}),[re,Ie]=S.useState({broker_id:"",amount:"",reference:"",notes:""}),[Ts,ga]=S.useState("all"),[Te,fa]=S.useState({}),[vs,$s]=S.useState({}),[Le,ya]=S.useState([]),[Ee,Na]=S.useState([]),[Xe,ba]=S.useState([]),[Qe,_a]=S.useState([]),[le,Bs]=S.useState(null),[$,Ca]=S.useState({users:{page:1,per_page:50},cars:{page:1,per_page:50},bookings:{page:1,per_page:50},payments:{page:1,per_page:50},announcements:{page:1,per_page:50},appeals:{page:1,per_page:50},ads:{page:1,per_page:50},featuredCars:{page:1,per_page:50},holidays:{page:1,per_page:50},suggestions:{page:1,per_page:50},notifications:{page:1,per_page:50},otps:{page:1,per_page:50},services:{page:1,per_page:50},thirdParties:{page:1,per_page:50},serviceFeedbacks:{page:1,per_page:50},promoCodes:{page:1,per_page:50}}),[f,ze]=S.useState({users:{role:"all",status:"all"},cars:{status:"all",car_accepted:"all",agent_id:""},bookings:{status:"all"},payments:{type:"all"},announcements:{status:"all"},appeals:{status:"all",priority:"all"},ads:{status:"all"},featuredCars:{status:"all"},holidays:{car_id:"",active:"all"},suggestions:{status:"all"},notifications:{type:"all",is_read:"all"},otps:{phone_number:"",expired:"all"},services:{category:"all",city:"",featured:"all",search:""},thirdParties:{search:""},promoCodes:{broker_id:"all",is_active:"all"}}),[qi,wa]=S.useState(null),[Yi,ka]=S.useState(null),[gs,Gi]=S.useState("month"),[a,B]=S.useState(null),[Ze,F]=S.useState(!1),[b,Z]=S.useState(""),[oe,xe]=S.useState({open:!1,title:"",message:"",onConfirm:null}),Aa=async()=>{try{const{data:s}=await U.get("/admin/reports/summary");u(s.summary)}catch(s){console.error("Error fetching summary:",s),m.error("Failed to load dashboard summary")}},Me=async()=>{n(!0);try{const s={page:$.users.page,per_page:$.users.per_page};f.users.role&&f.users.role!=="all"&&(s.role=f.users.role),f.users.status&&f.users.status!=="all"&&(s.status=f.users.status==="active"||f.users.status==="true");const i=await sa(s);d(i.data.users)}catch{m.error("Failed to fetch users")}finally{n(!1)}},Sa=async s=>{try{const{data:i}=await U.get(`/admin/users/${s}`);return i.user}catch{return m.error("Failed to fetch user details"),null}},es=async()=>{n(!0);try{const s={page:$.cars.page,per_page:$.cars.per_page,with_images:!0};f.cars.status&&f.cars.status!=="all"&&(s.status=f.cars.status),f.cars.car_accepted&&f.cars.car_accepted!=="all"&&(s.car_accepted=f.cars.car_accepted),f.cars.agent_id&&f.cars.agent_id!=="all"&&(s.agent_id=f.cars.agent_id);const i=await Cr(s);A(i.data.cars)}catch{m.error("Failed to fetch cars")}finally{n(!1)}},Da=async s=>{try{const{data:i}=await U.get(`/admin/cars/${s}`);return i.car}catch{return m.error("Failed to fetch car details"),null}},ss=async()=>{n(!0);try{const s=new URLSearchParams;f.bookings.status&&f.bookings.status!=="all"&&s.append("status",f.bookings.status),s.append("page",$.bookings.page),s.append("per_page",$.bookings.per_page);const{data:i}=await U.get(`/admin/bookings?${s}`);I(i.bookings)}catch{m.error("Failed to fetch bookings")}finally{n(!1)}},Fa=async s=>{try{const{data:i}=await U.get(`/admin/bookings/${s}`);return i.booking}catch{return m.error("Failed to fetch booking details"),null}},as=async()=>{n(!0);try{const s={page:$.payments.page,per_page:$.payments.per_page};f.payments.type&&f.payments.type!=="all"&&(s.type=f.payments.type);const i=await wr(s);T(i.data.payments)}catch{m.error("Failed to fetch payments")}finally{n(!1)}},Oe=async()=>{n(!0);try{const s=new URLSearchParams;f.announcements.status&&f.announcements.status!=="all"&&s.append("status",f.announcements.status),s.append("page",$.announcements.page),s.append("per_page",$.announcements.per_page);const{data:i}=await U.get(`/admin/announcements?${s}`);ue(i.announcements)}catch{m.error("Failed to fetch announcements")}finally{n(!1)}},fs=async()=>{n(!0);try{const s=new URLSearchParams;f.appeals.status&&f.appeals.status!=="all"&&s.append("status",f.appeals.status),f.appeals.priority&&f.appeals.priority!=="all"&&s.append("priority",f.appeals.priority),s.append("page",$.appeals.page),s.append("per_page",$.appeals.per_page);const{data:i}=await U.get(`/admin/appeals?${s}`);Ue(i.appeals)}catch{m.error("Failed to fetch appeals")}finally{n(!1)}},Ve=async()=>{n(!0);try{const s=new URLSearchParams;f.ads.status&&f.ads.status!=="all"&&s.append("status",f.ads.status),s.append("page",$.ads.page),s.append("per_page",$.ads.per_page);const{data:i}=await U.get(`/admin/ads?${s}`);y(i.ads)}catch{m.error("Failed to fetch ads")}finally{n(!1)}},rs=async()=>{n(!0);try{const s=new URLSearchParams;f.featuredCars.status&&f.featuredCars.status!=="all"&&s.append("status",f.featuredCars.status),s.append("page",$.featuredCars.page),s.append("per_page",$.featuredCars.per_page);const{data:i}=await U.get(`/admin/featured-cars?${s}`);Fe(i.featured_cars)}catch{m.error("Failed to fetch featured cars")}finally{n(!1)}},He=async()=>{n(!0);try{const s=new URLSearchParams;f.holidays.car_id&&f.holidays.car_id!=="all"&&s.append("car_id",f.holidays.car_id),f.holidays.active&&f.holidays.active!=="all"&&s.append("active",f.holidays.active),s.append("page",$.holidays.page),s.append("per_page",$.holidays.per_page);const{data:i}=await U.get(`/admin/holidays?${s}`);ms(i.holidays)}catch{m.error("Failed to fetch holidays")}finally{n(!1)}},Pa=async s=>{try{await U.post("/admin/holidays",s),m.success("Holiday created successfully"),He(),F(!1)}catch(i){m.error(i.response?.data?.message||"Failed to create holiday")}},Ia=async(s,i)=>{try{await U.put(`/admin/holidays/${s}`,i),m.success("Holiday updated successfully"),He(),F(!1)}catch{m.error("Failed to update holiday")}},Ta=async s=>{try{await U.delete(`/admin/holidays/${s}`),m.success("Holiday deleted successfully"),He()}catch{m.error("Failed to delete holiday")}},is=async()=>{n(!0);try{const s=new URLSearchParams;f.suggestions.status&&f.suggestions.status!=="all"&&s.append("status",f.suggestions.status),s.append("page",$.suggestions.page),s.append("per_page",$.suggestions.per_page);const{data:i}=await U.get(`/admin/suggestions?${s}`);pe(i.suggestions)}catch{m.error("Failed to fetch suggestions")}finally{n(!1)}},Us=async()=>{n(!0);try{const s=new URLSearchParams;f.notifications.type&&f.notifications.type!=="all"&&s.append("type",f.notifications.type),f.notifications.is_read&&f.notifications.is_read!=="all"&&s.append("is_read",f.notifications.is_read),s.append("page",$.notifications.page),s.append("per_page",$.notifications.per_page);const{data:i}=await U.get(`/admin/notifications?${s}`);xa(i.notifications)}catch{m.error("Failed to fetch notifications")}finally{n(!1)}},Rs=async()=>{n(!0);try{const s={};f.otps.phone_number&&(s.phone_number=f.otps.phone_number),f.otps.expired&&f.otps.expired!=="all"&&(s.expired=f.otps.expired),s.per_page=$.otps.per_page,s.page=$.otps.page;const i=await kr(s);ma(i.data.otps)}catch(s){m.error(s.response?.data?.message||"Failed to fetch OTPs")}finally{n(!1)}},fe=async()=>{n(!0);try{const s={per_page:$.services.per_page,page:$.services.page};f.services.category&&f.services.category!=="all"&&(s.category=f.services.category),f.services.city&&(s.city=f.services.city),f.services.featured&&f.services.featured!=="all"&&(s.featured=f.services.featured==="true"),f.services.search&&(s.search=f.services.search);const i=await Ar(s);ya(i.data.services?.data||i.data.services||[])}catch(s){m.error(s.response?.data?.message||"Failed to fetch services")}finally{n(!1)}},ys=async s=>{try{const{third_party_id:i,...k}=s;if(!i){m.error("Please select a third party owner for this service");return}const W={category:k.category,name:k.name,description:k.description||void 0,tagline:k.tagline||void 0,city:k.city||void 0,contact_phone:k.contact_phone||k.phone||void 0,contact_email:k.contact_email||void 0,min_price:k.price??void 0,max_price:k.price??void 0,currency:"USD"};console.log("Creating service for third party",i,"with payload:",W),await Sr(i,W),m.success("Service created successfully"),fe(),F(!1)}catch(i){console.error("Create service failed:",{status:i.response?.status,data:i.response?.data});const k=i.response?.data?.message||(typeof i.response?.data=="string"?i.response.data:null);m.error(k||"Failed to create service")}},Ls=async(s,i)=>{try{await Dr(s,i),m.success("Service updated successfully"),fe(),F(!1)}catch(k){m.error(k.response?.data?.message||"Failed to update service")}},Es=async s=>{try{await Fr(s),m.success("Service deleted successfully"),fe()}catch(i){m.error(i.response?.data?.message||"Failed to delete service")}},$e=async()=>{n(!0);try{const s={per_page:$.thirdParties.per_page,page:$.thirdParties.page},i=await Pr(s);Na(i.data.third_parties?.data||i.data.third_parties||[])}catch(s){m.error(s.response?.data?.message||"Failed to fetch third parties")}finally{n(!1)}},zs=async s=>{const i={business_name:s.name,username:s.username,email:s.email,password:s.password,phone_number:s.phone,subscription:s.subscription||void 0,permissions:s.permissions||[]};console.log("Creating third party with payload:",i);try{await Ir(i),m.success("Third party created successfully"),$e(),F(!1)}catch(k){console.error("Create third party failed:",{payload:i,status:k.response?.status,data:k.response?.data});const W=k.response?.data?.message||(typeof k.response?.data=="string"?k.response.data:null);m.error(W||"Failed to create third party")}},Ms=async(s,i)=>{try{const k={business_name:i.name,username:i.username,email:i.email,phone_number:i.phone,subscription:i.subscription||void 0,permissions:i.permissions||[]};i.password&&(k.password=i.password),await Tr(s,k),m.success("Third party updated successfully"),$e(),F(!1)}catch(k){m.error(k.response?.data?.message||"Failed to update third party")}},Os=async s=>{try{await $r(s),m.success("Third party deleted successfully"),$e()}catch(i){m.error(i.response?.data?.message||"Failed to delete third party")}},ye=async s=>{if(s){n(!0);try{const i=await Br(s);ba(i.data.items||[]),Bs(s)}catch(i){m.error(i.response?.data?.message||"Failed to fetch service items")}finally{n(!1)}}},Vs=async(s,i)=>{try{await Ur(s,i),m.success("Service item created successfully"),ye(s),F(!1)}catch(k){m.error(k.response?.data?.message||"Failed to create service item")}},Hs=async(s,i)=>{try{await Rr(s,i),m.success("Service item updated successfully"),le&&ye(le),F(!1)}catch(k){m.error(k.response?.data?.message||"Failed to update service item")}},qs=async s=>{try{await Lr(s),m.success("Service item deleted successfully"),le&&ye(le)}catch(i){m.error(i.response?.data?.message||"Failed to delete service item")}},Ns=async()=>{n(!0);try{const s={per_page:$.serviceFeedbacks.per_page,page:$.serviceFeedbacks.page},i=await Er(s);_a(i.data.feedbacks?.data||i.data.feedbacks||[])}catch(s){m.error(s.response?.data?.message||"Failed to fetch feedbacks")}finally{n(!1)}},Ys=async s=>{try{await zr(s),m.success("Feedback deleted successfully"),Ns()}catch(i){m.error(i.response?.data?.message||"Failed to delete feedback")}},$a=async(s="month")=>{try{const{data:i}=await U.get(`/admin/reports/statistics?period=${s}`);wa(i.statistics)}catch{m.error("Failed to fetch statistics")}},Ba=async(s="month")=>{try{const{data:i}=await U.get(`/admin/reports/chart-data?period=${s}`);ka(i)}catch{m.error("Failed to fetch chart data")}},Gs=async(s,i)=>{try{await U.put(`/admin/users/${s}`,i),m.success("User updated successfully"),Me(),F(!1)}catch(k){m.error(k.response?.data?.message||"Failed to update user")}},Ua=async(s,i=!1)=>{try{await U.delete(`/admin/users/${s}${i?"/force":""}`),m.success(i?"User permanently deleted":"User deactivated"),Me()}catch{m.error("Failed to delete user")}},Ws=async(s,i)=>{try{const k={...i};["main_image","front_image","back_image","left_image","right_image"].forEach(te=>{vs[s]&&vs[s][te]&&(k[te]=vs[s][te])}),await Mr(s,k),m.success("Car updated successfully"),$s(te=>{const de={...te};return delete de[s],de}),es(),F(!1)}catch{m.error("Failed to update car")}},qe=(s,i,k)=>{k&&$s(W=>({...W,[s]:{...W[s],[i]:k}}))},Ra=async s=>{try{await U.delete(`/admin/cars/${s}`),m.success("Car deleted successfully"),es()}catch{m.error("Failed to delete car")}},Js=async(s,i)=>{try{await U.put(`/admin/bookings/${s}`,i),m.success("Booking updated successfully"),ss(),F(!1)}catch{m.error("Failed to update booking")}},La=async s=>{try{await U.post(`/admin/bookings/${s}/force-complete`),m.success("Booking force completed"),ss()}catch{m.error("Failed to force complete booking")}},Ea=async(s,i="")=>{try{await U.post(`/admin/refunds/${s}`,{description:i}),m.success("Refund processed successfully"),as()}catch(k){m.error(k.response?.data?.message||"Failed to process refund")}},za=async s=>{try{const i={title:s.title,message:s.message,priority:s.priority||"medium",target_audience:s.target_audience||[],status:s.status||"draft"};s.scheduled_at&&(i.scheduled_at=s.scheduled_at),s.expires_at&&(i.expires_at=s.expires_at),s.categories&&s.categories.length>0&&(i.categories=s.categories),s.media&&s.media.length>0&&(i.media=s.media),await U.post("/admin/announcements",i),m.success("Announcement created successfully"),Oe(),F(!1)}catch(i){m.error(i.response?.data?.message||"Failed to create announcement")}},Ma=async(s,i)=>{try{await U.put(`/admin/announcements/${s}`,i),m.success("Announcement updated successfully"),Oe(),F(!1)}catch{m.error("Failed to update announcement")}},Oa=async s=>{try{await U.delete(`/admin/announcements/${s}`),m.success("Announcement deleted successfully"),Oe()}catch{m.error("Failed to delete announcement")}},Va=async(s,i)=>{try{await U.put(`/admin/appeals/${s}`,i),m.success("Appeal updated successfully"),fs(),F(!1)}catch{m.error("Failed to update appeal")}},Ha=async(s,i)=>{try{await U.put(`/admin/ads/${s}`,i),m.success("Ad updated successfully"),Ve(),F(!1)}catch{m.error("Failed to update ad")}},qa=async s=>{try{await Or(s),m.success("Ad created successfully"),Ve(),F(!1)}catch(i){m.error(i.response?.data?.message||"Failed to create ad")}},Ya=async s=>{try{await U.delete(`/admin/ads/${s}`),m.success("Ad deleted successfully"),Ve()}catch{m.error("Failed to delete ad")}},Ga=async s=>{try{await Vr(s),m.success("Payment/Invoice issued successfully"),as(),F(!1)}catch(i){m.error(i.response?.data?.message||"Failed to issue payment")}},Wa=async s=>{try{await Hr(s),m.success("Featured car created successfully"),rs(),F(!1)}catch(i){m.error(i.response?.data?.message||"Failed to create featured car")}},Ja=async s=>{try{await U.delete(`/admin/featured-cars/${s}`),m.success("Featured car removed successfully"),rs()}catch{m.error("Failed to remove featured car")}},Ka=async(s,i)=>{try{await U.put(`/admin/suggestions/${s}`,i),m.success("Suggestion updated successfully"),is(),F(!1)}catch{m.error("Failed to update suggestion")}},Xa=async s=>{try{await U.delete(`/admin/suggestions/${s}`),m.success("Suggestion deleted successfully"),is()}catch{m.error("Failed to delete suggestion")}},Qa=async s=>{try{await U.post("/admin/notifications/send-to-all",s),m.success("Notification sent to all users successfully"),F(!1)}catch{m.error("Failed to send notification")}},Ks=async s=>{try{const i=await qr(s),k=await Yr(s);return fa(W=>({...W,[s]:{...i.data,app_fees_percentage:k.data.fee_percentage||0}})),i.data}catch(i){return m.error(i.response?.data?.message||"Failed to fetch agent fee data"),null}},Za=async(s,i)=>{try{await Gr(s,{app_fees:i}),m.success("Agent fee percentage updated successfully"),await Ks(s),Me()}catch(k){m.error(k.response?.data?.message||"Failed to update agent fee percentage")}},er=(s,i,k)=>{xe({open:!0,title:s,message:i,onConfirm:k})},ts=async()=>{try{const s=await sa({role:"broker",per_page:200}),i=s.data?.users?.data??s.data?.users??s.data?.data;pa(Array.isArray(i)?i:[])}catch(s){console.error("Failed to fetch brokers:",s)}},ls=async()=>{n(!0);try{const s={page:$.promoCodes.page,per_page:$.promoCodes.per_page};f.promoCodes.broker_id&&f.promoCodes.broker_id!=="all"&&(s.broker_id=f.promoCodes.broker_id),f.promoCodes.is_active!=="all"&&(s.is_active=f.promoCodes.is_active);const i=await Wr(s);ja(i.data?.promo_codes||i.data?.promoCodes||i.data||[])}catch(s){console.error("Failed to fetch promo codes:",s),m.error("Failed to load promo codes")}finally{n(!1)}},Xs=async(s,i)=>{n(!0);try{i?(await Jr(i.id,s),m.success("Promo code updated successfully")):(await Kr(s),m.success("Promo code created successfully")),F(!1),B(null),await ls()}catch(k){console.error("Failed to save promo code:",k);const W=k.response?.data?.message||"Failed to save promo code";m.error(W)}finally{n(!1)}},sr=async s=>{n(!0);try{await Xr(s),m.success("Promo code deleted successfully"),await ls()}catch(i){console.error("Failed to delete promo code:",i),m.error("Failed to delete promo code")}finally{n(!1)}},ar=async s=>{try{const i=await Qr(s,{per_page:50});ua(i.data?.users||[])}catch(i){console.error("Failed to fetch promo code users:",i),m.error("Failed to load users for this promo code")}},rr=async s=>{try{const i=await aa(s,{per_page:50});ws(i.data?.referrals||[])}catch(i){console.error("Failed to fetch broker referrals:",i),m.error("Failed to load broker referrals")}},Qs=async()=>{const{username:s,phone_number:i,email:k,password:W,password_confirmation:te,first_name:de,last_name:cs}=X;if(!s?.trim()){m.error("Username is required");return}if(!i?.trim()){m.error("Phone number is required");return}if(!de?.trim()){m.error("First name is required");return}if(!cs?.trim()){m.error("Last name is required");return}if(!W){m.error("Password is required");return}if(W.length<6){m.error("Password must be at least 6 characters");return}if(W!==te){m.error("Password and confirmation do not match");return}n(!0);try{await Zr({username:s.trim(),phone_number:i.trim().replace(/^\+?/,""),email:k?.trim()||void 0,password:W,password_confirmation:te||W,first_name:de.trim(),last_name:cs.trim()}),m.success("Broker created successfully"),F(!1),he({username:"",phone_number:"",email:"",password:"",password_confirmation:"",first_name:"",last_name:""}),await ts()}catch(Ne){console.error("Failed to create broker:",Ne);const Ge=Ne.response?.data,ds=Ge?.message||(Ge?.errors?Object.values(Ge.errors).flat().join(" "):null)||"Failed to create broker";m.error(ds)}finally{n(!1)}};S.useEffect(()=>{g==="dashboard"?(Aa(),$a(gs),Ba(gs)):g==="users"?Me():g==="cars"?es():g==="bookings"?ss():g==="payments"?as():g==="announcements"?Oe():g==="appeals"?fs():g==="ads"?Ve():g==="featured-cars"?rs():g==="holidays"?He():g==="suggestions"?is():g==="notifications"?Us():g==="otps"?Rs():g==="services"?(fe(),$e()):g==="promo-codes"?(ls(),ve.length||ts()):g==="brokers"&&(ts(),Ye())},[g,gs]);const Zs=async s=>{if(us(s),As("overview"),s?.id)try{const[i,k,W,te]=await Promise.all([ei(s.id).catch(()=>({data:null})),na(s.id).catch(()=>({data:{data:[],statistics:{}}})),si(s.id).catch(()=>({data:{payouts:{data:[]},summary:{}}})),aa(s.id).catch(()=>({data:{referrals:[]}}))]);Ss(i.data);const de=k.data?.commissions?.data??k.data?.commissions,cs=Array.isArray(de)?de:[];ps({data:cs,statistics:k.data?.statistics||{}});const Ne=W.data?.payouts||W.data,Ge=Array.isArray(Ne)?Ne:Array.isArray(Ne?.data)?Ne.data:[];Ps({data:Ge});const ds=te.data?.referrals??te.data?.data;ws(Array.isArray(ds)?ds:[])}catch(i){console.error("Failed to load broker detail:",i)}},ir=()=>{us(null),Ss(null),ps({data:[],statistics:{}}),Ps({data:[]})},ns=async()=>{ge?.id&&(await Zs(ge),await Ye())},Ye=async()=>{try{const s=await _r({per_page:50}),i=s.data?.commissions?.data??s.data?.commissions;va({data:Array.isArray(i)?i:[]})}catch(s){console.error("Failed to fetch broker commissions:",s)}},ea=async()=>{const s=re.broker_id?Number(re.broker_id):ge?.id,i=parseFloat(re.amount);if(!s||!i||i<.01){m.error("Select a broker and enter amount (min 0.01)");return}n(!0);try{await ai({broker_id:s,amount:i,reference:re.reference?.trim()||void 0,notes:re.notes?.trim()||void 0}),m.success("Broker payout created successfully"),F(!1),Ie({broker_id:"",amount:"",reference:"",notes:""}),await ns(),await Ye()}catch(k){const W=k.response?.data,te=W?.message||(W?.errors?Object.values(W.errors).flat().join(" "):null)||"Failed to create payout",de=W?.pending_balance;m.error(de!=null?`${te} (Max: $${Number(de).toFixed(2)})`:te)}finally{n(!1)}},tr=async s=>{try{await ri(s),m.success("Commission cancelled"),await ns(),await Ye()}catch(i){m.error(i.response?.data?.message||"Failed to cancel commission")}},lr=async s=>{try{await ii(s),m.success("Referral deleted"),await ns()}catch(i){m.error(i.response?.data?.message||"Failed to delete referral")}},nr=S.useMemo(()=>({COLORS:be,loading:c,summary:C,users:w,cars:p,bookings:D,payments:K,announcements:Q,appeals:Ae,ads:Se,featuredCars:De,holidays:Je,suggestions:N,notifications:Re,otps:_s,promoCodes:Cs,promoCodeUsers:js,brokerReferrals:Pe,brokers:ve,brokerForm:X,setBrokerForm:he,selectedBroker:ge,setSelectedBroker:us,brokerDetailTab:ks,setBrokerDetailTab:As,brokerBalance:Ke,brokerCommissions:Ds,setBrokerCommissions:ps,brokerPayouts:Fs,brokerCommissionsList:Is,payoutForm:re,setPayoutForm:Ie,commissionStatusFilter:Ts,setCommissionStatusFilter:ga,filters:f,setFilters:ze,pagination:$,setPagination:Ca,selectedItem:a,setSelectedItem:B,modalOpen:Ze,setModalOpen:F,modalType:b,setModalType:Z,confirmDialog:oe,setConfirmDialog:xe,navigate:h,fetchUsers:Me,fetchUserDetails:Sa,fetchCars:es,fetchCarDetails:Da,fetchBookings:ss,fetchBookingDetails:Fa,fetchPayments:as,fetchAnnouncements:Oe,fetchAppeals:fs,fetchAds:Ve,fetchFeaturedCars:rs,fetchHolidays:He,fetchSuggestions:is,fetchNotifications:Us,fetchOtps:Rs,updateUser:Gs,deleteUser:Ua,updateCar:Ws,deleteCar:Ra,updateBooking:Js,forceCompleteBooking:La,processRefund:Ea,deleteAnnouncement:Oa,deleteAd:Ya,deleteFeaturedCar:Ja,deleteHoliday:Ta,deleteSuggestion:Xa,showConfirmDialog:er,fetchPromoCodes:ls,fetchPromoCodeUsers:ar,fetchBrokerReferrals:rr,fetchBrokers:ts,handleCreateOrUpdatePromoCode:Xs,handleDeletePromoCode:sr,handleCreateBroker:Qs,openBrokerDetail:Zs,closeBrokerDetail:ir,refreshBrokerDetail:ns,fetchBrokerCommissionsList:Ye,handleCreateBrokerPayout:ea,handleCancelCommission:tr,handleDeleteBrokerReferral:lr,services:Le,thirdParties:Ee,serviceItems:Xe,serviceFeedbacks:Qe,selectedServiceId:le,setSelectedServiceId:Bs,fetchServices:fe,fetchThirdParties:$e,fetchServiceItems:ye,fetchServiceFeedbacks:Ns,handleCreateService:ys,handleUpdateService:Ls,handleDeleteService:Es,handleCreateThirdParty:zs,handleUpdateThirdParty:Ms,handleDeleteThirdParty:Os,handleCreateServiceItem:Vs,handleUpdateServiceItem:Hs,handleDeleteServiceItem:qs,handleDeleteFeedback:Ys}),[c,C,w,p,D,K,Q,Ae,Se,De,Je,N,Re,_s,Cs,js,Pe,ve,X,ge,ks,Ke,Ds,Fs,Is,re,Ts,f,$,a,Ze,b,oe,Le,Ee,Xe,Qe,le]);return e.jsx(ni.Provider,{value:nr,children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-900",children:[e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-white/80 dark:bg-gray-900/80 border-b border-gray-200/50 dark:border-gray-800/50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>h("/"),className:"h-9 w-9","aria-label":"Go to home page",children:e.jsx(hi,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(to right, ${be.darkBlue}, ${be.teal}, ${be.limeGreen})`},children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your platform"})]})]}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>{localStorage.clear(),h("/auth")},className:"h-9 w-9","aria-label":"Logout",children:e.jsx(or,{className:"w-5 h-5"})})]})})}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 py-6 max-w-7xl",children:e.jsxs(os,{value:g,onValueChange:x,className:"w-full",children:[e.jsxs(hs,{className:"grid w-full grid-cols-8 lg:grid-cols-16 mb-6 h-auto p-1 bg-gray-100 dark:bg-gray-800",children:[e.jsxs(H,{value:"dashboard",className:"text-xs",children:[e.jsx(ca,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),e.jsxs(H,{value:"users",className:"text-xs",children:[e.jsx(Ce,{className:"w-4 h-4 mr-1"}),"Users"]}),e.jsxs(H,{value:"cars",className:"text-xs",children:[e.jsx(la,{className:"w-4 h-4 mr-1"}),"Cars"]}),e.jsxs(H,{value:"bookings",className:"text-xs",children:[e.jsx(ta,{className:"w-4 h-4 mr-1"}),"Bookings"]}),e.jsxs(H,{value:"payments",className:"text-xs",children:[e.jsx(xs,{className:"w-4 h-4 mr-1"}),"Payments"]}),e.jsxs(H,{value:"promo-codes",className:"text-xs",children:[e.jsx(ia,{className:"w-4 h-4 mr-1"}),"Promo Codes"]}),e.jsxs(H,{value:"brokers",className:"text-xs",children:[e.jsx(Ce,{className:"w-4 h-4 mr-1"}),"Brokers"]}),e.jsxs(H,{value:"announcements",className:"text-xs",children:[e.jsx(xi,{className:"w-4 h-4 mr-1"}),"Announcements"]}),e.jsxs(H,{value:"appeals",className:"text-xs",children:[e.jsx(mi,{className:"w-4 h-4 mr-1"}),"Appeals"]}),e.jsxs(H,{value:"ads",className:"text-xs",children:[e.jsx(ji,{className:"w-4 h-4 mr-1"}),"Ads"]}),e.jsxs(H,{value:"featured-cars",className:"text-xs",children:[e.jsx(We,{className:"w-4 h-4 mr-1"}),"Featured"]}),e.jsxs(H,{value:"holidays",className:"text-xs",children:[e.jsx(ui,{className:"w-4 h-4 mr-1"}),"Holidays"]}),e.jsxs(H,{value:"suggestions",className:"text-xs",children:[e.jsx(yi,{className:"w-4 h-4 mr-1"}),"Suggestions"]}),e.jsxs(H,{value:"notifications",className:"text-xs",children:[e.jsx(pi,{className:"w-4 h-4 mr-1"}),"Notifications"]}),e.jsxs(H,{value:"otps",className:"text-xs",children:[e.jsx(vi,{className:"w-4 h-4 mr-1"}),"OTPs"]}),e.jsxs(H,{value:"services",className:"text-xs",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Services"]})]}),e.jsx(V,{value:"dashboard",className:"space-y-6",children:e.jsx(bi,{})}),e.jsx(V,{value:"users",className:"space-y-4",children:e.jsx(_i,{})}),e.jsx(V,{value:"cars",className:"space-y-4",children:e.jsx(Ci,{})}),e.jsx(V,{value:"bookings",className:"space-y-4",children:e.jsx(wi,{})}),e.jsx(V,{value:"payments",className:"space-y-4",children:e.jsx(ki,{})}),e.jsx(V,{value:"announcements",className:"space-y-4",children:e.jsx(Ai,{})}),e.jsx(V,{value:"appeals",className:"space-y-4",children:e.jsx(Si,{})}),e.jsx(V,{value:"ads",className:"space-y-4",children:e.jsx(Di,{})}),e.jsx(V,{value:"promo-codes",className:"space-y-4",children:e.jsx(Fi,{})}),e.jsx(V,{value:"brokers",className:"space-y-4",children:e.jsx(Pi,{})}),e.jsx(V,{value:"featured-cars",className:"space-y-4",children:e.jsx(Ii,{})}),e.jsx(V,{value:"holidays",className:"space-y-4",children:e.jsx(Ti,{})}),e.jsx(V,{value:"suggestions",className:"space-y-4",children:e.jsx($i,{})}),e.jsx(V,{value:"notifications",className:"space-y-4",children:e.jsx(Bi,{})}),e.jsx(V,{value:"otps",className:"space-y-4",children:e.jsx(Ui,{})}),e.jsx(V,{value:"services",className:"space-y-6",children:e.jsx(Ri,{})}),e.jsx(V,{value:"services-legacy",style:{display:"none"},children:e.jsxs(os,{defaultValue:"services-list",className:"w-full",children:[e.jsxs(hs,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(H,{value:"services-list",className:"text-xs",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Services"]}),e.jsxs(H,{value:"third-parties",className:"text-xs",children:[e.jsx(da,{className:"w-4 h-4 mr-1"}),"Third Parties"]}),e.jsxs(H,{value:"service-items",className:"text-xs",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),"Service Items"]}),e.jsxs(H,{value:"service-feedbacks",className:"text-xs",children:[e.jsx(oa,{className:"w-4 h-4 mr-1"}),"Feedbacks"]})]}),e.jsxs(V,{value:"services-list",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{B(null),Z("create-service"),F(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Create Service"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:fe,"aria-label":"Refresh services",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{placeholder:"Search services...",value:f.services.search,onChange:s=>ze({...f,services:{...f.services,search:s.target.value}}),className:"w-48"}),e.jsxs(E,{value:f.services.category,onValueChange:s=>ze({...f,services:{...f.services,category:s}}),children:[e.jsx(z,{className:"w-40",children:e.jsx(M,{placeholder:"Category"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All Categories"}),e.jsx(j,{value:"transport",children:"Transport"}),e.jsx(j,{value:"accommodation",children:"Accommodation"}),e.jsx(j,{value:"food",children:"Food & Dining"}),e.jsx(j,{value:"entertainment",children:"Entertainment"}),e.jsx(j,{value:"other",children:"Other"})]})]}),e.jsxs(E,{value:f.services.featured,onValueChange:s=>ze({...f,services:{...f.services,featured:s}}),children:[e.jsx(z,{className:"w-32",children:e.jsx(M,{placeholder:"Featured"})}),e.jsxs(O,{children:[e.jsx(j,{value:"all",children:"All"}),e.jsx(j,{value:"true",children:"Featured"}),e.jsx(j,{value:"false",children:"Not Featured"})]})]}),e.jsx(o,{onClick:fe,children:e.jsx(ha,{className:"w-4 h-4"})})]})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Owner"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Price"}),e.jsx(l,{children:"Rating"}),e.jsx(l,{children:"Featured"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:c?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):Le.length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No services found"})}):Le.map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{className:"font-medium",children:s.name}),e.jsx(t,{children:s.third_party?e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:s.third_party.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.third_party.email})]}):s.third_party_id?e.jsxs("span",{className:"text-muted-foreground",children:["ID: ",s.third_party_id]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:s.category})}),e.jsxs(t,{children:["$",(parseFloat(s.price)||0).toFixed(2)]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),s.rating?(parseFloat(s.rating)||0).toFixed(1):"N/A"]})}),e.jsx(t,{children:e.jsx(P,{variant:s.featured?"default":"secondary",children:s.featured?"Yes":"No"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{B(s),Z("view-service"),F(!0)},children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{B(s),Z("edit-service"),F(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>ye(s.id),children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>xe({open:!0,title:"Delete Service",message:`Are you sure you want to delete "${s.name}"?`,onConfirm:()=>Es(s.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]}),e.jsxs(V,{value:"third-parties",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:()=>{B(null),Z("create-third-party"),F(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Create Third Party"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:$e,"aria-label":"Refresh third parties",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx(v,{placeholder:"Search third parties...",value:f.thirdParties.search,onChange:s=>ze({...f,thirdParties:{...f.thirdParties,search:s.target.value}}),className:"w-64"})]}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Contact"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"City"}),e.jsx(l,{children:"Subscription"}),e.jsx(l,{children:"Created At"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:c?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):Ee.length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No third parties found"})}):Ee.map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:s.description})]})}),e.jsx(t,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:s.email}),s.phone&&e.jsx("p",{className:"text-muted-foreground",children:s.phone})]})}),e.jsx(t,{children:e.jsx(P,{variant:"outline",children:s.category||"N/A"})}),e.jsx(t,{children:s.city||"N/A"}),e.jsx(t,{children:e.jsx(P,{variant:s.subscription==="premium"||s.subscription==="enterprise"?"default":"secondary",children:s.subscription||"Free"})}),e.jsx(t,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",title:"View Details",onClick:()=>{B(s),Z("view-third-party"),F(!0)},children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",title:"Edit",onClick:()=>{B(s),Z("edit-third-party"),F(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",title:"Add Service for this Third Party",onClick:()=>{B({third_party_id:s.id,third_party_name:s.name}),Z("create-service-for-tp"),F(!0)},children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",title:"Delete",onClick:()=>xe({open:!0,title:"Delete Third Party",message:`Are you sure you want to delete "${s.name}"?`,onConfirm:()=>Os(s.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]}),e.jsxs(V,{value:"service-items",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:le&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{onClick:()=>{B(null),Z("create-service-item"),F(!0)},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Add Item"]}),e.jsx(o,{variant:"outline",size:"icon",onClick:()=>ye(le),"aria-label":"Refresh service items",children:e.jsx(J,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(E,{value:le?.toString()||"",onValueChange:s=>{s&&ye(parseInt(s))},children:[e.jsx(z,{className:"w-64",children:e.jsx(M,{placeholder:"Select a service to view items"})}),e.jsx(O,{children:Le.map(s=>e.jsx(j,{value:s.id.toString(),children:s.name},s.id))})]})})]}),le?e.jsxs(R,{children:[e.jsx(me,{children:e.jsxs(je,{className:"text-lg",children:["Items for Service #",le]})}),e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Price"}),e.jsx(l,{children:"Image"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:c?e.jsx(_,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):Xe.length===0?e.jsx(_,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:"No items found for this service"})}):Xe.map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{className:"font-medium",children:s.name}),e.jsx(t,{className:"max-w-xs truncate",children:s.description||"N/A"}),e.jsxs(t,{children:["$",(parseFloat(s.price)||0).toFixed(2)]}),e.jsx(t,{children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-10 h-10 object-cover rounded"}):e.jsx("span",{className:"text-muted-foreground",children:"No image"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>{B(s),Z("edit-service-item"),F(!0)},children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>xe({open:!0,title:"Delete Item",message:`Are you sure you want to delete "${s.name}"?`,onConfirm:()=>qs(s.id)}),children:e.jsx(se,{className:"w-4 h-4"})})]})})]},s.id))})]})})]}):e.jsx(R,{children:e.jsxs(L,{className:"py-12 text-center text-muted-foreground",children:[e.jsx(_e,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a service from the dropdown above to view its items"}),e.jsxs("p",{className:"text-sm mt-2",children:["Or click the ",e.jsx(_e,{className:"w-4 h-4 inline"})," icon on a service in the Services tab"]})]})})]}),e.jsxs(V,{value:"service-feedbacks",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(o,{variant:"outline",size:"icon",onClick:Ns,"aria-label":"Refresh service feedbacks",children:e.jsx(J,{className:"w-4 h-4"})})}),e.jsx(R,{children:e.jsx(L,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Service"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Rating"}),e.jsx(l,{children:"Comment"}),e.jsx(l,{children:"Helpful"}),e.jsx(l,{children:"Created At"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(G,{children:c?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):Qe.length===0?e.jsx(_,{children:e.jsx(t,{colSpan:8,className:"text-center py-8",children:"No feedbacks found"})}):Qe.map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:s.service?.name||s.service_id}),e.jsx(t,{children:s.user?.name||s.user_id}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((i,k)=>e.jsx(We,{className:`w-4 h-4 ${k<s.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},k))})}),e.jsx(t,{className:"max-w-xs truncate",children:s.comment||"N/A"}),e.jsx(t,{children:s.helpful_count||0}),e.jsx(t,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(t,{children:e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>xe({open:!0,title:"Delete Feedback",message:"Are you sure you want to delete this feedback?",onConfirm:()=>Ys(s.id)}),children:e.jsx(se,{className:"w-4 h-4"})})})]},s.id))})]})})})]})]})})]})}),e.jsx(ur,{open:oe.open,onOpenChange:s=>xe({...oe,open:s}),children:e.jsxs(pr,{children:[e.jsxs(vr,{children:[e.jsx(gr,{children:oe.title}),e.jsx(fr,{children:oe.message})]}),e.jsxs(yr,{children:[e.jsx(Nr,{onClick:()=>xe({...oe,open:!1}),children:"Cancel"}),e.jsx(br,{onClick:()=>{oe.onConfirm&&oe.onConfirm(),xe({...oe,open:!1})},children:"Confirm"})]})]})}),e.jsx(gi,{children:Ze&&e.jsx(hr,{open:Ze,onOpenChange:F,children:e.jsxs(xr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(mr,{children:e.jsxs(jr,{children:[b==="view-user"&&"User Details",b==="edit-user"&&"Edit User",b==="view-car"&&"Car Details",b==="edit-car"&&"Edit Car",b==="view-booking"&&"Booking Details",b==="edit-booking"&&"Edit Booking",b==="create-announcement"&&"Create Announcement",b==="edit-announcement"&&"Edit Announcement",b==="edit-appeal"&&"Edit Appeal",b==="edit-ad"&&"Edit Ad",b==="edit-suggestion"&&"Edit Suggestion",b==="send-notification"&&"Send Notification to All Users",b==="create-holiday"&&"Create Holiday",b==="edit-holiday"&&"Edit Holiday",b==="create-ad"&&"Create Ad",b==="create-payment"&&"Issue Payment/Invoice",b==="create-featured-car"&&"Create Featured Car",b==="create-service"&&"Create Service",b==="view-service"&&"Service Details",b==="edit-service"&&"Edit Service",b==="create-third-party"&&"Create Third Party",b==="view-third-party"&&"Third Party Details",b==="edit-third-party"&&"Edit Third Party",b==="create-service-for-tp"&&`Add Service for ${a?.third_party_name||"Third Party"}`,b==="create-service-item"&&"Create Service Item",b==="edit-service-item"&&"Edit Service Item",b==="create-promo-code"&&"Create Promo Code",b==="edit-promo-code"&&"Edit Promo Code",b==="create-broker"&&"Create Broker",b==="create-broker-payout"&&"Create Broker Payout",b==="view-promo-users"&&"Promo Code Users"]})}),b==="view-user"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Username"}),e.jsx("p",{className:"text-sm",children:a.username||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Email"}),e.jsx("p",{className:"text-sm",children:a.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Phone Number"}),e.jsx("p",{className:"text-sm",children:a.phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"First Name"}),e.jsx("p",{className:"text-sm",children:a.first_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Last Name"}),e.jsx("p",{className:"text-sm",children:a.last_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Gender"}),e.jsx("p",{className:"text-sm",children:a.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Birth Date"}),e.jsx("p",{className:"text-sm",children:a.birth_date?new Date(a.birth_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"City"}),e.jsx("p",{className:"text-sm",children:a.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Role"}),e.jsx("p",{className:"text-sm",children:a.role||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Status"}),e.jsx(P,{variant:a.status?"default":"secondary",children:a.status?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Verified by Admin"}),e.jsx(P,{variant:a.verified_by_admin?"default":"secondary",children:a.verified_by_admin?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Is Locked"}),e.jsx(P,{variant:a.is_locked?"destructive":"default",children:a.is_locked?"Locked":"Unlocked"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Created At"}),e.jsx("p",{className:"text-sm",children:new Date(a.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Updated At"}),e.jsx("p",{className:"text-sm",children:new Date(a.updated_at).toLocaleString()})]})]}),a.bio&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Bio"}),e.jsx("p",{className:"text-sm",children:a.bio})]}),a.client&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold mb-2 block",children:"Client Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"License Number"}),e.jsx("p",{className:"text-sm",children:a.client.license_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Profession"}),e.jsx("p",{className:"text-sm",children:a.client.profession||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Average Salary"}),e.jsx("p",{className:"text-sm",children:a.client.avg_salary||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Promo Code"}),e.jsx("p",{className:"text-sm",children:a.client.promo_code||"N/A"})]})]})]}),a.agent&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold mb-2 block",children:"Agent/Agency Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Business Type"}),e.jsx("p",{className:"text-sm",children:a.agent.business_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Company Number"}),e.jsx("p",{className:"text-sm",children:a.agent.company_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Profession"}),e.jsx("p",{className:"text-sm",children:a.agent.profession||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Website"}),e.jsx("p",{className:"text-sm",children:a.agent.website||"N/A"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>{Z("edit-user")},className:"flex-1",children:"Edit User"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]}),b==="edit-user"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"ID"}),e.jsx(v,{value:a.id||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Username"}),e.jsx(v,{value:a.username||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Email"}),e.jsx(v,{type:"email",value:a.email||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Phone Number"}),e.jsx(v,{value:a.phone_number||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"First Name"}),e.jsx(v,{value:a.first_name||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Last Name"}),e.jsx(v,{value:a.last_name||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Gender"}),e.jsx(v,{value:a.gender||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Birth Date"}),e.jsx(v,{type:"date",value:a.birth_date?new Date(a.birth_date).toISOString().split("T")[0]:"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"City"}),e.jsx(v,{value:a.city||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Role"}),e.jsx(v,{value:a.role||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Created At"}),e.jsx(v,{value:new Date(a.created_at).toLocaleString(),disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Updated At"}),e.jsx(v,{value:new Date(a.updated_at).toLocaleString(),disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Bio"}),e.jsx(ne,{value:a.bio||"",disabled:!0})]}),a.client&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold mb-2 block",children:"Client Details (Read-only)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"License Number"}),e.jsx(v,{value:a.client.license_number||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Profession"}),e.jsx(v,{value:a.client.profession||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Average Salary"}),e.jsx(v,{value:a.client.avg_salary||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Promo Code"}),e.jsx(v,{value:a.client.promo_code||"N/A",disabled:!0})]})]})]}),a.agent&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold mb-2 block",children:"Agent/Agency Details (Read-only)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Business Type"}),e.jsx(v,{value:a.agent.business_type||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Company Number"}),e.jsx(v,{value:a.agent.company_number||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Profession"}),e.jsx(v,{value:a.agent.profession||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs",children:"Website"}),e.jsx(v,{value:a.agent.website||"N/A",disabled:!0})]})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx(r,{className:"text-sm font-semibold block",children:"Editable Fields"}),a.verified_by_admin&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Verified by Admin (can revoke only)"}),e.jsx(ce,{checked:a.verified_by_admin||!1,onCheckedChange:s=>B({...a,verified_by_admin:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Status (Active)"}),e.jsx(ce,{checked:a.status!==void 0?a.status:!0,onCheckedChange:s=>B({...a,status:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Is Locked"}),e.jsx(ce,{checked:a.is_locked||!1,onCheckedChange:s=>B({...a,is_locked:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Update Access (Allow Profile Updates)"}),e.jsx(ce,{checked:a.update_access!==void 0?a.update_access:!0,onCheckedChange:s=>B({...a,update_access:s})})]})]}),(a.role==="agency"||a.role==="agent")&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{className:"text-sm font-semibold",children:"App Fees Management"}),e.jsxs(o,{variant:"outline",size:"sm",onClick:async()=>{await Ks(a.id)},children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Refresh Balance"]})]}),Te[a.id]?e.jsxs("div",{className:"space-y-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Current App Fees %:"}),e.jsxs("span",{className:"font-semibold",children:[Te[a.id].app_fees_percentage||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Balance:"}),e.jsxs("span",{className:"font-semibold",children:["$",Te[a.id].total_balance||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Paid Amount:"}),e.jsxs("span",{className:"text-green-600",children:["$",Te[a.id].breakdown?.paid_amount||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Remaining Balance:"}),e.jsxs("span",{className:"text-orange-600",children:["$",Te[a.id].breakdown?.remaining_balance||0]})]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:'Click "Refresh Balance" to load app fees data'}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Update App Fees Percentage"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{type:"number",step:"0.01",min:"0",max:"100",placeholder:"e.g., 10.00",defaultValue:Te[a.id]?.app_fees_percentage||"",onChange:s=>{const i=parseFloat(s.target.value);!isNaN(i)&&i>=0&&i<=100&&B({...a,app_fees_percentage:i})}}),e.jsx(o,{onClick:()=>{a.app_fees_percentage!==void 0?Za(a.id,a.app_fees_percentage):m.error("Please enter a valid app fees percentage")},variant:"outline",children:"Update %"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter percentage (0-100), e.g., 10.00 for 10%"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>Gs(a.id,{verified_by_admin:a.verified_by_admin,status:a.status,is_locked:a.is_locked,update_access:a.update_access!==void 0?a.update_access:!0}),className:"flex-1",children:"Update User"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"})]})]}),b==="view-car"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Make"}),e.jsx("p",{className:"text-sm",children:a.make||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Model"}),e.jsx("p",{className:"text-sm",children:a.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Year"}),e.jsx("p",{className:"text-sm",children:a.year||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"License Plate"}),e.jsx("p",{className:"text-sm",children:a.license_plate||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Color"}),e.jsx("p",{className:"text-sm",children:a.color||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Mileage"}),e.jsx("p",{className:"text-sm",children:a.mileage?.toLocaleString()||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Fuel Type"}),e.jsx("p",{className:"text-sm",children:a.fuel_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Transmission"}),e.jsx("p",{className:"text-sm",children:a.transmission||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Wheels Drive"}),e.jsx("p",{className:"text-sm",children:a.wheels_drive||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Category"}),e.jsx("p",{className:"text-sm",children:a.car_category||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Seats"}),e.jsx("p",{className:"text-sm",children:a.seats||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Doors"}),e.jsx("p",{className:"text-sm",children:a.doors||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Daily Rate"}),e.jsxs("p",{className:"text-sm",children:["$",a.daily_rate||"0.00"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Holiday Rate"}),e.jsxs("p",{className:"text-sm",children:["$",a.holiday_rate||"N/A"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Status"}),e.jsx(P,{variant:"outline",children:a.status||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Car Accepted"}),e.jsx(P,{variant:a.car_accepted?"default":"secondary",children:a.car_accepted?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"With Driver"}),e.jsx(P,{variant:a.with_driver?"default":"secondary",children:a.with_driver?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Is Delivered"}),e.jsx(P,{variant:a.is_delivered?"default":"secondary",children:a.is_delivered?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Min Rental Days"}),e.jsx("p",{className:"text-sm",children:a.min_rental_days||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Views Count"}),e.jsx("p",{className:"text-sm",children:a.views_count||0})]})]}),a.features&&a.features.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.features.map((s,i)=>e.jsx(P,{variant:"outline",children:s},i))})]}),a.car_add_on&&a.car_add_on.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Add-ons"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.car_add_on.map((s,i)=>e.jsx(P,{variant:"outline",children:s},i))})]}),a.notes&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Notes"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:a.notes})]}),a.agent&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold mb-2 block",children:"Agent"}),e.jsxs("p",{className:"text-sm",children:[a.agent.username||a.agent.first_name," ",a.agent.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.agent.phone_number})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>{Z("edit-car")},className:"flex-1",children:"Edit Car"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]}),b==="edit-car"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"ID"}),e.jsx(v,{value:a.id||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Make"}),e.jsx(v,{value:a.make||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Model"}),e.jsx(v,{value:a.model||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Year"}),e.jsx(v,{value:a.year||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"License Plate"}),e.jsx(v,{value:a.license_plate||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Color"}),e.jsx(v,{value:a.color||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Mileage"}),e.jsx(v,{value:a.mileage?.toLocaleString()||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Fuel Type"}),e.jsx(v,{value:a.fuel_type||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Transmission"}),e.jsx(v,{value:a.transmission||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Wheels Drive"}),e.jsx(v,{value:a.wheels_drive||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Category"}),e.jsx(v,{value:a.car_category||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Seats"}),e.jsx(v,{value:a.seats||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Doors"}),e.jsx(v,{value:a.doors||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Daily Rate"}),e.jsx(v,{value:`$${a.daily_rate||"0.00"}`,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Holiday Rate"}),e.jsx(v,{value:`$${a.holiday_rate||"N/A"}`,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Min Rental Days"}),e.jsx(v,{value:a.min_rental_days||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Views Count"}),e.jsx(v,{value:a.views_count||0,disabled:!0})]})]}),a.features&&a.features.length>0&&e.jsxs("div",{children:[e.jsx(r,{children:"Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.features.map((s,i)=>e.jsx(P,{variant:"outline",children:s},i))})]}),a.car_add_on&&a.car_add_on.length>0&&e.jsxs("div",{children:[e.jsx(r,{children:"Add-ons"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.car_add_on.map((s,i)=>e.jsx(P,{variant:"outline",children:s},i))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold block mb-3",children:"Car Images"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Main Image"}),a.main_image_url&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/api/storage/${a.main_image_url}`,alt:"Main",className:"w-full h-32 object-cover rounded-lg border"})}),e.jsx(v,{type:"file",accept:"image/*",onChange:s=>qe(a.id,"main_image",s.target.files[0]),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Front Image"}),a.front_image_url&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/api/storage/${a.front_image_url}`,alt:"Front",className:"w-full h-32 object-cover rounded-lg border"})}),e.jsx(v,{type:"file",accept:"image/*",onChange:s=>qe(a.id,"front_image",s.target.files[0]),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Back Image"}),a.back_image_url&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/api/storage/${a.back_image_url}`,alt:"Back",className:"w-full h-32 object-cover rounded-lg border"})}),e.jsx(v,{type:"file",accept:"image/*",onChange:s=>qe(a.id,"back_image",s.target.files[0]),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Left Image"}),a.left_image_url&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/api/storage/${a.left_image_url}`,alt:"Left",className:"w-full h-32 object-cover rounded-lg border"})}),e.jsx(v,{type:"file",accept:"image/*",onChange:s=>qe(a.id,"left_image",s.target.files[0]),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Right Image"}),a.right_image_url&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/api/storage/${a.right_image_url}`,alt:"Right",className:"w-full h-32 object-cover rounded-lg border"})}),e.jsx(v,{type:"file",accept:"image/*",onChange:s=>qe(a.id,"right_image",s.target.files[0]),className:"mt-1"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold block mb-3",children:"Editable Fields"}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(E,{value:a.status||"",onValueChange:s=>B({...a,status:s}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"available",children:"Available"}),e.jsx(j,{value:"rented",children:"Rented"}),e.jsx(j,{value:"maintenance",children:"Maintenance"}),e.jsx(j,{value:"unavailable",children:"Unavailable"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(r,{children:"Notes"}),e.jsx(ne,{value:a.notes||"",onChange:s=>B({...a,notes:s.target.value}),rows:4})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx(r,{children:"Car Accepted"}),e.jsx(ce,{checked:a.car_accepted||!1,onCheckedChange:s=>B({...a,car_accepted:s})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>Ws(a.id,{status:a.status,car_accepted:a.car_accepted,notes:a.notes}),className:"flex-1",disabled:c,children:"Update Car"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"})]})]}),b==="view-booking"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Booking ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Client"}),e.jsx("p",{className:"text-sm",children:a.client?.first_name&&a.client?.last_name?`${a.client.first_name} ${a.client.last_name}`:a.client?.username||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Car"}),e.jsxs("p",{className:"text-sm",children:[a.car?.make," ",a.car?.model," (",a.car?.year,")"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Agent"}),e.jsx("p",{className:"text-sm",children:a.car?.agent?.username||a.car?.agent?.first_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Start Date"}),e.jsx("p",{className:"text-sm",children:new Date(a.start_datetime).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"End Date"}),e.jsx("p",{className:"text-sm",children:new Date(a.end_datetime).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Total Price"}),e.jsxs("p",{className:"text-sm font-semibold",children:["$",a.total_booking_price||"0.00"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Booking Status"}),e.jsx(P,{variant:"outline",children:a.booking_request_status||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Payment Status"}),e.jsx(P,{variant:a.payment_status==="paid"?"default":"secondary",children:a.payment_status||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Payment Method"}),e.jsx("p",{className:"text-sm",children:a.payment_method||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Is Paid Online"}),e.jsx(P,{variant:a.is_paid_online?"default":"secondary",children:a.is_paid_online?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Is Delivered"}),e.jsx(P,{variant:a.is_delivered?"default":"secondary",children:a.is_delivered?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Pickup Location"}),e.jsx("p",{className:"text-sm",children:a.pickup_location||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Dropoff Location"}),e.jsx("p",{className:"text-sm",children:a.dropoff_location||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Reason of Booking"}),e.jsx("p",{className:"text-sm",children:a.reason_of_booking||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Extra Charge"}),e.jsxs("p",{className:"text-sm",children:["$",a.extra_charge||"0.00"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Cancellation Date"}),e.jsx("p",{className:"text-sm",children:a.cancelation_date?new Date(a.cancelation_date).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Cancellation Reason"}),e.jsx("p",{className:"text-sm",children:a.cancelation_reason||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Created At"}),e.jsx("p",{className:"text-sm",children:new Date(a.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Updated At"}),e.jsx("p",{className:"text-sm",children:new Date(a.updated_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>{Z("edit-booking")},className:"flex-1",children:"Edit Booking"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]}),b==="edit-booking"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Booking ID"}),e.jsx(v,{value:a.id||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Client"}),e.jsx(v,{value:a.client?.first_name&&a.client?.last_name?`${a.client.first_name} ${a.client.last_name}`:a.client?.username||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Car"}),e.jsx(v,{value:`${a.car?.make||""} ${a.car?.model||""} (${a.car?.year||""})`,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Start Date & Time"}),e.jsx(v,{value:new Date(a.start_datetime).toLocaleString(),disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"End Date & Time"}),e.jsx(v,{value:new Date(a.end_datetime).toLocaleString(),disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Payment Status"}),e.jsx(v,{value:a.payment_status||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Payment Method"}),e.jsx(v,{value:a.payment_method||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Is Paid Online"}),e.jsx(v,{value:a.is_paid_online?"Yes":"No",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Is Delivered"}),e.jsx(v,{value:a.is_delivered?"Yes":"No",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Pickup Location"}),e.jsx(v,{value:a.pickup_location||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Dropoff Location"}),e.jsx(v,{value:a.dropoff_location||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reason of Booking"}),e.jsx(v,{value:a.reason_of_booking||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Extra Charge"}),e.jsx(v,{value:`$${a.extra_charge||"0.00"}`,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Cancellation Date"}),e.jsx(v,{value:a.cancelation_date?new Date(a.cancelation_date).toLocaleString():"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Cancellation Reason"}),e.jsx(v,{value:a.cancelation_reason||"N/A",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Created At"}),e.jsx(v,{value:new Date(a.created_at).toLocaleString(),disabled:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Updated At"}),e.jsx(v,{value:new Date(a.updated_at).toLocaleString(),disabled:!0})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(r,{className:"text-sm font-semibold block mb-3",children:"Editable Fields"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Booking Status"}),e.jsxs(E,{value:a.booking_request_status||"",onValueChange:s=>B({...a,booking_request_status:s}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"pending",children:"Pending"}),e.jsx(j,{value:"confirmed",children:"Confirmed"}),e.jsx(j,{value:"cancelled",children:"Cancelled"}),e.jsx(j,{value:"completed",children:"Completed"}),e.jsx(j,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Total Booking Price"}),e.jsx(v,{type:"number",step:"0.01",value:a.total_booking_price||"",onChange:s=>B({...a,total_booking_price:s.target.value})})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>Js(a.id,{booking_request_status:a.booking_request_status,total_booking_price:a.total_booking_price}),className:"flex-1",children:"Update Booking"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"})]})]}),(b==="create-announcement"||b==="edit-announcement")&&e.jsx(Ei,{announcement:a,onSubmit:s=>{b==="create-announcement"?za(s):Ma(a.id,s)}}),b==="edit-appeal"&&a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(E,{value:a.status,onValueChange:s=>B({...a,status:s}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"submitted",children:"Submitted"}),e.jsx(j,{value:"under_review",children:"Under Review"}),e.jsx(j,{value:"resolved",children:"Resolved"}),e.jsx(j,{value:"rejected",children:"Rejected"}),e.jsx(j,{value:"escalated",children:"Escalated"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Priority"}),e.jsxs(E,{value:a.priority,onValueChange:s=>B({...a,priority:s}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"low",children:"Low"}),e.jsx(j,{value:"medium",children:"Medium"}),e.jsx(j,{value:"high",children:"High"}),e.jsx(j,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Response"}),e.jsx(ne,{value:a.response||"",onChange:s=>B({...a,response:s.target.value})})]}),e.jsx(o,{onClick:()=>Va(a.id,{status:a.status,priority:a.priority,response:a.response}),children:"Update Appeal"})]}),b==="edit-ad"&&a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Online"}),e.jsx(ce,{checked:a.online,onCheckedChange:s=>B({...a,online:s})})]}),e.jsx(o,{onClick:()=>Ha(a.id,{online:a.online}),children:"Update Ad"})]}),b==="edit-suggestion"&&a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(E,{value:a.status,onValueChange:s=>B({...a,status:s}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"pending",children:"Pending"}),e.jsx(j,{value:"received",children:"Received"}),e.jsx(j,{value:"implemented",children:"Implemented"}),e.jsx(j,{value:"rejected",children:"Rejected"})]})]})]}),e.jsx(o,{onClick:()=>Ka(a.id,{status:a.status}),children:"Update Suggestion"})]}),b==="send-notification"&&e.jsx(zi,{onSubmit:s=>Qa(s)}),(b==="create-holiday"||b==="edit-holiday")&&e.jsx(Li,{holiday:a,onSubmit:s=>{b==="create-holiday"?Pa(s):Ia(a.id,s)}}),b==="create-ad"&&e.jsx(ti,{onSubmit:qa,loading:c}),b==="create-payment"&&e.jsx(Ni,{onSubmit:Ga,loading:c}),b==="create-featured-car"&&e.jsx(li,{onSubmit:Wa,loading:c}),b==="view-service"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Name"}),e.jsx("p",{className:"text-sm",children:a.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Category"}),e.jsx("p",{className:"text-sm",children:a.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Price"}),e.jsxs("p",{className:"text-sm",children:["$",a.price?.toFixed(2)||"0.00"]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Rating"}),e.jsx("p",{className:"text-sm",children:a.rating?.toFixed(1)||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Featured"}),e.jsx(P,{variant:a.featured?"default":"secondary",children:a.featured?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"City"}),e.jsx("p",{className:"text-sm",children:a.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Clicks"}),e.jsx("p",{className:"text-sm",children:a.clicks||0})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.description||"N/A"})]}),a.images&&a.images.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Images"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.images.map((s,i)=>e.jsx("img",{src:s,alt:`Service ${i+1}`,className:"w-20 h-20 object-cover rounded"},i))})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>Z("edit-service"),className:"flex-1",children:"Edit Service"}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]}),(b==="create-service"||b==="edit-service")&&e.jsx(Mi,{service:b==="edit-service"?a:null,thirdParties:Ee,onSubmit:s=>{b==="edit-service"&&a?Ls(a.id,s):ys(s)}}),b==="create-broker-payout"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Record a payment to a broker. Amount will be allocated to pending commissions (FIFO)."}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Broker *"}),e.jsxs(E,{value:re.broker_id||"select",onValueChange:s=>Ie(i=>({...i,broker_id:s})),disabled:!!ge?.id,children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select broker"})}),e.jsxs(O,{children:[e.jsx(j,{value:"select",children:"Select broker"}),(Array.isArray(ve)?ve:[]).map(s=>e.jsx(j,{value:String(s.id),children:s.username||`${s.first_name||""} ${s.last_name||""}`||`Broker #${s.id}`},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Amount *"}),e.jsx(v,{type:"number",min:.01,step:.01,value:re.amount,onChange:s=>Ie(i=>({...i,amount:s.target.value})),placeholder:"e.g. 300.00"}),Ke?.balance!=null&&ge&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Balance: $",Number(Ke.balance).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reference"}),e.jsx(v,{value:re.reference,onChange:s=>Ie(i=>({...i,reference:s.target.value})),placeholder:"e.g. BANK-REF-123",maxLength:255})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Notes"}),e.jsx(ne,{value:re.notes,onChange:s=>Ie(i=>({...i,notes:s.target.value.slice(0,1e3)})),placeholder:"Optional notes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(o,{onClick:ea,disabled:c||!re.broker_id||re.broker_id==="select"||!re.amount||parseFloat(re.amount)<.01,children:c?"Creating...":"Create Payout"})]})]}),b==="create-broker"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new broker user (role: broker). Brokers can be assigned promo codes for the referral program."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Username *"}),e.jsx(v,{value:X.username,onChange:s=>he(i=>({...i,username:s.target.value})),placeholder:"broker_john",maxLength:100})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Phone number *"}),e.jsx(v,{value:X.phone_number,onChange:s=>he(i=>({...i,phone_number:s.target.value})),placeholder:"9613123456",maxLength:20})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{children:"Email"}),e.jsx(v,{type:"email",value:X.email,onChange:s=>he(i=>({...i,email:s.target.value})),placeholder:"john@example.com (optional)"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Password *"}),e.jsx(v,{type:"password",value:X.password,onChange:s=>he(i=>({...i,password:s.target.value})),placeholder:"Min 6 characters"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Confirm password *"}),e.jsx(v,{type:"password",value:X.password_confirmation,onChange:s=>he(i=>({...i,password_confirmation:s.target.value})),placeholder:"Repeat password"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"First name *"}),e.jsx(v,{value:X.first_name,onChange:s=>he(i=>({...i,first_name:s.target.value})),placeholder:"John",maxLength:100})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Last name *"}),e.jsx(v,{value:X.last_name,onChange:s=>he(i=>({...i,last_name:s.target.value})),placeholder:"Doe",maxLength:100})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(o,{onClick:Qs,disabled:c||!X.username?.trim()||!X.phone_number?.trim()||!X.first_name?.trim()||!X.last_name?.trim()||!X.password||X.password.length<6||X.password!==X.password_confirmation,children:c?"Creating...":"Create Broker"})]})]}),(b==="create-promo-code"||b==="edit-promo-code")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(v,{value:a?.code||"",onChange:s=>B(i=>({...i||{},code:s.target.value})),placeholder:"SAVE20"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Broker *"}),e.jsxs(E,{value:a?.broker_id?String(a.broker_id):"select",onValueChange:s=>B(i=>({...i||{},broker_id:s&&s!=="select"?Number(s):null})),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select broker"})}),e.jsxs(O,{children:[e.jsx(j,{value:"select",children:"Select broker"}),(Array.isArray(ve)?ve:[]).map(s=>e.jsx(j,{value:String(s.id),children:s.username||`${s.first_name||""} ${s.last_name||""}`||`Broker #${s.id}`},s.id))]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{children:"Description"}),e.jsx(ne,{value:a?.description||"",onChange:s=>B(i=>({...i||{},description:s.target.value})),placeholder:"Optional description"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Max Uses"}),e.jsx(v,{type:"number",min:1,value:a?.max_uses??"",onChange:s=>B(i=>({...i||{},max_uses:s.target.value?Number(s.target.value):null})),placeholder:"Leave empty for unlimited"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Expires At"}),e.jsx(v,{type:"date",value:a?.expires_at||"",onChange:s=>B(i=>({...i||{},expires_at:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Commission %"}),e.jsx(v,{type:"number",min:0,max:100,step:.1,value:a?.commission_percentage??"",onChange:s=>B(i=>({...i||{},commission_percentage:s.target.value?Number(s.target.value):null})),placeholder:"e.g. 5"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[e.jsx(ce,{checked:a?.is_active??!0,onCheckedChange:s=>B(i=>({...i||{},is_active:s}))}),e.jsx("span",{className:"text-sm",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(o,{onClick:()=>{if(b==="create-promo-code"&&(!a?.code?.trim()||!a?.broker_id)){m.error("Code and Broker are required");return}const s={code:a?.code?.trim(),broker_id:a?.broker_id||void 0,description:a?.description?.trim()||void 0,is_active:a?.is_active??!0,max_uses:a?.max_uses||void 0,expires_at:a?.expires_at||void 0,commission_percentage:a?.commission_percentage};Xs(s,b==="edit-promo-code"?a:null)},disabled:c,children:c?"Saving...":"Save"})]})]}),b==="view-promo-users"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ia,{className:"w-4 h-4"}),"Promo Code: ",e.jsx("span",{className:"font-mono",children:a.code})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Broker:"," ",a.broker?a.broker.username||`${a.broker.first_name||""} ${a.broker.last_name||""}`:"N/A"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Users who used this code"}),e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Username"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Phone"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Referred At"})]})}),e.jsx(G,{children:js.map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:s.username}),e.jsx(t,{children:s.first_name||s.last_name?`${s.first_name||""} ${s.last_name||""}`:"N/A"}),e.jsx(t,{children:s.phone_number||"N/A"}),e.jsx(t,{children:s.email||"N/A"}),e.jsx(t,{children:s.referred_at?new Date(s.referred_at).toLocaleString():"N/A"})]},s.id))})]})]}),Array.isArray(Pe)&&Pe.length>0&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Broker referrals (all codes)"}),e.jsxs(q,{children:[e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Referred User"}),e.jsx(l,{children:"Promo Code"})]})}),e.jsx(G,{children:(Array.isArray(Pe)?Pe:[]).map(s=>e.jsxs(_,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:s.referredUser?s.referredUser.username||`${s.referredUser.first_name||""} ${s.referredUser.last_name||""}`:s.referred_user_id}),e.jsx(t,{children:s.promoCode?.code||"N/A"})]},s.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-3",children:e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})})]}),b==="view-third-party"&&a&&e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"ID"}),e.jsx("p",{className:"text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Name"}),e.jsx("p",{className:"text-sm",children:a.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Email"}),e.jsx("p",{className:"text-sm",children:a.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Phone"}),e.jsx("p",{className:"text-sm",children:a.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Contact Email"}),e.jsx("p",{className:"text-sm",children:a.contact_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Category"}),e.jsx(P,{variant:"outline",children:a.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"City"}),e.jsx("p",{className:"text-sm",children:a.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Subscription"}),e.jsx(P,{variant:a.subscription==="premium"||a.subscription==="enterprise"?"default":"secondary",children:a.subscription||"Free"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Created At"}),e.jsx("p",{className:"text-sm",children:new Date(a.created_at).toLocaleString()})]})]}),a.description&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.description})]}),a.permissions&&a.permissions.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-semibold",children:"Permissions"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.permissions.map((s,i)=>e.jsx(P,{variant:"secondary",className:"text-xs",children:s},i))})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(o,{onClick:()=>Z("edit-third-party"),className:"flex-1",children:"Edit Third Party"}),e.jsxs(o,{variant:"outline",onClick:()=>{B({third_party_id:a.id,third_party_name:a.name}),Z("create-service-for-tp")},children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Add Service"]}),e.jsx(o,{variant:"outline",onClick:()=>F(!1),children:"Close"})]})]}),(b==="create-third-party"||b==="edit-third-party")&&e.jsx(Oi,{thirdParty:b==="edit-third-party"?a:null,onSubmit:s=>{b==="edit-third-party"&&a?Ms(a.id,s):zs(s)}}),b==="create-service-for-tp"&&a&&e.jsx(Hi,{thirdPartyId:a.third_party_id,thirdPartyName:a.third_party_name,onSubmit:s=>{ys({...s,third_party_id:a.third_party_id})}}),(b==="create-service-item"||b==="edit-service-item")&&e.jsx(Vi,{item:b==="edit-service-item"?a:null,onSubmit:s=>{b==="edit-service-item"&&a?Hs(a.id,s):le&&Vs(le,s)}})]})})})]})})}function Li({holiday:h,onSubmit:g}){const[x,c]=S.useState({car_id:h?.car_id||"",holiday_name:h?.holiday_name||"",holiday_dates:{start:h?.holiday_dates?.start||"",end:h?.holiday_dates?.end||""},percentage_increase:h?.percentage_increase||"",is_active:h?.is_active!==void 0?h.is_active:!0});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Car ID *"}),e.jsx(v,{type:"number",value:x.car_id,onChange:n=>c({...x,car_id:n.target.value}),placeholder:"Enter car ID",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Holiday Name *"}),e.jsx(v,{value:x.holiday_name,onChange:n=>c({...x,holiday_name:n.target.value}),placeholder:"e.g., New Year",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Start Date *"}),e.jsx(v,{type:"date",value:x.holiday_dates.start,onChange:n=>c({...x,holiday_dates:{...x.holiday_dates,start:n.target.value}}),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{children:"End Date *"}),e.jsx(v,{type:"date",value:x.holiday_dates.end,onChange:n=>c({...x,holiday_dates:{...x.holiday_dates,end:n.target.value}}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Percentage Increase *"}),e.jsx(v,{type:"number",step:"0.01",min:"0",max:"100",value:x.percentage_increase,onChange:n=>c({...x,percentage_increase:n.target.value}),placeholder:"20.00",required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:"is_active",checked:x.is_active,onCheckedChange:n=>c({...x,is_active:n})}),e.jsx(r,{htmlFor:"is_active",children:"Active"})]}),e.jsxs(o,{onClick:()=>g(x),children:[h?"Update":"Create"," Holiday"]})]})}function Ei({announcement:h,onSubmit:g}){const x=d=>{if(!d)return"";const p=new Date(d),A=p.getFullYear(),D=String(p.getMonth()+1).padStart(2,"0"),I=String(p.getDate()).padStart(2,"0"),K=String(p.getHours()).padStart(2,"0"),T=String(p.getMinutes()).padStart(2,"0"),Q=String(p.getSeconds()).padStart(2,"0");return`${A}-${D}-${I} ${K}:${T}:${Q}`},c=d=>d?d.includes(" ")?d.replace(" ","T"):new Date(d).toISOString().slice(0,16):"",[n,C]=S.useState({title:h?.title||"",message:h?.message||"",scheduled_at:c(h?.scheduled_at)||"",expires_at:c(h?.expires_at)||"",priority:h?.priority||"medium",target_audience:h?.target_audience||[],status:h?.status||"draft",categories:h?.categories||[],media:h?.media||[]}),u=(d,p)=>{C(A=>{const D=A.target_audience||[];return p?{...A,target_audience:[...D,d]}:{...A,target_audience:D.filter(I=>I!==d)}})},w=()=>{const d={...n,scheduled_at:n.scheduled_at?x(n.scheduled_at):void 0,expires_at:n.expires_at?x(n.expires_at):void 0,categories:n.categories.length>0?n.categories:void 0,media:n.media.length>0?n.media:void 0};g(d)};return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Title *"}),e.jsx(v,{required:!0,value:n.title,onChange:d=>C({...n,title:d.target.value}),placeholder:"Enter announcement title"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Message *"}),e.jsx(ne,{required:!0,value:n.message,onChange:d=>C({...n,message:d.target.value}),placeholder:"Enter announcement message",rows:5})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Scheduled At"}),e.jsx(v,{type:"datetime-local",value:n.scheduled_at,onChange:d=>C({...n,scheduled_at:d.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Expires At"}),e.jsx(v,{type:"datetime-local",value:n.expires_at,onChange:d=>C({...n,expires_at:d.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Priority"}),e.jsxs(E,{value:n.priority,onValueChange:d=>C({...n,priority:d}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"low",children:"Low"}),e.jsx(j,{value:"medium",children:"Medium"}),e.jsx(j,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(E,{value:n.status,onValueChange:d=>C({...n,status:d}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"draft",children:"Draft"}),e.jsx(j,{value:"published",children:"Published"}),e.jsx(j,{value:"archived",children:"Archived"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Target Audience"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["client","agency","agent","admin"].map(d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`target-${d}`,checked:n.target_audience.includes(d),onChange:p=>u(d,p.target.checked),className:"rounded"}),e.jsx(r,{htmlFor:`target-${d}`,className:"text-sm font-normal cursor-pointer",children:d.charAt(0).toUpperCase()+d.slice(1)})]},d))})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(o,{onClick:w,className:"flex-1",children:[h?"Update":"Create"," Announcement"]})})]})}function zi({onSubmit:h}){const[g,x]=S.useState({title:"",message:"",type:"general",data:{}});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Title"}),e.jsx(v,{value:g.title,onChange:c=>x({...g,title:c.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Message"}),e.jsx(ne,{value:g.message,onChange:c=>x({...g,message:c.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Type"}),e.jsxs(E,{value:g.type,onValueChange:c=>x({...g,type:c}),children:[e.jsx(z,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"general",children:"General"}),e.jsx(j,{value:"booking",children:"Booking"}),e.jsx(j,{value:"payment",children:"Payment"}),e.jsx(j,{value:"system",children:"System"})]})]})]}),e.jsx(o,{onClick:()=>h(g),children:"Send Notification"})]})}function Mi({service:h,onSubmit:g,thirdParties:x=[]}){const[c,n]=S.useState({name:h?.name||"",description:h?.description||"",category:h?.category||"",price:h?.price||"",featured:h?.featured||!1,images:h?.images||[],third_party_id:h?.third_party_id||"",city:h?.city||"",availability:h?.availability!==!1}),[C,u]=S.useState(""),w=()=>{C.trim()&&(n({...c,images:[...c.images,C.trim()]}),u(""))},d=p=>{n({...c,images:c.images.filter((A,D)=>D!==p)})};return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[x.length>0&&e.jsxs("div",{children:[e.jsx(r,{children:"Service Owner (Third Party) *"}),e.jsxs(E,{value:c.third_party_id?.toString()||"",onValueChange:p=>n({...c,third_party_id:parseInt(p)}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select third party owner"})}),e.jsx(O,{children:x.map(p=>e.jsxs(j,{value:p.id.toString(),children:[p.name," (",p.email,")"]},p.id))})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Name *"}),e.jsx(v,{required:!0,value:c.name,onChange:p=>n({...c,name:p.target.value}),placeholder:"Enter service name"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description *"}),e.jsx(ne,{required:!0,value:c.description,onChange:p=>n({...c,description:p.target.value}),placeholder:"Enter service description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Category *"}),e.jsxs(E,{value:c.category,onValueChange:p=>n({...c,category:p}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select category"})}),e.jsxs(O,{children:[e.jsx(j,{value:"hotel",children:"Hotel"}),e.jsx(j,{value:"restaurant",children:"Restaurant"}),e.jsx(j,{value:"spa",children:"Spa"}),e.jsx(j,{value:"nightclub",children:"Nightclub"}),e.jsx(j,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price *"}),e.jsx(v,{type:"number",step:"0.01",min:"0",required:!0,value:c.price,onChange:p=>n({...c,price:parseFloat(p.target.value)||""}),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"City"}),e.jsx(v,{value:c.city,onChange:p=>n({...c,city:p.target.value}),placeholder:"Enter city"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(r,{children:"Availability"}),e.jsx(ce,{checked:c.availability,onCheckedChange:p=>n({...c,availability:p})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Featured"}),e.jsx(ce,{checked:c.featured,onCheckedChange:p=>n({...c,featured:p})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Images"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(v,{value:C,onChange:p=>u(p.target.value),placeholder:"Enter image URL",className:"flex-1"}),e.jsx(o,{type:"button",variant:"outline",onClick:w,children:"Add"})]}),c.images.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.images.map((p,A)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:`Image ${A+1}`,className:"w-16 h-16 object-cover rounded"}),e.jsx("button",{type:"button",onClick:()=>d(A),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs",children:"×"})]},A))})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(o,{onClick:()=>g(c),className:"flex-1",children:[h?"Update":"Create"," Service"]})})]})}function Oi({thirdParty:h,onSubmit:g}){const[x,c]=S.useState({name:h?.business_name||h?.name||"",username:h?.username||"",email:h?.email||"",password:"",subscription:h?.subscription||"",permissions:h?.permissions||[],description:h?.description||"",category:h?.category||"",city:h?.city||"",contact_email:h?.contact_email||"",phone:h?.phone||""}),n=["services:read","services:write","items:read","items:write","feedbacks:read","feedbacks:respond"],C=u=>{x.permissions.includes(u)?c({...x,permissions:x.permissions.filter(w=>w!==u)}):c({...x,permissions:[...x.permissions,u]})};return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsx("div",{className:"border-b pb-2 mb-2",children:e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Account Information"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Business Name *"}),e.jsx(v,{required:!0,value:x.name,onChange:u=>c({...x,name:u.target.value}),placeholder:"Enter business/company name"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Username *"}),e.jsx(v,{required:!0,value:x.username,onChange:u=>c({...x,username:u.target.value}),placeholder:"Unique username for login"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Email *"}),e.jsx(v,{type:"email",required:!0,value:x.email,onChange:u=>c({...x,email:u.target.value}),placeholder:"Enter login email"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:h?"Password (leave blank to keep current)":"Password *"}),e.jsx(v,{type:"password",required:!h,value:x.password,onChange:u=>c({...x,password:u.target.value}),placeholder:"Enter password"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Subscription"}),e.jsxs(E,{value:x.subscription,onValueChange:u=>c({...x,subscription:u}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select subscription"})}),e.jsxs(O,{children:[e.jsx(j,{value:"free",children:"Free"}),e.jsx(j,{value:"basic",children:"Basic"}),e.jsx(j,{value:"premium",children:"Premium"}),e.jsx(j,{value:"enterprise",children:"Enterprise"})]})]})]})]}),e.jsx("div",{className:"border-b pb-2 mb-2 mt-4",children:e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Profile Information"})}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(ne,{value:x.description,onChange:u=>c({...x,description:u.target.value}),placeholder:"Enter business description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Category"}),e.jsxs(E,{value:x.category,onValueChange:u=>c({...x,category:u}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select category"})}),e.jsxs(O,{children:[e.jsx(j,{value:"transport",children:"Transport"}),e.jsx(j,{value:"accommodation",children:"Accommodation"}),e.jsx(j,{value:"food",children:"Food & Dining"}),e.jsx(j,{value:"entertainment",children:"Entertainment"}),e.jsx(j,{value:"tourism",children:"Tourism"}),e.jsx(j,{value:"rental",children:"Rental Services"}),e.jsx(j,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"City"}),e.jsx(v,{value:x.city,onChange:u=>c({...x,city:u.target.value}),placeholder:"Enter city"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Contact Email"}),e.jsx(v,{type:"email",value:x.contact_email,onChange:u=>c({...x,contact_email:u.target.value}),placeholder:"Enter public contact email"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Phone"}),e.jsx(v,{value:x.phone,onChange:u=>c({...x,phone:u.target.value}),placeholder:"Enter phone number"})]})]}),e.jsx("div",{className:"border-b pb-2 mb-2 mt-4",children:e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Permissions"})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:n.map(u=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`perm-${u}`,checked:x.permissions.includes(u),onChange:()=>C(u),className:"rounded"}),e.jsx(r,{htmlFor:`perm-${u}`,className:"text-sm font-normal cursor-pointer",children:u})]},u))}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(o,{onClick:()=>{const u={...x};h&&!u.password&&delete u.password,g(u)},className:"flex-1",children:[h?"Update":"Create"," Third Party"]})})]})}function Vi({item:h,onSubmit:g}){const[x,c]=S.useState({name:h?.name||"",description:h?.description||"",price:h?.price||"",image:h?.image||""});return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name *"}),e.jsx(v,{required:!0,value:x.name,onChange:n=>c({...x,name:n.target.value}),placeholder:"Enter item name"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(ne,{value:x.description,onChange:n=>c({...x,description:n.target.value}),placeholder:"Enter item description",rows:3})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price *"}),e.jsx(v,{type:"number",step:"0.01",min:"0",required:!0,value:x.price,onChange:n=>c({...x,price:parseFloat(n.target.value)||""}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Image URL"}),e.jsx(v,{value:x.image,onChange:n=>c({...x,image:n.target.value}),placeholder:"Enter image URL"}),x.image&&e.jsx("img",{src:x.image,alt:"Preview",className:"w-20 h-20 object-cover rounded mt-2"})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(o,{onClick:()=>g(x),className:"flex-1",children:[h?"Update":"Create"," Item"]})})]})}function Hi({thirdPartyId:h,thirdPartyName:g,onSubmit:x}){const[c,n]=S.useState({name:"",description:"",category:"",price:"",featured:!1,images:[],city:"",availability:!0}),[C,u]=S.useState(""),w=()=>{C.trim()&&(n({...c,images:[...c.images,C.trim()]}),u(""))},d=p=>{n({...c,images:c.images.filter((A,D)=>D!==p)})};return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Owner:"})," ",g," (ID: ",h,")"]})}),e.jsxs("div",{children:[e.jsx(r,{children:"Service Name *"}),e.jsx(v,{required:!0,value:c.name,onChange:p=>n({...c,name:p.target.value}),placeholder:"Enter service name"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description *"}),e.jsx(ne,{required:!0,value:c.description,onChange:p=>n({...c,description:p.target.value}),placeholder:"Enter service description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Category *"}),e.jsxs(E,{value:c.category,onValueChange:p=>n({...c,category:p}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Select category"})}),e.jsxs(O,{children:[e.jsx(j,{value:"hotel",children:"Hotel"}),e.jsx(j,{value:"restaurant",children:"Restaurant"}),e.jsx(j,{value:"spa",children:"Spa"}),e.jsx(j,{value:"nightclub",children:"Nightclub"}),e.jsx(j,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price *"}),e.jsx(v,{type:"number",step:"0.01",min:"0",required:!0,value:c.price,onChange:p=>n({...c,price:parseFloat(p.target.value)||""}),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"City"}),e.jsx(v,{value:c.city,onChange:p=>n({...c,city:p.target.value}),placeholder:"Enter city"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(r,{children:"Availability"}),e.jsx(ce,{checked:c.availability,onCheckedChange:p=>n({...c,availability:p})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Featured"}),e.jsx(ce,{checked:c.featured,onCheckedChange:p=>n({...c,featured:p})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Images"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(v,{value:C,onChange:p=>u(p.target.value),placeholder:"Enter image URL",className:"flex-1"}),e.jsx(o,{type:"button",variant:"outline",onClick:w,children:"Add"})]}),c.images.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.images.map((p,A)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:`Image ${A+1}`,className:"w-16 h-16 object-cover rounded"}),e.jsx("button",{type:"button",onClick:()=>d(A),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs",children:"×"})]},A))})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsx(o,{onClick:()=>x(c),className:"flex-1",children:"Create Service"})})]})}export{Xt as default};
