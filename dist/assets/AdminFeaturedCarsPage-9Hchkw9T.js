import{r as l,j as e,B as c}from"./index-DbvXYXc0.js";import{C as o,b,c as N,a as x}from"./card-6tZ6FSP9.js";import{T as g,a as v,b as h,c as r,d as y,e as s}from"./table-Cdzf11jr.js";import{X as T,Y as S}from"./adminApi-C-vdNBvN.js";import{t as u}from"./use-toast-BTZLQfF-.js";import{F as _}from"./FeaturedCarForm-CKWgzPFr.js";import{P as k}from"./plus-CKnT-f47.js";import{R as E}from"./refresh-cw-BkItMj0z.js";import{T as R}from"./trash-wdzd2LuX.js";import"./label-DMFTECDG.js";import"./input-Bf8YvsU0.js";const G=()=>{const[i,f]=l.useState([]),[j,d]=l.useState(!1),[m,n]=l.useState(!1),t=async()=>{n(!0);try{const{data:a}=await T();f(a.featured_cars.data)}finally{n(!1)}};l.useEffect(()=>{t()},[]);const C=async a=>{if(confirm("Delete this featured car?"))try{await S(a),u({title:"Featured car removed"}),t()}catch{u({title:"Failed to delete featured car",variant:"destructive"})}},p=(a,w)=>{const F=new Date(a),D=new Date(w);return`${Math.ceil((D-F)/(1e3*60*60*24))||0} days`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Featured Cars"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm","aria-label":"Create new featured car",onClick:()=>d(a=>!a),children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Create Featured Car"]}),e.jsx(c,{size:"icon","aria-label":"refresh data",variant:"outline",onClick:t,children:e.jsx(E,{className:"h-4 w-4"})})]})]}),j&&e.jsxs(o,{children:[e.jsx(b,{children:e.jsx(N,{children:"Create Featured Car"})}),e.jsx(x,{children:e.jsx(_,{onSuccess:()=>{d(!1),t()}})})]}),e.jsx(o,{children:e.jsxs(x,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(g,{children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Car"}),e.jsx(r,{children:"Duration"}),e.jsx(r,{children:"Start Date"}),e.jsx(r,{children:"Expire Date"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(y,{children:i.map(a=>e.jsxs(h,{children:[e.jsx(s,{children:a.id}),e.jsxs(s,{children:[a.car?.make," ",a.car?.model]}),e.jsx(s,{children:p(a.start_at,a.expire_at)}),e.jsx(s,{children:new Date(a.start_at).toLocaleDateString()}),e.jsx(s,{children:new Date(a.expire_at).toLocaleDateString()}),e.jsx(s,{className:"text-right",children:e.jsx(c,{size:"icon","aria-label":"Delete featured car",variant:"destructive",onClick:()=>C(a.id),children:e.jsx(R,{className:"h-3 w-3"})})})]},a.id))})]})}),!m&&i.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No featured cars found"})]})})]})};export{G as default};
