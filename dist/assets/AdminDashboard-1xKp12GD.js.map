{"version":3,"file":"AdminDashboard-1xKp12GD.js","sources":["../../src/components/admin/BookingsOverviewChart.jsx","../../src/components/admin/CarsByModelBarChart.jsx","../../src/components/admin/MobileAppClicksChart.jsx","../../src/components/admin/MobileAppClicksPieChart.jsx","../../src/pages/admin/AdminDashboard.jsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\nimport { Chart, registerables } from \"chart.js\";\r\n\r\nChart.register(...registerables);\r\n\r\nconst BookingsOverviewChart = ({ data }) => {\r\n  const canvasRef = useRef(null);\r\n  const chartRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!data?.length || !canvasRef.current) return;\r\n\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    if (chartRef.current) {\r\n      chartRef.current.destroy();\r\n      chartRef.current = null;\r\n    }\r\n\r\n    const labels = data.map((d) => d.label);\r\n    const datasetConfig = [\r\n      { key: \"pending\", label: \"Pending\", color: \"#facc15\" },\r\n      { key: \"completed\", label: \"Completed\", color: \"#22c55e\" },\r\n      { key: \"cancelled\", label: \"Cancelled\", color: \"#ef4444\" },\r\n      { key: \"total\", label: \"Total\", color: \"#3b82f6\" },\r\n    ];\r\n\r\n    chartRef.current = new Chart(ctx, {\r\n      type: \"line\",\r\n      data: {\r\n        labels,\r\n        datasets: datasetConfig.map(({ key, label, color }) => ({\r\n          label,\r\n          data: data.map((d) => d[key] ?? 0),\r\n          borderColor: color,\r\n          backgroundColor: `${color}20`,\r\n          fill: false,\r\n          tension: 0.2,\r\n        })),\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        interaction: { mode: \"index\", intersect: false },\r\n        plugins: {\r\n          legend: { position: \"top\" },\r\n          tooltip: { mode: \"index\", intersect: false },\r\n        },\r\n        scales: {\r\n          x: {\r\n            grid: { display: false },\r\n            ticks: { maxRotation: 45, font: { size: 11 } },\r\n          },\r\n          y: {\r\n            beginAtZero: true,\r\n            ticks: { stepSize: 1, font: { size: 11 } },\r\n            grid: { color: \"rgba(0,0,0,0.06)\" },\r\n          },\r\n        },\r\n        animation: { duration: 400 },\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      if (chartRef.current) {\r\n        chartRef.current.destroy();\r\n        chartRef.current = null;\r\n      }\r\n    };\r\n  }, [data]);\r\n\r\n  if (!data || data.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"w-full h-[320px]\">\r\n      <canvas ref={canvasRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingsOverviewChart;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { Chart, registerables } from \"chart.js\";\r\n\r\nChart.register(...registerables);\r\n\r\nconst TEAL = \"#00A19C\";\r\n\r\nconst CarsByModelBarChart = ({ data }) => {\r\n  const canvasRef = useRef(null);\r\n  const chartRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!data?.length || !canvasRef.current) return;\r\n\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    if (chartRef.current) {\r\n      chartRef.current.destroy();\r\n      chartRef.current = null;\r\n    }\r\n\r\n    chartRef.current = new Chart(ctx, {\r\n      type: \"bar\",\r\n      data: {\r\n        labels: data.map((d) => d.label),\r\n        datasets: [\r\n          {\r\n            label: \"Cars\",\r\n            data: data.map((d) => d.count),\r\n            backgroundColor: TEAL,\r\n            borderRadius: 6,\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n          legend: { display: false },\r\n          tooltip: {\r\n            callbacks: {\r\n              label: (ctx) => \"Cars: \" + ctx.raw,\r\n            },\r\n          },\r\n        },\r\n        scales: {\r\n          x: {\r\n            grid: { display: false },\r\n            ticks: { maxRotation: 45, minRotation: 0, font: { size: 12 } },\r\n          },\r\n          y: {\r\n            beginAtZero: true,\r\n            ticks: { stepSize: 1, font: { size: 12 } },\r\n            grid: { color: \"rgba(0,0,0,0.06)\" },\r\n          },\r\n        },\r\n        animation: { duration: 600 },\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      if (chartRef.current) {\r\n        chartRef.current.destroy();\r\n        chartRef.current = null;\r\n      }\r\n    };\r\n  }, [data]);\r\n\r\n  if (!data?.length) return null;\r\n\r\n  return (\r\n    <div className=\"w-full h-full min-h-[280px]\">\r\n      <canvas ref={canvasRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarsByModelBarChart;\r\n","import { useEffect, useRef } from \"react\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\n/**\n * Accepts series from GET /admin/mobile-app-clicks/chart: { label, count }[]\n * Or legacy format: { label, ios, android }[]\n */\nconst MobileAppClicksChart = ({ data }) => {\n  const canvasRef = useRef(null);\n  const chartRef = useRef(null);\n\n  const hasCountFormat = data?.length && \"count\" in (data[0] ?? {});\n\n  useEffect(() => {\n    if (!data?.length || !canvasRef.current) return;\n\n    const ctx = canvasRef.current.getContext(\"2d\");\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n\n    const labels = data.map((d) => d.label);\n\n    const datasets = hasCountFormat\n      ? [\n          {\n            label: \"Clicks\",\n            data: data.map((d) => d.count ?? 0),\n            borderColor: \"#00A19C\",\n            backgroundColor: \"rgba(0,161,156,0.15)\",\n            fill: true,\n            tension: 0.3,\n          },\n        ]\n      : [\n          {\n            label: \"App Store (iOS)\",\n            data: data.map((d) => d.ios ?? 0),\n            borderColor: \"#007AFF\",\n            backgroundColor: \"rgba(0,122,255,0.15)\",\n            fill: true,\n            tension: 0.3,\n          },\n          {\n            label: \"Play Store (Android)\",\n            data: data.map((d) => d.android ?? 0),\n            borderColor: \"#34C759\",\n            backgroundColor: \"rgba(52,199,89,0.15)\",\n            fill: true,\n            tension: 0.3,\n          },\n        ];\n\n    chartRef.current = new Chart(ctx, {\n      type: \"line\",\n      data: { labels, datasets },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: { position: \"top\" },\n          tooltip: {\n            mode: \"index\",\n            callbacks: {\n              afterBody: (items) => {\n                const total = items.reduce((s, i) => s + (i.raw ?? 0), 0);\n                return `Total: ${total}`;\n              },\n            },\n          },\n        },\n        scales: {\n          x: {\n            grid: { display: false },\n            ticks: { maxRotation: 45, minRotation: 0, font: { size: 11 } },\n          },\n          y: {\n            beginAtZero: true,\n            ticks: { stepSize: 1, font: { size: 11 } },\n            grid: { color: \"rgba(0,0,0,0.06)\" },\n          },\n        },\n        animation: { duration: 400 },\n      },\n    });\n\n    return () => {\n      if (chartRef.current) {\n        chartRef.current.destroy();\n        chartRef.current = null;\n      }\n    };\n  }, [data, hasCountFormat]);\n\n  if (!data?.length) return null;\n\n  return (\n    <div className=\"w-full h-full min-h-[280px]\">\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default MobileAppClicksChart;\n","import { useEffect, useRef } from \"react\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\n/**\n * Pie chart for Play Store vs App Store clicks.\n * @param {Object} byStore - { playstore: number, appstore: number }\n */\nconst MobileAppClicksPieChart = ({ byStore }) => {\n  const canvasRef = useRef(null);\n  const chartRef = useRef(null);\n\n  const playstore = byStore?.playstore ?? 0;\n  const appstore = byStore?.appstore ?? 0;\n  const total = playstore + appstore;\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const ctx = canvasRef.current.getContext(\"2d\");\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n\n    chartRef.current = new Chart(ctx, {\n      type: \"pie\",\n      data: {\n        labels: [\"Play Store\", \"App Store\"],\n        datasets: [\n          {\n            data: [playstore, appstore],\n            backgroundColor: [\"#34C759\", \"#007AFF\"],\n            borderWidth: 2,\n            borderColor: \"#fff\",\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: { position: \"bottom\" },\n          tooltip: {\n            callbacks: {\n              label: (ctx) => {\n                const v = ctx.raw ?? 0;\n                const pct = total > 0 ? ((v / total) * 100).toFixed(1) : 0;\n                return `${ctx.label}: ${v} (${pct}%)`;\n              },\n            },\n          },\n        },\n        animation: { duration: 400 },\n      },\n    });\n\n    return () => {\n      if (chartRef.current) {\n        chartRef.current.destroy();\n        chartRef.current = null;\n      }\n    };\n  }, [playstore, appstore]);\n\n  return (\n    <div className=\"w-full h-full min-h-[200px]\">\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default MobileAppClicksPieChart;\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport api from \"@/lib/axios\";\r\nimport { getOnlineUsers, getMobileAppClicks, getMobileAppClicksChart } from \"@/lib/adminApi\";\r\n\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Users, Car, CalendarCheck, DollarSign, Circle, Clock, MousePointerClick } from \"lucide-react\";\r\nimport { formatLastSeen, getLatestLastSeen } from \"@/lib/formatLastSeen\";\r\n\r\nimport BookingsOverviewChart from \"@/components/admin/BookingsOverviewChart\";\r\nimport CarsByModelBarChart from \"@/components/admin/CarsByModelBarChart\";\r\nimport MobileAppClicksChart from \"@/components/admin/MobileAppClicksChart\";\r\nimport MobileAppClicksPieChart from \"@/components/admin/MobileAppClicksPieChart\";\r\n\r\n/* =====================================================\r\n   HELPERS\r\n===================================================== */\r\nconst formatDate = (date) => date.toISOString().split(\"T\")[0];\r\n\r\n/* =====================================================\r\n   BUILD BOOKINGS CHART DATA\r\n===================================================== */\r\nconst buildBookingsChartData = (bookings, period, dateRange) => {\r\n  const map = {};\r\n  const now = new Date();\r\n\r\n  const safeInc = (obj, key) => {\r\n    if (!obj[key]) obj[key] = 0;\r\n    obj[key]++;\r\n  };\r\n\r\n  /* =========================\r\n     DAILY (FROM → TO)\r\n  ========================== */\r\n  if (period === \"day\") {\r\n    const current = new Date(dateRange.from);\r\n    const end = new Date(dateRange.to);\r\n\r\n    // Create empty days\r\n    while (current <= end) {\r\n      const key = formatDate(current);\r\n      map[key] = {\r\n        label: current.toLocaleDateString(\"en-US\", {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        }),\r\n        total: 0,\r\n        pending: 0,\r\n        completed: 0,\r\n        cancelled: 0,\r\n      };\r\n      current.setDate(current.getDate() + 1);\r\n    }\r\n\r\n    bookings.forEach((b) => {\r\n      if (!b.start_datetime) return;\r\n      const key = formatDate(new Date(b.start_datetime));\r\n      if (!map[key]) return;\r\n\r\n      map[key].total++;\r\n      safeInc(map[key], b.booking_request_status);\r\n    });\r\n\r\n    return Object.values(map);\r\n  }\r\n\r\n  /* =========================\r\n     WEEK (LAST 7 DAYS)\r\n  ========================== */\r\n  if (period === \"week\") {\r\n    for (let i = 6; i >= 0; i--) {\r\n      const d = new Date();\r\n      d.setDate(now.getDate() - i);\r\n      const key = formatDate(d);\r\n\r\n      map[key] = {\r\n        label: d.toLocaleDateString(\"en-US\", { weekday: \"short\" }),\r\n        total: 0,\r\n        pending: 0,\r\n        completed: 0,\r\n        cancelled: 0,\r\n      };\r\n    }\r\n\r\n    bookings.forEach((b) => {\r\n      if (!b.start_datetime) return;\r\n      const key = formatDate(new Date(b.start_datetime));\r\n      if (!map[key]) return;\r\n\r\n      map[key].total++;\r\n      safeInc(map[key], b.booking_request_status);\r\n    });\r\n\r\n    return Object.values(map);\r\n  }\r\n\r\n  /* =========================\r\n     MONTH (CURRENT YEAR)\r\n  ========================== */\r\n  if (period === \"month\") {\r\n    const months = [\r\n      \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n      \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n    ];\r\n\r\n    months.forEach((m) => {\r\n      map[m] = {\r\n        label: m,\r\n        total: 0,\r\n        pending: 0,\r\n        completed: 0,\r\n        cancelled: 0,\r\n      };\r\n    });\r\n\r\n    bookings.forEach((b) => {\r\n      if (!b.start_datetime) return;\r\n      const d = new Date(b.start_datetime);\r\n      if (d.getFullYear() !== now.getFullYear()) return;\r\n\r\n      const month = d.toLocaleString(\"en-US\", { month: \"short\" });\r\n      map[month].total++;\r\n      safeInc(map[month], b.booking_request_status);\r\n    });\r\n\r\n    return months.map((m) => map[m]);\r\n  }\r\n\r\n  /* =========================\r\n     YEAR\r\n  ========================== */\r\n  bookings.forEach((b) => {\r\n    if (!b.start_datetime) return;\r\n    const year = new Date(b.start_datetime).getFullYear();\r\n\r\n    if (!map[year]) {\r\n      map[year] = {\r\n        label: String(year),\r\n        total: 0,\r\n        pending: 0,\r\n        completed: 0,\r\n        cancelled: 0,\r\n      };\r\n    }\r\n\r\n    map[year].total++;\r\n    safeInc(map[year], b.booking_request_status);\r\n  });\r\n\r\n  return Object.values(map).sort(\r\n    (a, b) => Number(a.label) - Number(b.label)\r\n  );\r\n};\r\n\r\n/* =====================================================\r\n   COMPONENT\r\n===================================================== */\r\nconst AdminDashboard = () => {\r\n  /* =========================\r\n     STATS\r\n  ========================== */\r\n  const [stats, setStats] = useState({\r\n    users: 0,\r\n    cars: 0,\r\n    bookings: 0,\r\n    revenue: 0,\r\n  });\r\n  const [onlineCount, setOnlineCount] = useState(null);\r\n  const [onlineUsersList, setOnlineUsersList] = useState([]);\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n\r\n  /* =========================\r\n     CHART\r\n  ========================== */\r\n  const today = new Date();\r\n  const thirtyDaysAgo = new Date();\r\n  thirtyDaysAgo.setDate(today.getDate() - 29);\r\n\r\n  const [chartPeriod, setChartPeriod] = useState(\"day\");\r\n  const [dateRange, setDateRange] = useState({\r\n    from: thirtyDaysAgo,\r\n    to: today,\r\n  });\r\n\r\n  const [chartData, setChartData] = useState([]);\r\n  const [loadingChart, setLoadingChart] = useState(true);\r\n\r\n  /* =========================\r\n     FETCH STATS\r\n  ========================== */\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        setLoadingStats(true);\r\n\r\n        const usersRes = await api.get(\"/admin/users\");\r\n        const carsRes = await api.get(\"/admin/cars\", { params: { per_page: 1, page: 1 } });\r\n        const bookingsRes = await api.get(\"/admin/bookings\");\r\n        const paymentsRes = await api.get(\"/admin/payments\");\r\n\r\n        const carsData = carsRes.data?.cars ?? carsRes.data;\r\n        const carsTotal = carsData?.total ?? carsRes.data?.meta?.total ?? 0;\r\n\r\n        setStats({\r\n          users: usersRes.data?.users?.total ?? 0,\r\n          cars: carsTotal,\r\n          bookings:\r\n            bookingsRes.data?.bookings?.total ??\r\n            bookingsRes.data?.total ??\r\n            0,\r\n          revenue:\r\n            paymentsRes.data?.total_revenue ??\r\n            paymentsRes.data?.revenue ??\r\n            0,\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Dashboard stats error:\", err);\r\n      } finally {\r\n        setLoadingStats(false);\r\n      }\r\n    };\r\n\r\n    fetchStats();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchOnline = async () => {\r\n      try {\r\n        const res = await getOnlineUsers({ minutes: 30 });\r\n        const data = res.data ?? res;\r\n        const list = data?.online_users ?? data?.users ?? data?.data ?? [];\r\n        setOnlineUsersList(Array.isArray(list) ? list : []);\r\n        setOnlineCount(data?.online_users_count ?? (Array.isArray(list) ? list.length : 0));\r\n      } catch {\r\n        setOnlineCount(0);\r\n        setOnlineUsersList([]);\r\n      }\r\n    };\r\n    fetchOnline();\r\n  }, []);\r\n\r\n  /* =========================\r\n     FETCH CHART\r\n  ========================== */\r\n  useEffect(() => {\r\n    const fetchChart = async () => {\r\n      try {\r\n        setLoadingChart(true);\r\n\r\n        const res = await api.get(\"/admin/bookings\");\r\n        const bookings = res?.data?.bookings?.data || [];\r\n\r\n        const data = buildBookingsChartData(\r\n          bookings,\r\n          chartPeriod,\r\n          dateRange\r\n        );\r\n\r\n        setChartData(data);\r\n      } catch (err) {\r\n        console.error(\"Chart error:\", err);\r\n        setChartData([]);\r\n      } finally {\r\n        setLoadingChart(false);\r\n      }\r\n    };\r\n\r\n    fetchChart();\r\n  }, [chartPeriod, dateRange]);\r\n\r\n  /* =========================\r\n     STAT CARD\r\n  ========================== */\r\n  const StatCard = ({ title, value, icon: Icon, color, subtitle }) => (\r\n    <Card>\r\n      <CardContent className=\"p-6 flex items-center gap-4\">\r\n        <div className={`w-12 h-12 rounded-xl ${color} flex items-center justify-center`}>\r\n          <Icon className=\"w-6 h-6 text-white\" />\r\n        </div>\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{title}</p>\r\n          <h2 className=\"text-2xl font-bold\">\r\n            {loadingStats ? \"—\" : value}\r\n          </h2>\r\n          {subtitle != null && (\r\n            <p className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\r\n              <Circle className=\"w-2 h-2 fill-green-500 text-green-500\" />\r\n              {subtitle}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n\r\n\r\n\r\n\r\n  /* =====================================================\r\n   BUILD CARS BAR CHART DATA (NEW – ISOLATED)\r\n===================================================== */\r\nconst buildCarsBarChartData = (cars, type) => {\r\n  const map = {};\r\n\r\n  cars.forEach((car) => {\r\n    const key =\r\n      type === \"make\"\r\n        ? car.make || \"Unknown\"\r\n        : car.model || \"Unknown\";\r\n\r\n    map[key] = (map[key] || 0) + 1;\r\n  });\r\n\r\n  return Object.entries(map)\r\n    .map(([label, count]) => ({\r\n      label,\r\n      count,\r\n    }))\r\n    .sort((a, b) => b.count - a.count);\r\n};\r\n\r\n\r\n\r\n/* =========================\r\n   CARS BAR CHART (NEW)\r\n========================= */\r\n// Cars distribution\r\nconst [carsRaw, setCarsRaw] = useState([]);\r\nconst [selectedMake, setSelectedMake] = useState(\"\");\r\nconst [selectedModel, setSelectedModel] = useState(\"\");\r\nconst [carsChartData, setCarsChartData] = useState([]);\r\n\r\n\r\nuseEffect(() => {\r\n  const fetchCars = async () => {\r\n    try {\r\n      const res = await api.get(\"admin/cars\");\r\n      setCarsRaw(res.data?.cars?.data || res.data?.cars || []);\r\n    } catch (err) {\r\n      console.error(\"Cars fetch error\", err);\r\n    }\r\n  };\r\n\r\n  fetchCars();\r\n}, []);\r\n\r\n\r\n\r\nconst getAllModels = (cars) =>\r\n  [...new Set(cars.map((c) => c.model).filter(Boolean))];\r\n\r\nconst getAllMakes = (cars) =>\r\n  [...new Set(cars.map((c) => c.make).filter(Boolean))].sort();\r\n\r\n\r\nconst buildCarsChartData = (cars, make, model) => {\r\n  let filtered = [...cars];\r\n\r\n  if (model) filtered = filtered.filter((c) => c.model === model);\r\n  if (make) filtered = filtered.filter((c) => c.make === make);\r\n\r\n  const map = {};\r\n\r\n  filtered.forEach((c) => {\r\n    let key;\r\n\r\n    if (model && make) key = `${c.make} ${c.model}`;\r\n    else if (model) key = c.make;\r\n    else if (make) key = c.model;\r\n    else key = c.make;\r\n\r\n    if (!key) return;\r\n    map[key] = (map[key] || 0) + 1;\r\n  });\r\n\r\n  return Object.entries(map).map(([label, count]) => ({\r\n    label,\r\n    count,\r\n  }));\r\n};\r\n\r\nconst getModelsByMake = (cars, make) => {\r\n  const filtered = make\r\n    ? cars.filter((c) => c.make === make)\r\n    : cars;\r\n\r\n  return [...new Set(filtered.map((c) => c.model).filter(Boolean))].sort();\r\n};\r\n\r\nuseEffect(() => {\r\n  setSelectedModel(\"\");\r\n}, [selectedMake]);\r\n\r\n\r\n\r\nuseEffect(() => {\r\n  const data = buildCarsChartData(\r\n    carsRaw,\r\n    selectedMake,\r\n    selectedModel\r\n  );\r\n  setCarsChartData(data);\r\n}, [carsRaw, selectedMake, selectedModel]);\r\n\r\n/* =========================\r\n   MOBILE APP CLICKS\r\n========================= */\r\nconst [clicksRaw, setClicksRaw] = useState([]);\r\nconst [clicksPeriod, setClicksPeriod] = useState(\"day\");\r\nconst [clicksChartData, setClicksChartData] = useState([]);\r\nconst [clicksByStore, setClicksByStore] = useState({ playstore: 0, appstore: 0 });\r\nconst [clicksTotalCount, setClicksTotalCount] = useState(0);\r\nconst [clicksLoading, setClicksLoading] = useState(true);\r\nconst [clicksListLoading, setClicksListLoading] = useState(true);\r\nconst [clicksApiAvailable, setClicksApiAvailable] = useState(null);\r\nconst [clicksDateRange, setClicksDateRange] = useState({\r\n  from: (() => {\r\n    const d = new Date();\r\n    d.setDate(d.getDate() - 29);\r\n    return d;\r\n  })(),\r\n  to: new Date(),\r\n});\r\n\r\nconst getDaysBack = () => {\r\n  if (clicksPeriod === \"day\") return 7;\r\n  if (clicksPeriod === \"week\") return 28;\r\n  return 30;\r\n};\r\n\r\nuseEffect(() => {\r\n  const fetchChart = async () => {\r\n    try {\r\n      setClicksLoading(true);\r\n      setClicksApiAvailable(null);\r\n      const res = await getMobileAppClicksChart({\r\n        period: clicksPeriod,\r\n        days_back: getDaysBack(),\r\n      });\r\n      setClicksApiAvailable(true);\r\n      const data = res.data ?? res;\r\n      const series = data.series ?? data.data?.series ?? [];\r\n      const byStore = data.by_store ?? data.data?.by_store ?? { playstore: 0, appstore: 0 };\r\n      const total = data.total_clicks ?? data.data?.total_clicks ?? 0;\r\n      setClicksChartData(Array.isArray(series) ? series : []);\r\n      setClicksByStore(typeof byStore === \"object\" ? byStore : { playstore: 0, appstore: 0 });\r\n      setClicksTotalCount(typeof total === \"number\" ? total : 0);\r\n    } catch (err) {\r\n      setClicksApiAvailable(err.response?.status === 404 ? false : null);\r\n      if (err.response?.status !== 404) {\r\n        console.error(\"Clicks chart error\", err);\r\n      }\r\n      setClicksChartData([]);\r\n      setClicksByStore({ playstore: 0, appstore: 0 });\r\n      setClicksTotalCount(0);\r\n    } finally {\r\n      setClicksLoading(false);\r\n    }\r\n  };\r\n  fetchChart();\r\n}, [clicksPeriod]);\r\n\r\nuseEffect(() => {\r\n  const fetchList = async () => {\r\n    try {\r\n      setClicksListLoading(true);\r\n      const res = await getMobileAppClicks({\r\n        date_from: formatDate(clicksDateRange.from),\r\n        date_to: formatDate(clicksDateRange.to),\r\n        per_page: 100,\r\n      });\r\n      const root = res.data ?? res;\r\n      const payload = root.clicks ?? root.data?.clicks ?? root.data ?? root;\r\n      const raw = payload?.data ?? (Array.isArray(payload) ? payload : []);\r\n      setClicksRaw(Array.isArray(raw) ? raw : []);\r\n    } catch (err) {\r\n      if (err.response?.status !== 404) {\r\n        console.error(\"Clicks list error\", err);\r\n      }\r\n      setClicksRaw([]);\r\n    } finally {\r\n      setClicksListLoading(false);\r\n    }\r\n  };\r\n  fetchList();\r\n}, [clicksDateRange.from, clicksDateRange.to]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Dashboard</h1>\r\n\r\n      {/* STATS */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <StatCard\r\n          title=\"Total Users\"\r\n          value={stats.users}\r\n          icon={Users}\r\n          color=\"bg-blue-500\"\r\n          subtitle={onlineCount !== null ? `Online now: ${onlineCount}` : undefined}\r\n        />\r\n        <StatCard title=\"Total Cars\" value={stats.cars} icon={Car} color=\"bg-[#00A19C]\" />\r\n        <StatCard title=\"Total Bookings\" value={stats.bookings} icon={CalendarCheck} color=\"bg-purple-500\" />\r\n        <StatCard title=\"Total Revenue\" value={`$${stats.revenue}`} icon={DollarSign} color=\"bg-green-500\" />\r\n      </div>\r\n\r\n      {/* ONLINE USERS (under Total Users) */}\r\n      {onlineUsersList.length > 0 && (\r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <h2 className=\"text-lg font-semibold flex items-center gap-2 mb-4\">\r\n              <Circle className=\"w-4 h-4 fill-green-500 text-green-500\" />\r\n              Online Users ({onlineCount})\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[240px] overflow-y-auto\">\r\n              {onlineUsersList.slice(0, 12).map((u) => {\r\n                const lastSeen = getLatestLastSeen(u);\r\n                const displayName = [u.first_name, u.last_name].filter(Boolean).join(\" \") || u.username || `User #${u.id}`;\r\n                return (\r\n                  <div\r\n                    key={u.id}\r\n                    className=\"flex items-center justify-between gap-3 rounded-lg border p-3 bg-muted/30\"\r\n                  >\r\n                    <div className=\"min-w-0\">\r\n                      <p className=\"font-medium truncate\">{displayName}</p>\r\n                      <p className=\"text-xs text-muted-foreground truncate\">@{u.username} • {u.role}</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground shrink-0\">\r\n                      <Clock className=\"w-3.5 h-3.5\" />\r\n                      {formatLastSeen(lastSeen)}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n            {onlineUsersList.length > 12 && (\r\n              <p className=\"text-xs text-muted-foreground mt-2\">+{onlineUsersList.length - 12} more</p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* BOOKING OVERVIEW */}\r\n<Card>\r\n  <CardContent className=\"p-6 space-y-4\">\r\n    <div className=\"flex flex-wrap items-start justify-between gap-4\">\r\n      <h2 className=\"text-lg font-semibold\">Booking Overview</h2>\r\n\r\n      {/* Controls */}\r\n      <div className=\"flex flex-col gap-3 min-w-[160px]\">\r\n        {/* Period selector */}\r\n        <select\r\n          value={chartPeriod}\r\n          onChange={(e) => setChartPeriod(e.target.value)}\r\n          className=\"border rounded-md px-3 py-1 text-sm bg-background\"\r\n        >\r\n          <option value=\"day\">Daily</option>\r\n          <option value=\"week\">Week</option>\r\n          <option value=\"month\">Month</option>\r\n          <option value=\"year\">Year</option>\r\n        </select>\r\n\r\n        {/* Date range (ONLY for Daily) */}\r\n        {chartPeriod === \"day\" && (\r\n          <div className=\"flex flex-col gap-2\">\r\n            <div>\r\n              <label className=\"text-xs text-muted-foreground mb-1 block\">\r\n                From\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.from)}\r\n                onChange={(e) =>\r\n                  setDateRange((p) => ({\r\n                    ...p,\r\n                    from: new Date(e.target.value),\r\n                  }))\r\n                }\r\n                className=\"border rounded-md px-2 py-1 text-sm w-full\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-xs text-muted-foreground mb-1 block\">\r\n                To\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.to)}\r\n                onChange={(e) =>\r\n                  setDateRange((p) => ({\r\n                    ...p,\r\n                    to: new Date(e.target.value),\r\n                  }))\r\n                }\r\n                className=\"border rounded-md px-2 py-1 text-sm w-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n\r\n    {/* Chart */}\r\n    <div className=\"w-full h-[320px]\">\r\n      {loadingChart ? (\r\n        <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n          Loading chart data...\r\n        </div>\r\n      ) : chartData.length === 0 ? (\r\n        <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n          No booking data\r\n        </div>\r\n      ) : (\r\n        <BookingsOverviewChart data={chartData} />\r\n      )}\r\n    </div>\r\n  </CardContent>\r\n</Card>\r\n\r\n{/* CARS Chart  */}\r\n<Card>\r\n  <CardContent className=\"p-6 space-y-4\">\r\n    <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n      <h2 className=\"text-lg font-semibold\">Cars Distribution</h2>\r\n\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {/* MAKE FIRST */}\r\n        <select\r\n          value={selectedMake}\r\n          onChange={(e) => setSelectedMake(e.target.value)}\r\n          className=\"border rounded-md px-3 py-1 text-sm bg-background\"\r\n        >\r\n          <option value=\"\">All Makes</option>\r\n          {getAllMakes(carsRaw).map((make) => (\r\n            <option key={make} value={make}>\r\n              {make}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        {/* MODEL DEPENDS ON MAKE */}\r\n        <select\r\n          value={selectedModel}\r\n          onChange={(e) => setSelectedModel(e.target.value)}\r\n          className=\"border rounded-md px-3 py-1 text-sm bg-background\"\r\n          disabled={!carsRaw.length}\r\n        >\r\n          <option value=\"\">All Models</option>\r\n          {getModelsByMake(carsRaw, selectedMake).map((model) => (\r\n            <option key={model} value={model}>\r\n              {model}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    {/* BAR CHART */}\r\n    <div className=\"h-[300px] w-full\">\r\n      {carsChartData.length === 0 ? (\r\n        <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n          No car data\r\n        </div>\r\n      ) : (\r\n        <CarsByModelBarChart data={carsChartData} />\r\n      )}\r\n    </div>\r\n  </CardContent>\r\n</Card>\r\n\r\n{/* MOBILE APP CLICKS */}\r\n<Card>\r\n  <CardContent className=\"p-6 space-y-6\">\r\n    <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n      <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n        <MousePointerClick className=\"w-5 h-5\" />\r\n        Mobile App Store Clicks\r\n      </h2>\r\n      <div className=\"flex flex-wrap items-center gap-3\">\r\n        <select\r\n          value={clicksPeriod}\r\n          onChange={(e) => setClicksPeriod(e.target.value)}\r\n          className=\"border rounded-md px-3 py-1.5 text-sm bg-background\"\r\n        >\r\n          <option value=\"day\">Daily</option>\r\n          <option value=\"week\">Weekly</option>\r\n          <option value=\"month\">Monthly</option>\r\n        </select>\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            type=\"date\"\r\n            value={formatDate(clicksDateRange.from)}\r\n            onChange={(e) =>\r\n              setClicksDateRange((p) => ({ ...p, from: new Date(e.target.value) }))\r\n            }\r\n            className=\"border rounded-md px-2 py-1 text-sm\"\r\n          />\r\n          <span className=\"text-muted-foreground\">–</span>\r\n          <input\r\n            type=\"date\"\r\n            value={formatDate(clicksDateRange.to)}\r\n            onChange={(e) =>\r\n              setClicksDateRange((p) => ({ ...p, to: new Date(e.target.value) }))\r\n            }\r\n            className=\"border rounded-md px-2 py-1 text-sm\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    {clicksApiAvailable === false && (\r\n      <p className=\"text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-950/30 rounded-lg p-3\">\r\n        API not found (404). Ensure the backend exposes <code className=\"text-xs bg-amber-100 dark:bg-amber-900/50 px-1 rounded\">GET /api/admin/mobile-app-clicks</code> and <code className=\"text-xs bg-amber-100 dark:bg-amber-900/50 px-1 rounded\">GET /api/admin/mobile-app-clicks/chart</code>.\r\n      </p>\r\n    )}\r\n\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n      <div className=\"lg:col-span-2 h-[300px]\">\r\n        {clicksLoading ? (\r\n          <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n            Loading chart...\r\n          </div>\r\n        ) : clicksChartData.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground gap-2\">\r\n            <span>No click data</span>\r\n            {clicksApiAvailable === true && (\r\n              <span className=\"text-xs\">Clicks are recorded when users tap Play Store / App Store links.</span>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"h-full\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Timeline</p>\r\n            <MobileAppClicksChart data={clicksChartData} />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"h-[260px] lg:h-[300px]\">\r\n        {clicksLoading ? (\r\n          <div className=\"flex items-center justify-center h-full text-muted-foreground text-sm\">\r\n            Loading...\r\n          </div>\r\n        ) : (clicksByStore?.playstore || clicksByStore?.appstore) > 0 ? (\r\n          <>\r\n            <p className=\"text-xs text-muted-foreground mb-1\">By store</p>\r\n            <MobileAppClicksPieChart byStore={clicksByStore} />\r\n          </>\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground text-sm\">\r\n            <span>No store breakdown yet</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n\r\n    {(clicksByStore?.playstore || clicksByStore?.appstore || clicksTotalCount) > 0 && (\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Total: {clicksTotalCount} — Play Store: {clicksByStore?.playstore ?? 0} · App Store: {clicksByStore?.appstore ?? 0}\r\n      </p>\r\n    )}\r\n\r\n    <div>\r\n      <h3 className=\"text-sm font-semibold mb-3\">Clickers list (date range below)</h3>\r\n      <div className=\"overflow-x-auto rounded-md border max-h-[320px] overflow-y-auto\">\r\n        <table className=\"w-full text-sm\">\r\n          <thead className=\"bg-muted/50 sticky top-0\">\r\n            <tr>\r\n              <th className=\"text-left p-3\">Date</th>\r\n              <th className=\"text-left p-3\">Store</th>\r\n              <th className=\"text-left p-3\">IP</th>\r\n              <th className=\"text-left p-3\">City</th>\r\n              <th className=\"text-left p-3\">Country</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {clicksListLoading ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"p-6 text-center text-muted-foreground\">\r\n                  Loading...\r\n                </td>\r\n              </tr>\r\n            ) : clicksRaw.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={5} className=\"p-6 text-center text-muted-foreground\">\r\n                  No clicks recorded\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              [...clicksRaw]\r\n                .sort((a, b) => new Date(b.created_at || 0) - new Date(a.created_at || 0))\r\n                .map((c) => (\r\n                  <tr key={c.id || `${c.created_at}-${c.ip}`} className=\"border-t hover:bg-muted/30\">\r\n                    <td className=\"p-3\">\r\n                      {c.created_at\r\n                        ? new Date(c.created_at).toLocaleString()\r\n                        : \"—\"}\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <span\r\n                        className={`inline-flex px-2 py-0.5 rounded text-xs font-medium ${\r\n                          (c.store || \"\").includes(\"ios\")\r\n                            ? \"bg-blue-100 text-blue-800\"\r\n                            : \"bg-green-100 text-green-800\"\r\n                        }`}\r\n                      >\r\n                        {(c.store || \"\").toLowerCase().includes(\"app\") ? \"App Store\" : \"Play Store\"}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"p-3 font-mono text-xs\">{c.ip || \"—\"}</td>\r\n                    <td className=\"p-3\">{c.city || \"—\"}</td>\r\n                    <td className=\"p-3\">\r\n                      {c.country_name || c.country || c.country_code || \"—\"}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </CardContent>\r\n</Card>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"names":["Chart","registerables","BookingsOverviewChart","data","canvasRef","useRef","chartRef","useEffect","ctx","labels","d","datasetConfig","key","label","color","jsx","TEAL","CarsByModelBarChart","MobileAppClicksChart","hasCountFormat","datasets","items","s","i","MobileAppClicksPieChart","byStore","playstore","appstore","total","v","pct","formatDate","date","buildBookingsChartData","bookings","period","dateRange","map","now","safeInc","obj","current","end","b","months","m","month","year","a","AdminDashboard","stats","setStats","useState","onlineCount","setOnlineCount","onlineUsersList","setOnlineUsersList","loadingStats","setLoadingStats","today","thirtyDaysAgo","chartPeriod","setChartPeriod","setDateRange","chartData","setChartData","loadingChart","setLoadingChart","usersRes","api","carsRes","bookingsRes","paymentsRes","carsTotal","err","res","getOnlineUsers","list","StatCard","title","value","Icon","subtitle","Card","jsxs","CardContent","Circle","carsRaw","setCarsRaw","selectedMake","setSelectedMake","selectedModel","setSelectedModel","carsChartData","setCarsChartData","getAllMakes","cars","c","buildCarsChartData","make","model","filtered","count","getModelsByMake","clicksRaw","setClicksRaw","clicksPeriod","setClicksPeriod","clicksChartData","setClicksChartData","clicksByStore","setClicksByStore","clicksTotalCount","setClicksTotalCount","clicksLoading","setClicksLoading","clicksListLoading","setClicksListLoading","clicksApiAvailable","setClicksApiAvailable","clicksDateRange","setClicksDateRange","getDaysBack","getMobileAppClicksChart","series","getMobileAppClicks","root","payload","raw","Users","Car","CalendarCheck","DollarSign","u","lastSeen","getLatestLastSeen","displayName","Clock","formatLastSeen","e","p","MousePointerClick","Fragment"],"mappings":"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"}