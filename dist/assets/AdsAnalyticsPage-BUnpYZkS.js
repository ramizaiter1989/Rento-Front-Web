import{c as B,r as p,b as P,t as V,j as e,B as b,C as O}from"./index-DbvXYXc0.js";import{C as d,b as x,c as m,a as f}from"./card-6tZ6FSP9.js";import{B as k}from"./badge-De3gxj8m.js";import{T as I,a as $,b as v,c as n,d as H,e as r}from"./table-Cdzf11jr.js";import{e as W,a as G}from"./exportUtils-CeAGTcG1.js";import{D as N}from"./download-5pvV8Zme.js";import{A as M}from"./arrow-left-Bfp2vJNH.js";import{C}from"./chart-column-Brn3O9I8.js";import{E as z}from"./eye--wIqRW1l.js";import{M as U}from"./mouse-pointer-click-DbtOab9b.js";import{T as q}from"./trending-up-XqNRnPMJ.js";import{R as A}from"./refresh-cw-BkItMj0z.js";const y={darkBlue:"#0E4C81",teal:"#008C95",limeGreen:"#8AC640"};function re(){const _=B(),[u,w]=p.useState(!1),[j,T]=p.useState([]),[h,D]=p.useState({totalAds:0,activeAds:0,totalViews:0,totalClicks:0,averageCTR:0});p.useEffect(()=>{g()},[]);const g=async()=>{w(!0);try{const l=(await P.get("/admin/ads?per_page=100")).data?.ads||[];T(l);const s=l.filter(c=>{if(!c.online)return!1;const o=new Date,F=new Date(c.start_at),L=new Date(c.expire_at);return o>=F&&o<=L}),t=l.reduce((c,o)=>c+(o.nb_views||0),0),i=l.reduce((c,o)=>c+(o.nb_clicks||0),0),R=t>0?(i/t*100).toFixed(2):0;D({totalAds:l.length,activeAds:s.length,totalViews:t,totalClicks:i,averageCTR:parseFloat(R)})}catch(a){V.error(a.response?.data?.message||"Failed to fetch ads")}finally{w(!1)}},S=()=>{const a=[{key:"id",label:"ID"},{key:"website",label:"Website"},{key:"company_type",label:"Company Type"},{key:"nb_views",label:"Views"},{key:"nb_clicks",label:"Clicks"},{key:"ctr",label:"CTR (%)",transform:s=>{const t=s.nb_views||0,i=s.nb_clicks||0;return t>0?(i/t*100).toFixed(2):"0.00"}},{key:"online",label:"Status",transform:s=>s.online?"Online":"Offline"},{key:"start_at",label:"Start Date",transform:s=>new Date(s.start_at).toLocaleString()},{key:"expire_at",label:"Expire Date",transform:s=>new Date(s.expire_at).toLocaleString()}],l=j.map(s=>({...s,ctr:a.find(t=>t.key==="ctr")?.transform?.(s),online:a.find(t=>t.key==="online")?.transform?.(s),start_at:a.find(t=>t.key==="start_at")?.transform?.(s),expire_at:a.find(t=>t.key==="expire_at")?.transform?.(s)}));W(l,a,"ads-analytics")},E=()=>{const a=[{key:"id",label:"ID"},{key:"website",label:"Website"},{key:"company_type",label:"Company Type"},{key:"nb_views",label:"Views"},{key:"nb_clicks",label:"Clicks"},{key:"ctr",label:"CTR (%)",transform:s=>{const t=s.nb_views||0,i=s.nb_clicks||0;return t>0?(i/t*100).toFixed(2):"0.00"}},{key:"online",label:"Status",transform:s=>s.online?"Online":"Offline"}],l=j.map(s=>({...s,ctr:a.find(t=>t.key==="ctr")?.transform?.(s),online:a.find(t=>t.key==="online")?.transform?.(s)}));G(l,a,"Ads Analytics Report","ads-analytics")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-900 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(to right, ${y.darkBlue}, ${y.teal}, ${y.limeGreen})`},children:"Ads Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track views, clicks, and performance metrics for all ads"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{variant:"outline",onClick:S,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Export Excel"]}),e.jsxs(b,{variant:"outline",onClick:E,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),e.jsxs(b,{variant:"outline",onClick:()=>_("/admin-panel-page"),className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Back to Admin Panel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Ads"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(f,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.totalAds})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Active Ads"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(f,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.activeAds})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(f,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.totalViews.toLocaleString()})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Clicks"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(f,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.totalClicks.toLocaleString()})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Avg CTR"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(f,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[h.averageCTR,"%"]})})]})]}),e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{children:"Ads Performance"}),e.jsx(b,{variant:"outline",size:"icon",onClick:g,disabled:u,children:e.jsx(A,{className:`w-4 h-4 ${u?"animate-spin":""}`})})]})}),e.jsx(f,{children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(A,{className:"w-8 h-8 animate-spin",style:{color:y.teal}})}):j.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No ads found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(I,{children:[e.jsx($,{children:e.jsxs(v,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Website"}),e.jsx(n,{children:"Company Type"}),e.jsx(n,{children:"Views"}),e.jsx(n,{children:"Clicks"}),e.jsx(n,{children:"CTR (%)"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Start Date"}),e.jsx(n,{children:"Expire Date"})]})}),e.jsx(H,{children:j.map(a=>{const l=a.nb_views||0,s=a.nb_clicks||0,t=l>0?(s/l*100).toFixed(2):"0.00",i=a.online&&new Date>=new Date(a.start_at)&&new Date<=new Date(a.expire_at);return e.jsxs(v,{children:[e.jsx(r,{className:"font-medium",children:a.id}),e.jsx(r,{children:a.website||"N/A"}),e.jsx(r,{children:a.company_type||"N/A"}),e.jsx(r,{children:l.toLocaleString()}),e.jsx(r,{children:s.toLocaleString()}),e.jsx(r,{children:e.jsxs("span",{className:`font-semibold ${parseFloat(t)>2?"text-green-600":parseFloat(t)>1?"text-yellow-600":"text-gray-600"}`,children:[t,"%"]})}),e.jsx(r,{children:i?e.jsx(k,{variant:"default",children:"Active"}):e.jsx(k,{variant:"secondary",children:"Inactive"})}),e.jsx(r,{children:new Date(a.start_at).toLocaleDateString()}),e.jsx(r,{children:new Date(a.expire_at).toLocaleDateString()})]},a.id)})})]})})})]})]})})}export{re as default};
