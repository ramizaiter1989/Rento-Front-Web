{"version":3,"file":"AdminFeaturedCarsPage-9Hchkw9T.js","sources":["../../src/pages/admin/AdminFeaturedCarsPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardContent,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n  Table,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n} from \"@/components/ui/table\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { RefreshCw, Plus, Trash } from \"lucide-react\";\r\nimport {\r\n  getFeaturedCars,\r\n  deleteFeaturedCar,\r\n} from \"@/lib/adminApi\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\nimport FeaturedCarForm from \"@/components/admin/FeaturedCarForm\";\r\n\r\n\r\nconst AdminFeaturedCarsPage = () => {\r\n  const [featuredCars, setFeaturedCars] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchFeaturedCars = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await getFeaturedCars();\r\n      setFeaturedCars(data.featured_cars.data);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchFeaturedCars();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!confirm(\"Delete this featured car?\")) return;\r\n\r\n    try {\r\n      await deleteFeaturedCar(id);\r\n      toast({ title: \"Featured car removed\" });\r\n      fetchFeaturedCars();\r\n    } catch {\r\n      toast({\r\n        title: \"Failed to delete featured car\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const calculateDuration = (start, end) => {\r\n    const s = new Date(start);\r\n    const e = new Date(end);\r\n    const diff =\r\n      Math.ceil((e - s) / (1000 * 60 * 60 * 24)) || 0;\r\n    return `${diff} days`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Featured Cars</h1>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            size=\"sm\"\r\n            aria-label=\"Create new featured car\"\r\n            onClick={() => setShowForm((v) => !v)}\r\n          >\r\n            <Plus className=\"h-4 w-4 mr-1\" />\r\n            Create Featured Car\r\n          </Button>\r\n\r\n          <Button\r\n            size=\"icon\"\r\n            aria-label=\"refresh data\"\r\n            variant=\"outline\"\r\n            onClick={fetchFeaturedCars}\r\n          >\r\n            <RefreshCw className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Featured Car */}\r\n      {showForm && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Create Featured Car</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <FeaturedCarForm\r\n              onSuccess={() => {\r\n                setShowForm(false);\r\n                fetchFeaturedCars();\r\n              }}\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Table */}\r\n      <Card>\r\n        <CardContent>\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>ID</TableHead>\r\n                  <TableHead>Car</TableHead>\r\n                  <TableHead>Duration</TableHead>\r\n                  <TableHead>Start Date</TableHead>\r\n                  <TableHead>Expire Date</TableHead>\r\n                  <TableHead className=\"text-right\">\r\n                    Actions\r\n                  </TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n\r\n              <TableBody>\r\n                {featuredCars.map((item) => (\r\n                  <TableRow key={item.id}>\r\n                    <TableCell>{item.id}</TableCell>\r\n\r\n                    <TableCell>\r\n                      {item.car?.make} {item.car?.model}\r\n                    </TableCell>\r\n\r\n                    <TableCell>\r\n                      {calculateDuration(\r\n                        item.start_at,\r\n                        item.expire_at\r\n                      )}\r\n                    </TableCell>\r\n\r\n                    <TableCell>\r\n                      {new Date(\r\n                        item.start_at\r\n                      ).toLocaleDateString()}\r\n                    </TableCell>\r\n\r\n                    <TableCell>\r\n                      {new Date(\r\n                        item.expire_at\r\n                      ).toLocaleDateString()}\r\n                    </TableCell>\r\n\r\n                    <TableCell className=\"text-right\">\r\n                      <Button\r\n                        size=\"icon\"\r\n                        aria-label=\"Delete featured car\"\r\n                        variant=\"destructive\"\r\n                        onClick={() => handleDelete(item.id)}\r\n                      >\r\n                        <Trash className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {!loading && featuredCars.length === 0 && (\r\n            <p className=\"text-center text-muted-foreground py-6\">\r\n              No featured cars found\r\n            </p>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminFeaturedCarsPage;\r\n"],"names":["AdminFeaturedCarsPage","featuredCars","setFeaturedCars","useState","showForm","setShowForm","loading","setLoading","fetchFeaturedCars","data","getFeaturedCars","useEffect","handleDelete","id","deleteFeaturedCar","toast","calculateDuration","start","end","s","e","jsxs","jsx","Button","v","Plus","RefreshCw","Card","CardHeader","CardTitle","CardContent","FeaturedCarForm","Table","TableHeader","TableRow","TableHead","TableBody","item","TableCell","Trash"],"mappings":"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"}