import{z as g,r as i,j as e,B as u,X as f}from"./index-DbvXYXc0.js";let n="https://rento-lb.com/api/api";n=n.trim().replace(/\/+$/,"");const c=g.create({baseURL:n,headers:{Accept:"application/json","Content-Type":"application/json"}}),w=async()=>{try{return(await c.get("/ads")).data?.ads||[]}catch{return[]}},b=async a=>{try{await c.post(`/ads/${a}/view`)}catch{}},j=async a=>{try{await c.post(`/ads/${a}/click`)}catch{}};function v(){const[a,l]=i.useState(!1),[t,p]=i.useState(null);i.useEffect(()=>{if(sessionStorage.getItem("adsPopupShown"))return;const m=async()=>{try{const s=await w();if(s.length>0){const o=s[Math.floor(Math.random()*s.length)];p(o),l(!0),o.id&&await b(o.id)}}catch(s){console.error("Error fetching ads:",s)}},x=setTimeout(()=>{m()},2e4);return()=>clearTimeout(x)},[]);const h=()=>{l(!1),sessionStorage.setItem("adsPopupShown","true")},r=async()=>{if(t?.id)try{await j(t.id)}catch(d){console.error("Error tracking ad click:",d)}finally{t.target_url&&window.open(t.target_url,"_blank")}};return!a||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full mx-4 animate-scale-in",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:h,className:"absolute top-2 right-2 z-10",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6",children:[t.image_url&&e.jsx("div",{className:"cursor-pointer mb-4 rounded-lg overflow-hidden",onClick:r,children:e.jsx("img",{src:t.image_url.startsWith("http")?t.image_url:`/api/storage/${t.image_url}`,alt:t.ads_text||"Advertisement",className:"w-full h-auto object-contain max-h-96"})}),t.ads_text&&e.jsx("div",{className:"text-center cursor-pointer",onClick:r,children:e.jsx("p",{className:"text-lg font-semibold mb-2",children:t.ads_text})}),t.target_url&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(u,{onClick:r,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:"Visit Website"})})]})]})})}export{v as default};
