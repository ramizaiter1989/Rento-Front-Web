{"version":3,"file":"AdminAdsPage-5Xm7L2XR.js","sources":["../../src/pages/admin/AdminAdsPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport AdForm from \"@/components/admin/AdForm\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardContent,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n  Table,\r\n  TableHeader,\r\n  TableRow,\r\n  TableHead,\r\n  TableBody,\r\n  TableCell,\r\n} from \"@/components/ui/table\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { RefreshCw, Plus, Trash } from \"lucide-react\";\r\nimport { getAds, deleteAd } from \"@/lib/adminApi\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\n\r\nconst AdminAdsPage = () => {\r\n  const [ads, setAds] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchAds = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await getAds();\r\n      setAds(data.ads.data);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAds();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!confirm(\"Delete this ad?\")) return;\r\n\r\n    try {\r\n      await deleteAd(id);\r\n      toast({ title: \"Ad deleted\" });\r\n      fetchAds();\r\n    } catch {\r\n      toast({\r\n        title: \"Failed to delete ad\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Ads</h1>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            size=\"sm\"\r\n            aria-label=\"Create new ad\"\r\n            onClick={() => setShowForm((v) => !v)}\r\n          >\r\n            <Plus className=\"h-4 w-4 mr-1\" />\r\n            Create Ad\r\n          </Button>\r\n\r\n          <Button\r\n            size=\"icon\"\r\n            aria-label=\"refresh data\"\r\n            variant=\"outline\"\r\n            onClick={fetchAds}\r\n          >\r\n            <RefreshCw className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create / Edit Form */}\r\n      {showForm && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Create Advertisement</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <AdForm\r\n              onSuccess={() => {\r\n                setShowForm(false);\r\n                fetchAds();\r\n              }}\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Ads Table */}\r\n      <Card>\r\n        <CardContent>\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>ID</TableHead>\r\n                  <TableHead>Website</TableHead>\r\n                  <TableHead>Company</TableHead>\r\n                  <TableHead>User</TableHead>\r\n                  <TableHead>Online</TableHead>\r\n                  <TableHead>Views</TableHead>\r\n                  <TableHead>Clicks</TableHead>\r\n                  <TableHead>Cost</TableHead>\r\n                  <TableHead className=\"text-right\">\r\n                    Actions\r\n                  </TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n\r\n              <TableBody>\r\n                {ads.map((ad) => (\r\n                  <TableRow key={ad.id}>\r\n                    <TableCell>{ad.id}</TableCell>\r\n\r\n                    <TableCell className=\"max-w-[160px] truncate\">\r\n                      <a\r\n                        href={ad.website}\r\n                        target=\"_blank\"\r\n                        className=\"text-blue-400 hover:underline\"\r\n                      >\r\n                        {ad.website}\r\n                      </a>\r\n                    </TableCell>\r\n\r\n                    <TableCell>{ad.company_type}</TableCell>\r\n\r\n                    <TableCell>\r\n                      {ad.user?.username ?? \"â€”\"}\r\n                    </TableCell>\r\n\r\n                    <TableCell>\r\n                      <Badge\r\n                        variant={\r\n                          ad.online ? \"success\" : \"secondary\"\r\n                        }\r\n                      >\r\n                        {ad.online ? \"Online\" : \"Offline\"}\r\n                      </Badge>\r\n                    </TableCell>\r\n\r\n                    <TableCell>{ad.nb_views}</TableCell>\r\n                    <TableCell>{ad.nb_clicks}</TableCell>\r\n\r\n                    <TableCell>\r\n                      ${Number(ad.amount_cost).toFixed(2)}\r\n                    </TableCell>\r\n\r\n                    <TableCell className=\"text-right\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"destructive\"\r\n                        aria-label=\"Delete ad\"\r\n                        onClick={() => handleDelete(ad.id)}\r\n                      >\r\n                        <Trash className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {!loading && ads.length === 0 && (\r\n            <p className=\"text-center text-muted-foreground py-6\">\r\n              No ads found\r\n            </p>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminAdsPage;\r\n"],"names":["AdminAdsPage","ads","setAds","useState","showForm","setShowForm","loading","setLoading","fetchAds","data","getAds","useEffect","handleDelete","id","deleteAd","toast","jsxs","jsx","Button","v","Plus","RefreshCw","Card","CardHeader","CardTitle","CardContent","AdForm","Table","TableHeader","TableRow","TableHead","TableBody","ad","TableCell","Badge","Trash"],"mappings":"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"}