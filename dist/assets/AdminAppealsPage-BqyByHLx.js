import{r as i,j as e,B as f}from"./index-DbvXYXc0.js";import"./card-6tZ6FSP9.js";import{T as v,a as S,b as x,c as d,d as b,e as c}from"./table-Cdzf11jr.js";import{I as A}from"./input-Bf8YvsU0.js";import{B as N}from"./badge-De3gxj8m.js";import{S as w,a as R,b as y,d as C,e as n}from"./select-895Ag1Vf.js";import{a2 as T,a3 as E}from"./adminApi-C-vdNBvN.js";import{t as j}from"./use-toast-BTZLQfF-.js";import{R as B}from"./refresh-ccw-Bj__5BR5.js";import"./index-UZKPKpE4.js";import"./index-CB20-cGd.js";import"./Combination-B6rQ859v.js";import"./index-9AnY3iUi.js";import"./index-DXYwaiuf.js";import"./index-D66kppzp.js";import"./index-ddclwrTJ.js";import"./index-P5EQzgSd.js";import"./check-nqnuVgMJ.js";function I(){const[o,l]=i.useState([]),[m,r]=i.useState(null),[p,u]=i.useState(!0),[a,s]=i.useState({search:"",status:"",page:1}),h=i.useCallback(async()=>{u(!0);try{const t=await T({search:a.search||void 0,status:a.status||void 0,page:a.page});console.log("APPEALS API RESPONSE:",t.data),l(t.data.appeals.data),r(t.data.appeals)}catch(t){console.error(t),j({title:"Failed to load appeals",variant:"destructive"})}finally{u(!1)}},[a]);return i.useEffect(()=>{h()},[h]),{appeals:o,meta:m,loading:p,filters:a,setFilters:s,refresh:()=>h(),updateStatus:async(t,g)=>{try{await E(t,g),j({title:"Appeal updated"}),h()}catch{j({title:"Failed to update appeal",variant:"destructive"})}}}}function Z(){const{appeals:o,meta:l,loading:m,filters:r,setFilters:p,refresh:u,updateStatus:a}=I();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Appeals"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(A,{className:"w-56",placeholder:"Search...",value:r.search,onChange:s=>p({...r,search:s.target.value,page:1})}),e.jsxs(w,{value:r.status||"all",onValueChange:s=>p({...r,status:s==="all"?"":s,page:1}),children:[e.jsx(R,{className:"w-36",children:e.jsx(y,{placeholder:"Status"})}),e.jsxs(C,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"submitted",children:"Submitted"}),e.jsx(n,{value:"under_review",children:"Under Review"}),e.jsx(n,{value:"resolved",children:"Resolved"}),e.jsx(n,{value:"rejected",children:"Rejected"})]})]}),e.jsx(f,{variant:"outline",onClick:u,children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"border rounded-xl bg-card",children:e.jsxs(v,{children:[e.jsx(S,{children:e.jsxs(x,{children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:"User"}),e.jsx(d,{children:"Message"}),e.jsx(d,{children:"Status"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsxs(b,{children:[o.map(s=>e.jsxs(x,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{children:s.user?.username??"—"}),e.jsx(c,{className:"max-w-xs truncate",children:s.message}),e.jsx(c,{children:e.jsx(N,{children:s.status})}),e.jsx(c,{className:"text-right",children:e.jsx(f,{size:"sm",onClick:()=>a(s.id,{status:"resolved"}),children:"Resolve"})})]},s.id)),!m&&o.length===0&&e.jsx(x,{children:e.jsx(c,{colSpan:5,className:"text-center py-6 text-muted-foreground",children:"No appeals found"})})]})]})}),l&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l.from,"–",l.to," of ",l.total]})]})}export{Z as default};
