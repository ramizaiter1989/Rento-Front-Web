import{d as Z,c as me,r as x,j as e,C as S,a as V,b as ge,t as xe}from"./index-DbvXYXc0.js";import{T as he,a as ue,b as z,c as b,d as pe,e as f}from"./table-Cdzf11jr.js";import{m as o}from"./proxy-Rx_HuwO6.js";import{S as ye}from"./search-DsOkoVxz.js";import{R as be}from"./refresh-cw-BkItMj0z.js";import{F as fe}from"./file-text-C6sc6Oop.js";import{A as J,Z as je}from"./zap-CO0QVGs0.js";import{U as ve}from"./users-E8rCSFRH.js";import{C as $}from"./circle-check-CPW3N-42.js";import{C as ke}from"./calendar-days-Docro2_h.js";import{C as Ne}from"./clock-BKbRfuIG.js";import{D as W}from"./dollar-sign-o41FEJ1i.js";import{T as Y}from"./timer-CnP3dwrb.js";import{C as we}from"./chevron-left-DlVhwfSE.js";import{C as _e}from"./chevron-right-DaEW3pZI.js";import{C as Ce}from"./circle-x-D4rSEnQD.js";import{C as De}from"./check-nqnuVgMJ.js";import"./use-presence-CB-MpOZZ.js";const $e=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Te=Z("badge-check",$e);const Se=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Be=Z("table-2",Se),r={darkBlue:"#0E4C81",teal:"#008C95",limeGreen:"#8AC640",darkBlueDim:"rgba(14, 76, 129, 0.1)",tealDim:"rgba(0, 140, 149, 0.1)",limeGreenDim:"rgba(138, 198, 64, 0.1)"};function Qe(){const R=me(),[m,A]=x.useState([]),[Q,H]=x.useState(!0),[k,X]=x.useState("list"),[N,L]=x.useState(new Date),[T,K]=x.useState(0),[B,ee]=x.useState("all"),[M,te]=x.useState(""),O=async()=>{H(!0);try{const{data:t}=await ge.get("/driver/bookings");A(t.data||[])}catch(t){console.error("Error fetching bookings:",t),A([]),xe.error("Failed to fetch bookings")}finally{H(!1)}};x.useEffect(()=>{O()},[]),x.useEffect(()=>{const t=P();if(t.length>1){const a=setInterval(()=>{K(s=>(s+1)%t.length)},5e3);return()=>clearInterval(a)}},[m]);const E=m.reduce((t,a)=>{const s=a.car?.id;return s&&(t[s]||(t[s]={car:a.car,bookings:[]}),t[s].bookings.push(a)),t},{}),w=t=>{const{car:a,bookings:s}=t;s?.length===1?R("/Mycars-bookings/detail",{state:{bookingId:s[0].id}}):R("/Mycars-bookings/detail",{state:{car:a,bookings:s||[]}})},_=t=>{const a={pending:{label:"Pending",color:r.teal,bgColor:r.tealDim,textColor:r.teal,icon:Y},confirmed:{label:"Confirmed",color:r.limeGreen,bgColor:r.limeGreenDim,textColor:r.limeGreen,icon:$},accepted:{label:"Accepted",color:r.darkBlue,bgColor:r.darkBlueDim,textColor:r.darkBlue,icon:De},rejected:{label:"Rejected",color:"#DC2626",bgColor:"rgba(220, 38, 38, 0.1)",textColor:"#DC2626",icon:Ce},completed:{label:"Completed",color:r.limeGreen,bgColor:r.limeGreenDim,textColor:r.limeGreen,icon:$}};return a[t]||a.pending},F=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),U=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),j=t=>{const a=new Date(t),s=new Date;return a.toDateString()===s.toDateString()},P=()=>m.filter(t=>j(t.start_datetime)||j(t.end_datetime)),C=(()=>{const t=m.length,a=m.filter(i=>i.booking_request_status==="pending").length,s=m.filter(i=>i.booking_request_status==="confirmed"||i.booking_request_status==="accepted").length,l=m.filter(i=>i.booking_request_status==="rejected").length,n=m.filter(i=>i.booking_request_status==="confirmed"||i.booking_request_status==="accepted").reduce((i,g)=>i+parseFloat(g.total_booking_price||0),0);return{total:t,pending:a,confirmed:s,rejected:l,totalRevenue:n}})(),G=Object.entries(E).reduce((t,[a,s])=>{let l=s.bookings;return B!=="all"&&(l=l.filter(n=>n.booking_request_status===B)),M&&(l=l.filter(n=>{const i=M.toLowerCase(),g=`${n.car?.make} ${n.car?.model}`.toLowerCase().includes(i),c=`${n.client?.first_name} ${n.client?.last_name}`.toLowerCase().includes(i),h=n.client?.email?.toLowerCase().includes(i);return g||c||h})),l.length>0&&(t[a]={...s,bookings:l}),t},{}),ae=t=>{const a=t.getFullYear(),s=t.getMonth(),l=new Date(a,s,1),i=new Date(a,s+1,0).getDate(),g=l.getDay();return{daysInMonth:i,startingDayOfWeek:g,year:a,month:s}},re=t=>m.filter(a=>{const s=new Date(a.start_datetime),l=new Date(a.end_datetime);return s.setHours(0,0,0,0),l.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===s.getTime()||t.getTime()===l.getTime()}),se=()=>{const{daysInMonth:t,startingDayOfWeek:a,year:s,month:l}=ae(N),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=()=>{L(new Date(N.getFullYear(),N.getMonth()-1))},c=()=>{L(new Date(N.getFullYear(),N.getMonth()+1))},h=[];for(let d=0;d<a;d++)h.push(e.jsx("div",{className:"aspect-square"},`empty-${d}`));for(let d=1;d<=t;d++){const p=new Date(s,l,d),u=re(p),v=j(p.toISOString());h.push(e.jsxs(o.div,{whileHover:{scale:1.05},className:`aspect-square border rounded-xl p-2 transition-all cursor-pointer ${v?"border-2 shadow-lg":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md"}`,style:v?{background:`linear-gradient(135deg, ${r.tealDim}, ${r.limeGreenDim})`,borderColor:r.teal}:{},onClick:()=>{if(u.length>0){const D=u.reduce((y,I)=>{const q=I.car?.id;return y[q]||(y[q]={car:I.car,bookings:[]}),y[q].bookings.push(I),y},{});w(Object.values(D)[0])}},children:[e.jsx("div",{className:`text-sm font-bold mb-1 ${v?"dark:text-gray-800":"text-gray-700 dark:text-gray-300"}`,style:v?{color:r.teal}:{},children:d}),u.length>0&&e.jsxs("div",{className:"space-y-1",children:[u.slice(0,2).map(D=>{const y=_(D.booking_request_status);return e.jsx("div",{className:"text-xs px-1.5 py-0.5 rounded-md truncate font-medium shadow-sm",style:{background:y.bgColor,color:y.textColor},children:D.car?.make},D.id)}),u.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["+",u.length-2," more"]})]})]},d))}return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-5 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${r.teal}, ${r.darkBlue})`},children:[n[l]," ",s]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:g,className:"p-2 rounded-xl transition-colors",style:{background:r.tealDim,color:r.teal},children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:c,className:"p-2 rounded-xl transition-colors",style:{background:r.tealDim,color:r.teal},children:e.jsx(_e,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[i.map(d=>e.jsx("div",{className:"text-center font-bold text-sm text-gray-600 dark:text-gray-400 py-2",children:d},d)),h]}),e.jsx("div",{className:"flex justify-center gap-6 mt-5 pt-5 border-t border-gray-200 dark:border-gray-700",children:["pending","confirmed","rejected"].map(d=>{const p=_(d);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-md shadow-sm",style:{background:p.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:p.label})]},d)})})]})},le=t=>{if(!t.length)return{start:new Date,end:new Date};const a=t.flatMap(n=>[new Date(n.start_datetime),new Date(n.end_datetime)]),s=new Date(Math.min(...a.map(n=>n.getTime()))),l=new Date(Math.max(...a.map(n=>n.getTime())));return s.setDate(s.getDate()-2),l.setDate(l.getDate()+2),{start:s,end:l}},ne=({startDate:t,endDate:a})=>{const s=[],l=new Date(t);for(;l<=a;){const n=j(l.toISOString());s.push({date:l.toLocaleDateString("en-US",{day:"numeric",month:"short"}),day:l.toLocaleDateString("en-US",{weekday:"short"}),isToday:n}),l.setDate(l.getDate()+1)}return e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:s.map((n,i)=>e.jsxs("div",{className:`px-4 py-3 text-sm font-semibold text-center ${n.isToday,""}`,style:n.isToday?{background:r.tealDim,color:r.teal}:{},children:[e.jsx("div",{className:"font-bold",children:n.day}),e.jsx("div",{className:"text-xs opacity-80",children:n.date})]},i))})},ie=({car:t,bookings:a,dateRange:s,onBookingClick:l})=>{const{start:n,end:i}=s,g=Math.ceil((i-n)/(1e3*60*60*24));return e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center border-b border-gray-200 dark:border-gray-700 py-3 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"w-56 flex items-center gap-3 px-4",children:[e.jsx("img",{src:t.main_image_url?`/api/storage/${t.main_image_url}`:"/placeholder.png",alt:t.model,className:"w-14 h-10 object-cover rounded-lg shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white",children:[t.make," ",t.model]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),a.length," booking",a.length!==1?"s":""]})]})]}),e.jsx("div",{className:"relative flex-1 h-14 px-2",children:a.map(c=>{const h=new Date(c.start_datetime),d=new Date(c.end_datetime),p=Math.max(0,Math.floor((h-n)/(1e3*60*60*24))),u=Math.max(1,Math.ceil((d-h)/(1e3*60*60*24))),v=_(c.booking_request_status);return e.jsx(o.div,{whileHover:{scale:1.05,zIndex:10},className:"absolute h-10 rounded-xl cursor-pointer shadow-lg hover:shadow-xl transition-all flex items-center justify-center text-white text-xs font-semibold",style:{left:`${p/g*100}%`,width:`${u/g*100}%`,background:v.color},title:`${c.client?.first_name} ${c.client?.last_name}
${F(c.start_datetime)} - ${F(c.end_datetime)}
Total: $${c.total_booking_price}`,onClick:()=>l({car:t,bookings:[c]}),children:e.jsx("span",{className:"truncate px-2",children:c.client?.first_name})},c.id)})})]})},oe=()=>{const t=le(m);return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx(ne,{startDate:t.start,endDate:t.end}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:Object.values(E).map(({car:a,bookings:s})=>e.jsx(ie,{car:a,bookings:s,dateRange:t,onBookingClick:w},a.id))}),e.jsx("div",{className:"flex justify-center gap-6 p-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:["pending","confirmed","rejected"].map(a=>{const s=_(a);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-md shadow-sm",style:{background:s.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s.label})]},a)})})]})},de=()=>{const t=P();if(t.length===0)return null;const a=t[T],s=j(a.start_datetime),l=j(a.end_datetime);return e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},onClick:()=>w({car:a.car,bookings:[a]}),className:"mb-5 rounded-2xl shadow-2xl p-5 text-white overflow-hidden relative cursor-pointer hover:opacity-95 transition-opacity",style:{background:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal}, ${r.limeGreen})`},children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(o.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"p-3 bg-white/20 backdrop-blur-sm rounded-2xl",children:e.jsx(je,{className:"w-7 h-7"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Today's Action Required!"}),t.length>1&&e.jsxs("span",{className:"text-xs bg-white/30 backdrop-blur-sm px-3 py-1 rounded-full font-semibold",children:[T+1," of ",t.length]})]}),e.jsx("p",{className:"text-sm opacity-90 mb-4 flex items-center gap-2",children:s&&l?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),"Booking starts AND ends today"]}):s?e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4"}),"Booking starts today"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),"Booking ends today"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.car?.main_image_url?`/api/storage/${a.car.main_image_url}`:"/placeholder.png",alt:a.car?.model,className:"w-12 h-12 rounded-lg object-cover border-2 border-white/30 shadow-lg"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg",children:[a.car?.make," ",a.car?.model]}),e.jsxs("div",{className:"text-xs opacity-80 flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),a.car?.year," • ",a.car?.car_category]})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.client?.profile_picture?`/api/storage/${a.client.profile_picture}`:"/default-avatar.png",alt:a.client?.username,className:"w-12 h-12 rounded-full object-cover border-2 border-white/30 shadow-lg"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg flex items-center gap-1",children:[a.client?.first_name," ",a.client?.last_name,a.client?.verified_by_admin&&e.jsx(Te,{className:"w-4 h-4"})]}),e.jsxs("div",{className:"text-xs opacity-80",children:["@",a.client?.username]})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:F(a.start_datetime)})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-bold",children:["$",a.total_booking_price]})]}),a.app_fees_amount!=null&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[e.jsx("span",{className:"opacity-90",children:"App fee:"}),e.jsxs("span",{children:["$",a.app_fees_amount]})]}),e.jsx("div",{className:"px-3 py-1.5 rounded-lg font-semibold text-xs bg-white/20",children:a.booking_request_status.toUpperCase()})]})]})]})}),t.length>1&&e.jsx("div",{className:"absolute bottom-4 right-6 flex gap-2",children:t.map((n,i)=>e.jsx(o.div,{animate:{scale:i===T?1.2:1},className:`h-2 rounded-full transition-all ${i===T?"bg-white w-8":"bg-white/40 w-2"}`},i))})]})},ce=()=>{const t=[{title:"Total Bookings",value:C.total,icon:S,gradient:`linear-gradient(135deg, ${r.teal}, ${r.darkBlue})`,change:"+12%"},{title:"Pending Review",value:C.pending,icon:Y,gradient:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal})`,change:"Needs action",alert:C.pending>0},{title:"Confirmed",value:C.confirmed,icon:$,gradient:`linear-gradient(135deg, ${r.limeGreen}, ${r.teal})`,change:"+8%"},{title:"Total Revenue",value:`$${C.totalRevenue.toFixed(2)}`,icon:W,gradient:`linear-gradient(135deg, ${r.teal}, ${r.limeGreen})`,change:"+15%"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-5",children:t.map((a,s)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{y:-5},className:"relative",children:e.jsxs("div",{className:"relative z-10 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 border border-gray-200 dark:border-gray-700 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl p-2.5 shadow-lg",style:{background:a.gradient},children:e.jsx(a.icon,{className:"w-full h-full text-white"})}),a.alert&&e.jsx(o.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 rounded-full",style:{background:r.teal}})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:a.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:a.value}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:a.change})]})},s))})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-black pt-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"mb-5",children:e.jsx(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:e.jsx("h1",{className:"text-4xl font-bold bg-clip-text text-transparent mb-2",style:{backgroundImage:`linear-gradient(135deg, ${r.darkBlue}, ${r.teal}, ${r.limeGreen})`},children:"Booking Management"})})}),e.jsx(de,{}),e.jsx(ce,{}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 mb-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by car, client, or email...",value:M,onChange:t=>te(t.target.value),className:"w-full pl-11 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 dark:text-white",style:{focusRing:r.teal}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:B,onChange:t=>ee(t.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 dark:text-white",style:{focusRing:r.teal},children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"accepted",children:"Accepted"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,className:"p-2.5 rounded-xl transition-colors",style:{background:r.tealDim,color:r.teal},children:e.jsx(be,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"flex gap-2 mb-5 overflow-x-auto pb-2",children:[{id:"list",label:"List View",icon:fe},{id:"table",label:"Table",icon:Be},{id:"timeline",label:"Timeline",icon:J},{id:"calendar",label:"Calendar",icon:S}].map(t=>e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium whitespace-nowrap transition-all ${k===t.id?"text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700"}`,style:k===t.id?{background:`linear-gradient(135deg, ${r.teal}, ${r.darkBlue})`}:{},onClick:()=>X(t.id),children:[e.jsx(t.icon,{className:"w-5 h-5"}),t.label]},t.id))}),Q?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-t-4 rounded-full",style:{borderColor:r.tealDim,borderTopColor:r.teal}})}):Object.keys(G).length===0?e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-20 bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx(ve,{className:"w-20 h-20 mx-auto mb-4",style:{color:r.teal,opacity:.3}}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg font-medium mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Try adjusting your filters or search query"})]}):k==="calendar"?e.jsx(se,{}):k==="timeline"?e.jsx(oe,{}):k==="table"?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsxs(z,{className:"border-gray-200 dark:border-gray-700",children:[e.jsx(b,{className:"text-gray-700 dark:text-gray-300",children:"Car"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300",children:"Client"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300",children:"Dates"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300 text-right",children:"Amount"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300 text-right",children:"App Fee"}),e.jsx(b,{className:"text-gray-700 dark:text-gray-300 text-right",children:"Net"})]})}),e.jsx(pe,{children:Object.values(G).flatMap(t=>t.bookings).map(t=>{const a=_(t.booking_request_status),s=parseFloat(t.total_booking_price||0),l=Number(t.app_fees_amount)||0,n=s-l;return e.jsxs(z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 border-gray-200 dark:border-gray-700",onClick:()=>w({car:t.car,bookings:[t]}),children:[e.jsxs(f,{className:"font-medium text-gray-900 dark:text-white",children:[t.car?.make," ",t.car?.model]}),e.jsxs(f,{className:"text-gray-600 dark:text-gray-400",children:[t.client?.first_name," ",t.client?.last_name]}),e.jsxs(f,{className:"text-gray-600 dark:text-gray-400 text-sm",children:[U(t.start_datetime)," – ",U(t.end_datetime)]}),e.jsx(f,{children:e.jsx("span",{className:"px-2 py-1 rounded-lg text-xs font-semibold",style:{background:a.bgColor,color:a.textColor},children:a.label})}),e.jsxs(f,{className:"text-right font-semibold",style:{color:r.limeGreen},children:["$",s.toFixed(2)]}),e.jsxs(f,{className:"text-right text-gray-600 dark:text-gray-400",children:["$",l.toFixed(2)]}),e.jsxs(f,{className:"text-right font-bold",style:{color:r.teal},children:["$",n.toFixed(2)]})]},t.id)})})]})})}):e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5",children:Object.values(G).map(({car:t,bookings:a},s)=>{const l=a.filter(i=>i.booking_request_status==="pending").length,n=a.filter(i=>i.booking_request_status==="confirmed"||i.booking_request_status==="accepted").length;return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{y:-8,scale:1.02},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer border border-gray-200 dark:border-gray-700 group",onClick:()=>w({car:t,bookings:a}),children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:t?.main_image_url?`/api/storage/${t.main_image_url}`:"/placeholder.png",alt:t?.model||"Car",className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-3 right-3 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-full px-3 py-1.5 shadow-lg",children:e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"}),a.length]})})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("h2",{className:"font-bold text-xl text-gray-900 dark:text-white mb-1",children:[t?.make||"Unknown"," ",t?.model||""]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),t?.year||"N/A"," • ",t?.car_category||"N/A"]}),t?.notes&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-2",children:t.notes}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border",style:{background:r.tealDim,borderColor:r.teal},children:[e.jsx(o.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 rounded-full",style:{background:r.teal}}),e.jsxs("span",{className:"text-xs font-semibold",style:{color:r.teal},children:[l," Pending"]})]}),n>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border",style:{background:r.limeGreenDim,borderColor:r.limeGreen},children:[e.jsx($,{className:"w-4 h-4",style:{color:r.limeGreen}}),e.jsxs("span",{className:"text-xs font-semibold",style:{color:r.limeGreen},children:[n," Confirmed"]})]})]})]})]},t.id)})})]})})}export{Qe as AgentBookingsPage};
