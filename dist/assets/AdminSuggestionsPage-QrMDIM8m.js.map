{"version":3,"file":"AdminSuggestionsPage-QrMDIM8m.js","sources":["../../src/hooks/useSuggestions.js","../../src/pages/admin/AdminSuggestionsPage.jsx"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\r\nimport api from \"@/lib/axios\";\r\n\r\nexport default function useSuggestions() {\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [meta, setMeta] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [filters, setFilters] = useState({\r\n    page: 1,\r\n  });\r\n\r\n  const fetchSuggestions = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const res = await api.get(\"/admin/suggestions\", {\r\n        params: {\r\n          page: filters.page,\r\n        },\r\n      });\r\n\r\n      const payload = res.data?.suggestions;\r\n\r\n      setSuggestions(payload?.data || []);\r\n      setMeta({\r\n        current_page: payload?.current_page,\r\n        last_page: payload?.last_page,\r\n        from: payload?.from,\r\n        to: payload?.to,\r\n        total: payload?.total,\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch suggestions:\", err);\r\n      setSuggestions([]);\r\n      setMeta(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters.page]);\r\n\r\n  useEffect(() => {\r\n    fetchSuggestions();\r\n  }, [fetchSuggestions]);\r\n\r\n  return {\r\n    suggestions,\r\n    meta,\r\n    loading,\r\n    filters,\r\n    setFilters,\r\n    refresh: fetchSuggestions,\r\n  };\r\n}\r\n","import useSuggestions from \"@/hooks/useSuggestions\";\r\n\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { RefreshCcw, ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\nexport default function AdminSuggestionsPage() {\r\n  const {\r\n    suggestions,\r\n    meta,\r\n    loading,\r\n    filters,\r\n    setFilters,\r\n    refresh,\r\n  } = useSuggestions();\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-xl font-semibold\">Suggestions</h1>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <Button variant=\"outline\" onClick={refresh}>\r\n          <RefreshCcw className=\"w-4 h-4 mr-2\" />\r\n          Refresh\r\n        </Button>\r\n\r\n        {meta && (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              size=\"icon\"\r\n              variant=\"outline\"\r\n              aria-label=\"Previous Page\"\r\n              disabled={meta.current_page === 1}\r\n              onClick={() =>\r\n                setFilters({ ...filters, page: meta.current_page - 1 })\r\n              }\r\n            >\r\n              <ChevronLeft className=\"w-4 h-4\" />\r\n            </Button>\r\n\r\n            <span className=\"text-sm\">\r\n              Page {meta.current_page} of {meta.last_page}\r\n            </span>\r\n\r\n            <Button\r\n              size=\"icon\"\r\n              variant=\"outline\"\r\n              aria-label=\"Next Page\"\r\n              disabled={meta.current_page === meta.last_page}\r\n              onClick={() =>\r\n                setFilters({ ...filters, page: meta.current_page + 1 })\r\n              }\r\n            >\r\n              <ChevronRight className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"border rounded-xl bg-card\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>ID</TableHead>\r\n              <TableHead>User</TableHead>\r\n              <TableHead>Message</TableHead>\r\n              <TableHead>Created At</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n\r\n          <TableBody>\r\n            {suggestions.map((s) => (\r\n              <TableRow key={s.id}>\r\n                <TableCell>{s.id}</TableCell>\r\n                <TableCell>\r\n                  {s.user?.username || \"—\"}\r\n                </TableCell>\r\n                <TableCell className=\"max-w-[400px] truncate\">\r\n                  {s.message || s.suggestion || \"—\"}\r\n                </TableCell>\r\n                <TableCell>\r\n                  {new Date(s.created_at).toLocaleString()}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n\r\n            {!loading && suggestions.length === 0 && (\r\n              <TableRow>\r\n                <TableCell\r\n                  colSpan={4}\r\n                  className=\"text-center py-6 text-muted-foreground\"\r\n                >\r\n                  No suggestions found\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n\r\n            {loading && (\r\n              <TableRow>\r\n                <TableCell\r\n                  colSpan={4}\r\n                  className=\"text-center py-6 text-muted-foreground\"\r\n                >\r\n                  Loading...\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n\r\n      {/* Meta */}\r\n      {meta && (\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Showing {meta.from}–{meta.to} of {meta.total}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useSuggestions","suggestions","setSuggestions","useState","meta","setMeta","loading","setLoading","filters","setFilters","fetchSuggestions","useCallback","payload","api","err","useEffect","AdminSuggestionsPage","refresh","jsxs","jsx","Button","RefreshCcw","ChevronLeft","ChevronRight","Table","TableHeader","TableRow","TableHead","TableBody","s","TableCell"],"mappings":"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"}