import{r,b as f,j as e,B as m}from"./index-DbvXYXc0.js";import{T as j,a as b,b as g,c as u,d as N,e as n}from"./table-Cdzf11jr.js";import{R as S}from"./refresh-ccw-Bj__5BR5.js";import{C as _}from"./chevron-left-DlVhwfSE.js";import{C as v}from"./chevron-right-DaEW3pZI.js";function C(){const[i,s]=r.useState([]),[o,l]=r.useState(null),[c,d]=r.useState(!1),[a,p]=r.useState({page:1}),x=r.useCallback(async()=>{try{d(!0);const t=(await f.get("/admin/suggestions",{params:{page:a.page}})).data?.suggestions;s(t?.data||[]),l({current_page:t?.current_page,last_page:t?.last_page,from:t?.from,to:t?.to,total:t?.total})}catch(h){console.error("Failed to fetch suggestions:",h),s([]),l(null)}finally{d(!1)}},[a.page]);return r.useEffect(()=>{x()},[x]),{suggestions:i,meta:o,loading:c,filters:a,setFilters:p,refresh:x}}function k(){const{suggestions:i,meta:s,loading:o,filters:l,setFilters:c,refresh:d}=C();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Suggestions"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(m,{variant:"outline",onClick:d,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Refresh"]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{size:"icon",variant:"outline","aria-label":"Previous Page",disabled:s.current_page===1,onClick:()=>c({...l,page:s.current_page-1}),children:e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx(m,{size:"icon",variant:"outline","aria-label":"Next Page",disabled:s.current_page===s.last_page,onClick:()=>c({...l,page:s.current_page+1}),children:e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"border rounded-xl bg-card",children:e.jsxs(j,{children:[e.jsx(b,{children:e.jsxs(g,{children:[e.jsx(u,{children:"ID"}),e.jsx(u,{children:"User"}),e.jsx(u,{children:"Message"}),e.jsx(u,{children:"Created At"})]})}),e.jsxs(N,{children:[i.map(a=>e.jsxs(g,{children:[e.jsx(n,{children:a.id}),e.jsx(n,{children:a.user?.username||"—"}),e.jsx(n,{className:"max-w-[400px] truncate",children:a.message||a.suggestion||"—"}),e.jsx(n,{children:new Date(a.created_at).toLocaleString()})]},a.id)),!o&&i.length===0&&e.jsx(g,{children:e.jsx(n,{colSpan:4,className:"text-center py-6 text-muted-foreground",children:"No suggestions found"})}),o&&e.jsx(g,{children:e.jsx(n,{colSpan:4,className:"text-center py-6 text-muted-foreground",children:"Loading..."})})]})]})}),s&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s.from,"–",s.to," of ",s.total]})]})}export{k as default};
