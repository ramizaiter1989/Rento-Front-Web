{"version":3,"file":"AdminHolidaysPage-6_4p_5k2.js","sources":["../../src/components/admin/HolidayForm.jsx","../../src/pages/admin/AdminHolidaysPage.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { createHoliday } from \"@/lib/adminApi\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\n\r\nconst HolidayForm = ({ onSuccess }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [form, setForm] = useState({\r\n    car_id: \"\",\r\n    holiday_name: \"\",\r\n    start: \"\",\r\n    end: \"\",\r\n    percentage_increase: \"\",\r\n    is_active: true,\r\n  });\r\n\r\n  const update = (k, v) =>\r\n    setForm((p) => ({ ...p, [k]: v }));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      await createHoliday({\r\n        car_id: Number(form.car_id),\r\n        holiday_name: form.holiday_name,\r\n        holiday_dates: {\r\n          start: form.start,\r\n          end: form.end,\r\n        },\r\n        percentage_increase: Number(\r\n          form.percentage_increase\r\n        ),\r\n        is_active: form.is_active,\r\n      });\r\n\r\n      toast({ title: \"Holiday created\" });\r\n      onSuccess?.();\r\n    } catch {\r\n      toast({\r\n        title: \"Failed to create holiday\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"grid grid-cols-1 md:grid-cols-2 gap-4\"\r\n    >\r\n      <div>\r\n        <Label>Car ID</Label>\r\n        <Input\r\n          value={form.car_id}\r\n          onChange={(e) =>\r\n            update(\"car_id\", e.target.value)\r\n          }\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label>Holiday Name</Label>\r\n        <Input\r\n          value={form.holiday_name}\r\n          onChange={(e) =>\r\n            update(\"holiday_name\", e.target.value)\r\n          }\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label>Start Date</Label>\r\n        <Input\r\n          type=\"date\"\r\n          value={form.start}\r\n          onChange={(e) =>\r\n            update(\"start\", e.target.value)\r\n          }\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label>End Date</Label>\r\n        <Input\r\n          type=\"date\"\r\n          value={form.end}\r\n          onChange={(e) =>\r\n            update(\"end\", e.target.value)\r\n          }\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label>Increase %</Label>\r\n        <Input\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          value={form.percentage_increase}\r\n          onChange={(e) =>\r\n            update(\"percentage_increase\", e.target.value)\r\n          }\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3 mt-6\">\r\n        <Switch\r\n          checked={form.is_active}\r\n          onCheckedChange={(v) =>\r\n            update(\"is_active\", v)\r\n          }\r\n        />\r\n        <Label>Active</Label>\r\n      </div>\r\n\r\n      <div className=\"md:col-span-2 flex justify-end gap-2\">\r\n        <Button type=\"submit\" disabled={loading}>\r\n          {loading ? \"Saving...\" : \"Create Holiday\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default HolidayForm;\r\n","import { useEffect, useState } from \"react\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardContent,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n  Table,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n} from \"@/components/ui/table\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { RefreshCw, Plus, Trash } from \"lucide-react\";\r\nimport {\r\n  getHolidays,\r\n  deleteHoliday,\r\n} from \"@/lib/adminApi\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\nimport HolidayForm from \"@/components/admin/HolidayForm\";\r\n\r\nconst AdminHolidaysPage = () => {\r\n  const [holidays, setHolidays] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchHolidays = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getHolidays();\r\n\r\n      console.log(\"HOLIDAYS API RESPONSE:\", response.data);\r\n\r\n      setHolidays(response.data.holidays.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast({\r\n        title: \"Failed to load holidays\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchHolidays();\r\n  }, []);\r\n\r\n  // ðŸ—‘ DELETE HOLIDAY\r\n  const handleDelete = async (id) => {\r\n    if (!confirm(\"Delete this holiday?\")) return;\r\n\r\n    try {\r\n      await deleteHoliday(id);\r\n      toast({ title: \"Holiday deleted\" });\r\n      fetchHolidays();\r\n    } catch {\r\n      toast({\r\n        title: \"Failed to delete holiday\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* HEADER */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Holidays</h1>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            size=\"sm\"\r\n            aria-label=\"Create new holiday\"\r\n            onClick={() => setShowForm((v) => !v)}\r\n          >\r\n            <Plus className=\"h-4 w-4 mr-1\" />\r\n            Create Holiday\r\n          </Button>\r\n\r\n          <Button\r\n            size=\"icon\"\r\n            aria-label=\"refresh data\"\r\n            variant=\"outline\"\r\n            onClick={fetchHolidays}\r\n          >\r\n            <RefreshCw className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CREATE HOLIDAY FORM */}\r\n      {showForm && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Create Holiday</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <HolidayForm\r\n              onSuccess={() => {\r\n                setShowForm(false);\r\n                fetchHolidays();\r\n              }}\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* HOLIDAYS TABLE */}\r\n      <Card>\r\n        <CardContent>\r\n          {loading ? (\r\n            <p className=\"text-center py-6 text-muted-foreground\">\r\n              Loading holidays...\r\n            </p>\r\n          ) : holidays.length === 0 ? (\r\n            <p className=\"text-center py-6 text-muted-foreground\">\r\n              No holidays found\r\n            </p>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>ID</TableHead>\r\n                    <TableHead>Car</TableHead>\r\n                    <TableHead>Holiday Name</TableHead>\r\n                    <TableHead>Dates</TableHead>\r\n                    <TableHead>Increase %</TableHead>\r\n                    <TableHead>Active</TableHead>\r\n                    <TableHead className=\"text-right\">\r\n                      Actions\r\n                    </TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n\r\n                <TableBody>\r\n                  {holidays.map((holiday) => (\r\n                    <TableRow key={holiday.id}>\r\n                      <TableCell>{holiday.id}</TableCell>\r\n\r\n                      <TableCell>\r\n                        {holiday.car?.make}{\" \"}\r\n                        {holiday.car?.model}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        {holiday.holiday_name}\r\n                      </TableCell>\r\n\r\n                      <TableCell className=\"text-xs\">\r\n                        {holiday.holiday_dates.start} â†’{\" \"}\r\n                        {holiday.holiday_dates.end}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        {holiday.percentage_increase}%\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <Badge\r\n                          variant={\r\n                            holiday.is_active\r\n                              ? \"success\"\r\n                              : \"secondary\"\r\n                          }\r\n                        >\r\n                          {holiday.is_active\r\n                            ? \"Yes\"\r\n                            : \"No\"}\r\n                        </Badge>\r\n                      </TableCell>\r\n\r\n                      <TableCell className=\"text-right\">\r\n                        <Button\r\n                          size=\"icon\"\r\n                          aria-label=\"Delete holiday\"\r\n                          variant=\"destructive\"\r\n                          onClick={() =>\r\n                            handleDelete(holiday.id)\r\n                          }\r\n                        >\r\n                          <Trash className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminHolidaysPage;\r\n"],"names":["HolidayForm","onSuccess","loading","setLoading","useState","form","setForm","update","k","v","p","handleSubmit","e","createHoliday","toast","jsxs","jsx","Label","Input","Switch","Button","AdminHolidaysPage","holidays","setHolidays","showForm","setShowForm","fetchHolidays","response","getHolidays","error","useEffect","handleDelete","id","deleteHoliday","Plus","RefreshCw","Card","CardHeader","CardTitle","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","holiday","TableCell","Badge","Trash"],"mappings":"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"}